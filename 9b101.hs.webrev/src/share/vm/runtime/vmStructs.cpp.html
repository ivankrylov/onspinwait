<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="-1" />
<!--
   Note to customizers: the body of the webrev is IDed as SUNWwebrev
   to allow easy overriding by users of webrev via the userContent.css
   mechanism available in some browsers.

   For example, to have all "removed" information be red instead of
   brown, set a rule in your userContent.css file like:

       body#SUNWwebrev span.removed { color: red ! important; }
-->
<style type="text/css" media="screen">
body {
    background-color: #eeeeee;
}
hr {
    border: none 0;
    border-top: 1px solid #aaa;
    height: 1px;
}
div.summary {
    font-size: .8em;
    border-bottom: 1px solid #aaa;
    padding-left: 1em;
    padding-right: 1em;
}
div.summary h2 {
    margin-bottom: 0.3em;
}
div.summary table th {
    text-align: right;
    vertical-align: top;
    white-space: nowrap;
}
span.lineschanged {
    font-size: 0.7em;
}
span.oldmarker {
    color: red;
    font-size: large;
    font-weight: bold;
}
span.newmarker {
    color: green;
    font-size: large;
    font-weight: bold;
}
span.removed {
    color: brown;
}
span.changed {
    color: blue;
}
span.new {
    color: blue;
    font-weight: bold;
}
a.print { font-size: x-small; }

</style>

<style type="text/css" media="print">
pre { font-size: 0.8em; font-family: courier, monospace; }
span.removed { color: #444; font-style: italic }
span.changed { font-weight: bold; }
span.new { font-weight: bold; }
span.newmarker { font-size: 1.2em; font-weight: bold; }
span.oldmarker { font-size: 1.2em; font-weight: bold; }
a.print {display: none}
hr { border: none 0; border-top: 1px solid #aaa; height: 1px; }
</style>

<title>New src/share/vm/runtime/vmStructs.cpp</title>
<body id="SUNWwebrev">
<pre>
   1 /*
   2  * Copyright (c) 2000, 2015, Oracle and/or its affiliates. All rights reserved.
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.
   8  *
   9  * This code is distributed in the hope that it will be useful, but WITHOUT
  10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  12  * version 2 for more details (a copy is included in the LICENSE file that
  13  * accompanied this code).
  14  *
  15  * You should have received a copy of the GNU General Public License version
  16  * 2 along with this work; if not, write to the Free Software Foundation,
  17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  18  *
  19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  20  * or visit www.oracle.com if you need additional information or have any
  21  * questions.
  22  *
  23  */
  24 
  25 #include "precompiled.hpp"
  26 #include "ci/ciField.hpp"
  27 #include "ci/ciInstance.hpp"
  28 #include "ci/ciMethodData.hpp"
  29 #include "ci/ciObjArrayKlass.hpp"
  30 #include "ci/ciSymbol.hpp"
  31 #include "classfile/compactHashtable.hpp"
  32 #include "classfile/dictionary.hpp"
  33 #include "classfile/javaClasses.hpp"
  34 #include "classfile/loaderConstraints.hpp"
  35 #include "classfile/placeholders.hpp"
  36 #include "classfile/stringTable.hpp"
  37 #include "classfile/systemDictionary.hpp"
  38 #include "code/codeBlob.hpp"
  39 #include "code/codeCache.hpp"
  40 #include "code/compressedStream.hpp"
  41 #include "code/location.hpp"
  42 #include "code/nmethod.hpp"
  43 #include "code/pcDesc.hpp"
  44 #include "code/stubs.hpp"
  45 #include "code/vmreg.hpp"
  46 #include "compiler/compileBroker.hpp"
  47 #include "compiler/oopMap.hpp"
  48 #include "gc/parallel/immutableSpace.hpp"
  49 #include "gc/parallel/mutableSpace.hpp"
  50 #include "gc/serial/defNewGeneration.hpp"
  51 #include "gc/serial/tenuredGeneration.hpp"
  52 #include "gc/shared/cardTableRS.hpp"
  53 #include "gc/shared/collectedHeap.hpp"
  54 #include "gc/shared/genCollectedHeap.hpp"
  55 #include "gc/shared/generation.hpp"
  56 #include "gc/shared/generationSpec.hpp"
  57 #include "gc/shared/space.hpp"
  58 #include "interpreter/bytecodeInterpreter.hpp"
  59 #include "interpreter/bytecodes.hpp"
  60 #include "interpreter/interpreter.hpp"
  61 #include "memory/allocation.hpp"
  62 #include "memory/allocation.inline.hpp"
  63 #include "memory/freeBlockDictionary.hpp"
  64 #include "memory/heap.hpp"
  65 #include "memory/metachunk.hpp"
  66 #include "memory/referenceType.hpp"
  67 #include "memory/universe.hpp"
  68 #include "memory/virtualspace.hpp"
  69 #include "oops/arrayKlass.hpp"
  70 #include "oops/arrayOop.hpp"
  71 #include "oops/compiledICHolder.hpp"
  72 #include "oops/constMethod.hpp"
  73 #include "oops/constantPool.hpp"
  74 #include "oops/cpCache.hpp"
  75 #include "oops/instanceClassLoaderKlass.hpp"
  76 #include "oops/instanceKlass.hpp"
  77 #include "oops/instanceMirrorKlass.hpp"
  78 #include "oops/instanceOop.hpp"
  79 #include "oops/klass.hpp"
  80 #include "oops/markOop.hpp"
  81 #include "oops/method.hpp"
  82 #include "oops/methodCounters.hpp"
  83 #include "oops/methodData.hpp"
  84 #include "oops/objArrayKlass.hpp"
  85 #include "oops/objArrayOop.hpp"
  86 #include "oops/oop.inline.hpp"
  87 #include "oops/symbol.hpp"
  88 #include "oops/typeArrayKlass.hpp"
  89 #include "oops/typeArrayOop.hpp"
  90 #include "prims/jvmtiAgentThread.hpp"
  91 #include "runtime/arguments.hpp"
  92 #include "runtime/deoptimization.hpp"
  93 #include "runtime/globals.hpp"
  94 #include "runtime/java.hpp"
  95 #include "runtime/javaCalls.hpp"
  96 #include "runtime/os.hpp"
  97 #include "runtime/perfMemory.hpp"
  98 #include "runtime/serviceThread.hpp"
  99 #include "runtime/sharedRuntime.hpp"
 100 #include "runtime/stubRoutines.hpp"
 101 #include "runtime/thread.inline.hpp"
 102 #include "runtime/vframeArray.hpp"
 103 #include "runtime/vmStructs.hpp"
 104 #include "utilities/array.hpp"
 105 #include "utilities/globalDefinitions.hpp"
 106 #include "utilities/hashtable.hpp"
 107 #include "utilities/macros.hpp"
 108 
 109 #ifdef TARGET_OS_FAMILY_linux
 110 # include "vmStructs_linux.hpp"
 111 #endif
 112 #ifdef TARGET_OS_FAMILY_solaris
 113 # include "vmStructs_solaris.hpp"
 114 #endif
 115 #ifdef TARGET_OS_FAMILY_windows
 116 # include "vmStructs_windows.hpp"
 117 #endif
 118 #ifdef TARGET_OS_FAMILY_aix
 119 # include "vmStructs_aix.hpp"
 120 #endif
 121 #ifdef TARGET_OS_FAMILY_bsd
 122 # include "vmStructs_bsd.hpp"
 123 #endif
 124 
 125 #ifdef TARGET_ARCH_x86
 126 # include "vmStructs_x86.hpp"
 127 #endif
 128 #ifdef TARGET_ARCH_sparc
 129 # include "vmStructs_sparc.hpp"
 130 #endif
 131 #ifdef TARGET_ARCH_zero
 132 # include "vmStructs_zero.hpp"
 133 #endif
 134 #ifdef TARGET_ARCH_arm
 135 # include "vmStructs_arm.hpp"
 136 #endif
 137 #ifdef TARGET_ARCH_ppc
 138 # include "vmStructs_ppc.hpp"
 139 #endif
 140 #ifdef TARGET_ARCH_aarch64
 141 # include "vmStructs_aarch64.hpp"
 142 #endif
 143 
 144 #ifdef TARGET_OS_ARCH_linux_x86
 145 # include "vmStructs_linux_x86.hpp"
 146 #endif
 147 #ifdef TARGET_OS_ARCH_linux_sparc
 148 # include "vmStructs_linux_sparc.hpp"
 149 #endif
 150 #ifdef TARGET_OS_ARCH_linux_zero
 151 # include "vmStructs_linux_zero.hpp"
 152 #endif
 153 #ifdef TARGET_OS_ARCH_solaris_x86
 154 # include "vmStructs_solaris_x86.hpp"
 155 #endif
 156 #ifdef TARGET_OS_ARCH_solaris_sparc
 157 # include "vmStructs_solaris_sparc.hpp"
 158 #endif
 159 #ifdef TARGET_OS_ARCH_windows_x86
 160 # include "vmStructs_windows_x86.hpp"
 161 #endif
 162 #ifdef TARGET_OS_ARCH_linux_arm
 163 # include "vmStructs_linux_arm.hpp"
 164 #endif
 165 #ifdef TARGET_OS_ARCH_linux_ppc
 166 # include "vmStructs_linux_ppc.hpp"
 167 #endif
 168 #ifdef TARGET_OS_ARCH_linux_aarch64
 169 # include "vmStructs_linux_aarch64.hpp"
 170 #endif
 171 #ifdef TARGET_OS_ARCH_aix_ppc
 172 # include "vmStructs_aix_ppc.hpp"
 173 #endif
 174 #ifdef TARGET_OS_ARCH_bsd_x86
 175 # include "vmStructs_bsd_x86.hpp"
 176 #endif
 177 #ifdef TARGET_OS_ARCH_bsd_zero
 178 # include "vmStructs_bsd_zero.hpp"
 179 #endif
 180 
 181 #if INCLUDE_ALL_GCS
 182 #include "gc/cms/compactibleFreeListSpace.hpp"
 183 #include "gc/cms/concurrentMarkSweepGeneration.hpp"
 184 #include "gc/cms/concurrentMarkSweepThread.hpp"
 185 #include "gc/cms/parNewGeneration.hpp"
 186 #include "gc/cms/vmStructs_cms.hpp"
 187 #include "gc/cms/vmStructs_parNew.hpp"
 188 #include "gc/g1/vmStructs_g1.hpp"
 189 #include "gc/parallel/asPSOldGen.hpp"
 190 #include "gc/parallel/asPSYoungGen.hpp"
 191 #include "gc/parallel/parallelScavengeHeap.hpp"
 192 #include "gc/parallel/psOldGen.hpp"
 193 #include "gc/parallel/psVirtualspace.hpp"
 194 #include "gc/parallel/psYoungGen.hpp"
 195 #include "gc/parallel/vmStructs_parallelgc.hpp"
 196 #endif // INCLUDE_ALL_GCS
 197 
 198 #if INCLUDE_JVMCI
 199 # include "jvmci/vmStructs_jvmci.hpp"
 200 #endif
 201 
 202 #if INCLUDE_TRACE
 203 #include "runtime/vmStructs_trace.hpp"
 204 #endif
 205 
 206 #include "runtime/vmStructs_ext.hpp"
 207 
 208 #ifdef COMPILER2
 209 #include "opto/addnode.hpp"
 210 #include "opto/block.hpp"
 211 #include "opto/callnode.hpp"
 212 #include "opto/castnode.hpp"
 213 #include "opto/cfgnode.hpp"
 214 #include "opto/chaitin.hpp"
 215 #include "opto/convertnode.hpp"
 216 #include "opto/divnode.hpp"
 217 #include "opto/intrinsicnode.hpp"
 218 #include "opto/locknode.hpp"
 219 #include "opto/loopnode.hpp"
 220 #include "opto/machnode.hpp"
 221 #include "opto/matcher.hpp"
 222 #include "opto/mathexactnode.hpp"
 223 #include "opto/movenode.hpp"
 224 #include "opto/mulnode.hpp"
 225 #include "opto/narrowptrnode.hpp"
 226 #include "opto/opaquenode.hpp"
 227 #include "opto/optoreg.hpp"
 228 #include "opto/parse.hpp"
 229 #include "opto/phaseX.hpp"
 230 #include "opto/regalloc.hpp"
 231 #include "opto/rootnode.hpp"
 232 #include "opto/subnode.hpp"
 233 #include "opto/vectornode.hpp"
 234 #endif // COMPILER2
 235 
 236 // Note: the cross-product of (c1, c2, product, nonproduct, ...),
 237 // (nonstatic, static), and (unchecked, checked) has not been taken.
 238 // Only the macros currently needed have been defined.
 239 
 240 // A field whose type is not checked is given a null string as the
 241 // type name, indicating an "opaque" type to the serviceability agent.
 242 
 243 // NOTE: there is an interdependency between this file and
 244 // HotSpotTypeDataBase.java, which parses the type strings.
 245 
 246 #ifndef REG_COUNT
 247   #define REG_COUNT 0
 248 #endif
 249 
 250 #if INCLUDE_JVMTI
 251   #define JVMTI_STRUCTS(static_field) \
 252     static_field(JvmtiExport,                     _can_access_local_variables,                  bool)                                  \
 253     static_field(JvmtiExport,                     _can_hotswap_or_post_breakpoint,              bool)                                  \
 254     static_field(JvmtiExport,                     _can_post_on_exceptions,                      bool)                                  \
 255     static_field(JvmtiExport,                     _can_walk_any_space,                          bool)
 256 #else
 257   #define JVMTI_STRUCTS(static_field)
 258 #endif // INCLUDE_JVMTI
 259 
 260 typedef HashtableEntry&lt;intptr_t, mtInternal&gt;  IntptrHashtableEntry;
 261 typedef Hashtable&lt;intptr_t, mtInternal&gt;       IntptrHashtable;
 262 typedef Hashtable&lt;Symbol*, mtSymbol&gt;          SymbolHashtable;
 263 typedef HashtableEntry&lt;Symbol*, mtClass&gt;      SymbolHashtableEntry;
 264 typedef Hashtable&lt;oop, mtSymbol&gt;              StringHashtable;
 265 typedef TwoOopHashtable&lt;Klass*, mtClass&gt;      KlassTwoOopHashtable;
 266 typedef Hashtable&lt;Klass*, mtClass&gt;            KlassHashtable;
 267 typedef HashtableEntry&lt;Klass*, mtClass&gt;       KlassHashtableEntry;
 268 typedef TwoOopHashtable&lt;Symbol*, mtClass&gt;     SymbolTwoOopHashtable;
 269 typedef CompactHashtable&lt;Symbol*, char&gt;       SymbolCompactHashTable;
 270 
 271 //--------------------------------------------------------------------------------
 272 // VM_STRUCTS
 273 //
 274 // This list enumerates all of the fields the serviceability agent
 275 // needs to know about. Be sure to see also the type table below this one.
 276 // NOTE that there are platform-specific additions to this table in
 277 // vmStructs_&lt;os&gt;_&lt;cpu&gt;.hpp.
 278 
 279 #define VM_STRUCTS(nonstatic_field, \
 280                    static_field, \
 281                    static_ptr_volatile_field, \
 282                    unchecked_nonstatic_field, \
 283                    volatile_nonstatic_field, \
 284                    nonproduct_nonstatic_field, \
 285                    c1_nonstatic_field, \
 286                    c2_nonstatic_field, \
 287                    unchecked_c1_static_field, \
 288                    unchecked_c2_static_field) \
 289                                                                                                                                      \
 290   /******************************************************************/                                                               \
 291   /* OopDesc and Klass hierarchies (NOTE: MethodData* incomplete) */                                                                 \
 292   /******************************************************************/                                                               \
 293                                                                                                                                      \
 294   volatile_nonstatic_field(oopDesc,            _mark,                                         markOop)                               \
 295   volatile_nonstatic_field(oopDesc,            _metadata._klass,                              Klass*)                                \
 296   volatile_nonstatic_field(oopDesc,            _metadata._compressed_klass,                   narrowOop)                             \
 297      static_field(oopDesc,                     _bs,                                           BarrierSet*)                           \
 298   nonstatic_field(ArrayKlass,                  _dimension,                                    int)                                   \
 299   volatile_nonstatic_field(ArrayKlass,         _higher_dimension,                             Klass*)                                \
 300   volatile_nonstatic_field(ArrayKlass,         _lower_dimension,                              Klass*)                                \
 301   nonstatic_field(ArrayKlass,                  _vtable_len,                                   int)                                   \
 302   nonstatic_field(CompiledICHolder,            _holder_method,                                Method*)                               \
 303   nonstatic_field(CompiledICHolder,            _holder_klass,                                 Klass*)                                \
 304   nonstatic_field(ConstantPool,                _tags,                                         Array&lt;u1&gt;*)                            \
 305   nonstatic_field(ConstantPool,                _cache,                                        ConstantPoolCache*)                    \
 306   nonstatic_field(ConstantPool,                _pool_holder,                                  InstanceKlass*)                        \
 307   nonstatic_field(ConstantPool,                _operands,                                     Array&lt;u2&gt;*)                            \
 308   nonstatic_field(ConstantPool,                _length,                                       int)                                   \
 309   nonstatic_field(ConstantPool,                _resolved_references,                          jobject)                               \
 310   nonstatic_field(ConstantPool,                _reference_map,                                Array&lt;u2&gt;*)                            \
 311   nonstatic_field(ConstantPoolCache,           _length,                                       int)                                   \
 312   nonstatic_field(ConstantPoolCache,           _constant_pool,                                ConstantPool*)                         \
 313   nonstatic_field(InstanceKlass,               _array_klasses,                                Klass*)                                \
 314   nonstatic_field(InstanceKlass,               _methods,                                      Array&lt;Method*&gt;*)                       \
 315   nonstatic_field(InstanceKlass,               _default_methods,                              Array&lt;Method*&gt;*)                       \
 316   nonstatic_field(InstanceKlass,               _local_interfaces,                             Array&lt;Klass*&gt;*)                        \
 317   nonstatic_field(InstanceKlass,               _transitive_interfaces,                        Array&lt;Klass*&gt;*)                        \
 318   nonstatic_field(InstanceKlass,               _fields,                                       Array&lt;u2&gt;*)                            \
 319   nonstatic_field(InstanceKlass,               _java_fields_count,                            u2)                                    \
 320   nonstatic_field(InstanceKlass,               _constants,                                    ConstantPool*)                         \
 321   nonstatic_field(InstanceKlass,               _class_loader_data,                            ClassLoaderData*)                      \
 322   nonstatic_field(InstanceKlass,               _source_file_name_index,                       u2)                                    \
 323   nonstatic_field(InstanceKlass,               _source_debug_extension,                       const char*)                           \
 324   nonstatic_field(InstanceKlass,               _inner_classes,                                Array&lt;jushort&gt;*)                       \
 325   nonstatic_field(InstanceKlass,               _nonstatic_field_size,                         int)                                   \
 326   nonstatic_field(InstanceKlass,               _static_field_size,                            int)                                   \
 327   nonstatic_field(InstanceKlass,               _static_oop_field_count,                       u2)                                    \
 328   nonstatic_field(InstanceKlass,               _nonstatic_oop_map_size,                       int)                                   \
 329   nonstatic_field(InstanceKlass,               _is_marked_dependent,                          bool)                                  \
 330   nonstatic_field(InstanceKlass,               _misc_flags,                                   u2)                                    \
 331   nonstatic_field(InstanceKlass,               _minor_version,                                u2)                                    \
 332   nonstatic_field(InstanceKlass,               _major_version,                                u2)                                    \
 333   nonstatic_field(InstanceKlass,               _init_state,                                   u1)                                    \
 334   nonstatic_field(InstanceKlass,               _init_thread,                                  Thread*)                               \
 335   nonstatic_field(InstanceKlass,               _vtable_len,                                   int)                                   \
 336   nonstatic_field(InstanceKlass,               _itable_len,                                   int)                                   \
 337   nonstatic_field(InstanceKlass,               _reference_type,                               u1)                                    \
 338   volatile_nonstatic_field(InstanceKlass,      _oop_map_cache,                                OopMapCache*)                          \
 339   nonstatic_field(InstanceKlass,               _jni_ids,                                      JNIid*)                                \
 340   nonstatic_field(InstanceKlass,               _osr_nmethods_head,                            nmethod*)                              \
 341   nonstatic_field(InstanceKlass,               _breakpoints,                                  BreakpointInfo*)                       \
 342   nonstatic_field(InstanceKlass,               _generic_signature_index,                      u2)                                    \
 343   nonstatic_field(InstanceKlass,               _methods_jmethod_ids,                          jmethodID*)                            \
 344   volatile_nonstatic_field(InstanceKlass,      _idnum_allocated_count,                        u2)                                    \
 345   nonstatic_field(InstanceKlass,               _annotations,                                  Annotations*)                          \
 346   nonstatic_field(InstanceKlass,               _method_ordering,                              Array&lt;int&gt;*)                           \
 347   nonstatic_field(InstanceKlass,               _default_vtable_indices,                       Array&lt;int&gt;*)                           \
 348   nonstatic_field(Klass,                       _super_check_offset,                           juint)                                 \
 349   nonstatic_field(Klass,                       _secondary_super_cache,                        Klass*)                                \
 350   nonstatic_field(Klass,                       _secondary_supers,                             Array&lt;Klass*&gt;*)                        \
 351   nonstatic_field(Klass,                       _primary_supers[0],                            Klass*)                                \
 352   nonstatic_field(Klass,                       _java_mirror,                                  oop)                                   \
 353   nonstatic_field(Klass,                       _modifier_flags,                               jint)                                  \
 354   nonstatic_field(Klass,                       _super,                                        Klass*)                                \
 355   nonstatic_field(Klass,                       _subklass,                                     Klass*)                                \
 356   nonstatic_field(Klass,                       _layout_helper,                                jint)                                  \
 357   nonstatic_field(Klass,                       _name,                                         Symbol*)                               \
 358   nonstatic_field(Klass,                       _access_flags,                                 AccessFlags)                           \
 359   nonstatic_field(Klass,                       _prototype_header,                             markOop)                               \
 360   nonstatic_field(Klass,                       _next_sibling,                                 Klass*)                                \
 361   nonstatic_field(vtableEntry,                 _method,                                       Method*)                               \
 362   nonstatic_field(MethodData,                  _size,                                         int)                                   \
 363   nonstatic_field(MethodData,                  _method,                                       Method*)                               \
 364   nonstatic_field(MethodData,                  _data_size,                                    int)                                   \
 365   nonstatic_field(MethodData,                  _data[0],                                      intptr_t)                              \
 366   nonstatic_field(MethodData,                  _parameters_type_data_di,                      int)                                   \
 367   nonstatic_field(MethodData,                  _nof_decompiles,                               uint)                                  \
 368   nonstatic_field(MethodData,                  _nof_overflow_recompiles,                      uint)                                  \
 369   nonstatic_field(MethodData,                  _nof_overflow_traps,                           uint)                                  \
 370   nonstatic_field(MethodData,                  _trap_hist._array[0],                          u1)                                    \
 371   nonstatic_field(MethodData,                  _eflags,                                       intx)                                  \
 372   nonstatic_field(MethodData,                  _arg_local,                                    intx)                                  \
 373   nonstatic_field(MethodData,                  _arg_stack,                                    intx)                                  \
 374   nonstatic_field(MethodData,                  _arg_returned,                                 intx)                                  \
 375   nonstatic_field(MethodData,                  _tenure_traps,                                 uint)                                  \
 376   nonstatic_field(MethodData,                  _invoke_mask,                                  int)                                   \
 377   nonstatic_field(MethodData,                  _backedge_mask,                                int)                                   \
 378   nonstatic_field(DataLayout,                  _header._struct._tag,                          u1)                                    \
 379   nonstatic_field(DataLayout,                  _header._struct._flags,                        u1)                                    \
 380   nonstatic_field(DataLayout,                  _header._struct._bci,                          u2)                                    \
 381   nonstatic_field(DataLayout,                  _cells[0],                                     intptr_t)                              \
 382   nonstatic_field(MethodCounters,              _nmethod_age,                                  int)                                   \
 383   nonstatic_field(MethodCounters,              _interpreter_invocation_limit,                 int)                                   \
 384   nonstatic_field(MethodCounters,              _interpreter_backward_branch_limit,            int)                                   \
 385   nonstatic_field(MethodCounters,              _interpreter_profile_limit,                    int)                                   \
 386   nonstatic_field(MethodCounters,              _invoke_mask,                                  int)                                   \
 387   nonstatic_field(MethodCounters,              _backedge_mask,                                int)                                   \
 388   nonstatic_field(MethodCounters,              _interpreter_invocation_count,                 int)                                   \
 389   nonstatic_field(MethodCounters,              _interpreter_throwout_count,                   u2)                                    \
 390   nonstatic_field(MethodCounters,              _number_of_breakpoints,                        u2)                                    \
 391   nonstatic_field(MethodCounters,              _invocation_counter,                           InvocationCounter)                     \
 392   nonstatic_field(MethodCounters,              _backedge_counter,                             InvocationCounter)                     \
 393   nonstatic_field(Method,                      _constMethod,                                  ConstMethod*)                          \
 394   nonstatic_field(Method,                      _method_data,                                  MethodData*)                           \
 395   nonstatic_field(Method,                      _method_counters,                              MethodCounters*)                       \
 396   nonstatic_field(Method,                      _access_flags,                                 AccessFlags)                           \
 397   nonstatic_field(Method,                      _vtable_index,                                 int)                                   \
 398   nonstatic_field(Method,                      _intrinsic_id,                                 u2)                                    \
 399   nonstatic_field(Method,                      _flags,                                        u1)                                    \
 400   nonproduct_nonstatic_field(Method,           _compiled_invocation_count,                    int)                                   \
 401   volatile_nonstatic_field(Method,             _code,                                         nmethod*)                              \
 402   nonstatic_field(Method,                      _i2i_entry,                                    address)                               \
 403   nonstatic_field(Method,                      _adapter,                                      AdapterHandlerEntry*)                  \
 404   volatile_nonstatic_field(Method,             _from_compiled_entry,                          address)                               \
 405   volatile_nonstatic_field(Method,             _from_interpreted_entry,                       address)                               \
 406   volatile_nonstatic_field(ConstMethod,        _fingerprint,                                  uint64_t)                              \
 407   nonstatic_field(ConstMethod,                 _constants,                                    ConstantPool*)                         \
 408   nonstatic_field(ConstMethod,                 _stackmap_data,                                Array&lt;u1&gt;*)                            \
 409   nonstatic_field(ConstMethod,                 _constMethod_size,                             int)                                   \
 410   nonstatic_field(ConstMethod,                 _flags,                                        u2)                                    \
 411   nonstatic_field(ConstMethod,                 _code_size,                                    u2)                                    \
 412   nonstatic_field(ConstMethod,                 _name_index,                                   u2)                                    \
 413   nonstatic_field(ConstMethod,                 _signature_index,                              u2)                                    \
 414   nonstatic_field(ConstMethod,                 _method_idnum,                                 u2)                                    \
 415   nonstatic_field(ConstMethod,                 _max_stack,                                    u2)                                    \
 416   nonstatic_field(ConstMethod,                 _max_locals,                                   u2)                                    \
 417   nonstatic_field(ConstMethod,                 _size_of_parameters,                           u2)                                    \
 418   nonstatic_field(ObjArrayKlass,               _element_klass,                                Klass*)                                \
 419   nonstatic_field(ObjArrayKlass,               _bottom_klass,                                 Klass*)                                \
 420   volatile_nonstatic_field(Symbol,             _refcount,                                     short)                                 \
 421   nonstatic_field(Symbol,                      _identity_hash,                                short)                                 \
 422   nonstatic_field(Symbol,                      _length,                                       unsigned short)                        \
 423   unchecked_nonstatic_field(Symbol,            _body,                                         sizeof(jbyte)) /* NOTE: no type */     \
 424   nonstatic_field(Symbol,                      _body[0],                                      jbyte)                                 \
 425   nonstatic_field(TypeArrayKlass,              _max_length,                                   int)                                   \
 426                                                                                                                                      \
 427   /***********************/                                                                                                          \
 428   /* Constant Pool Cache */                                                                                                          \
 429   /***********************/                                                                                                          \
 430                                                                                                                                      \
 431   volatile_nonstatic_field(ConstantPoolCacheEntry,      _indices,                             intx)                                  \
 432   nonstatic_field(ConstantPoolCacheEntry,               _f1,                                  volatile Metadata*)                    \
 433   volatile_nonstatic_field(ConstantPoolCacheEntry,      _f2,                                  intx)                                  \
 434   volatile_nonstatic_field(ConstantPoolCacheEntry,      _flags,                               intx)                                  \
 435                                                                                                                                      \
 436   /********************************/                                                                                                 \
 437   /* MethodOop-related structures */                                                                                                 \
 438   /********************************/                                                                                                 \
 439                                                                                                                                      \
 440   nonstatic_field(CheckedExceptionElement,     class_cp_index,                                u2)                                    \
 441   nonstatic_field(LocalVariableTableElement,   start_bci,                                     u2)                                    \
 442   nonstatic_field(LocalVariableTableElement,   length,                                        u2)                                    \
 443   nonstatic_field(LocalVariableTableElement,   name_cp_index,                                 u2)                                    \
 444   nonstatic_field(LocalVariableTableElement,   descriptor_cp_index,                           u2)                                    \
 445   nonstatic_field(LocalVariableTableElement,   signature_cp_index,                            u2)                                    \
 446   nonstatic_field(LocalVariableTableElement,   slot,                                          u2)                                    \
 447   nonstatic_field(ExceptionTableElement,       start_pc,                                      u2)                                    \
 448   nonstatic_field(ExceptionTableElement,       end_pc,                                        u2)                                    \
 449   nonstatic_field(ExceptionTableElement,       handler_pc,                                    u2)                                    \
 450   nonstatic_field(ExceptionTableElement,       catch_type_index,                              u2)                                    \
 451   nonstatic_field(BreakpointInfo,              _orig_bytecode,                                Bytecodes::Code)                       \
 452   nonstatic_field(BreakpointInfo,              _bci,                                          int)                                   \
 453   nonstatic_field(BreakpointInfo,              _name_index,                                   u2)                                    \
 454   nonstatic_field(BreakpointInfo,              _signature_index,                              u2)                                    \
 455   nonstatic_field(BreakpointInfo,              _next,                                         BreakpointInfo*)                       \
 456   /***********/                                                                                                                      \
 457   /* JNI IDs */                                                                                                                      \
 458   /***********/                                                                                                                      \
 459                                                                                                                                      \
 460   nonstatic_field(JNIid,                       _holder,                                       Klass*)                                \
 461   nonstatic_field(JNIid,                       _next,                                         JNIid*)                                \
 462   nonstatic_field(JNIid,                       _offset,                                       int)                                   \
 463   /************/                                                                                                                     \
 464   /* Universe */                                                                                                                     \
 465   /************/                                                                                                                     \
 466                                                                                                                                      \
 467      static_field(Universe,                    _boolArrayKlassObj,                            Klass*)                                \
 468      static_field(Universe,                    _byteArrayKlassObj,                            Klass*)                                \
 469      static_field(Universe,                    _charArrayKlassObj,                            Klass*)                                \
 470      static_field(Universe,                    _intArrayKlassObj,                             Klass*)                                \
 471      static_field(Universe,                    _shortArrayKlassObj,                           Klass*)                                \
 472      static_field(Universe,                    _longArrayKlassObj,                            Klass*)                                \
 473      static_field(Universe,                    _singleArrayKlassObj,                          Klass*)                                \
 474      static_field(Universe,                    _doubleArrayKlassObj,                          Klass*)                                \
 475      static_field(Universe,                    _mirrors[0],                                   oop)                                   \
 476      static_field(Universe,                    _main_thread_group,                            oop)                                   \
 477      static_field(Universe,                    _system_thread_group,                          oop)                                   \
 478      static_field(Universe,                    _the_empty_class_klass_array,                  objArrayOop)                           \
 479      static_field(Universe,                    _null_ptr_exception_instance,                  oop)                                   \
 480      static_field(Universe,                    _arithmetic_exception_instance,                oop)                                   \
 481      static_field(Universe,                    _vm_exception,                                 oop)                                   \
 482      static_field(Universe,                    _collectedHeap,                                CollectedHeap*)                        \
 483      static_field(Universe,                    _base_vtable_size,                             int)                                   \
 484      static_field(Universe,                    _bootstrapping,                                bool)                                  \
 485      static_field(Universe,                    _fully_initialized,                            bool)                                  \
 486      static_field(Universe,                    _verify_count,                                 int)                                   \
 487      static_field(Universe,                    _verify_oop_mask,                              uintptr_t)                             \
 488      static_field(Universe,                    _verify_oop_bits,                              uintptr_t)                             \
 489      static_field(Universe,                    _non_oop_bits,                                 intptr_t)                              \
 490      static_field(Universe,                    _narrow_oop._base,                             address)                               \
 491      static_field(Universe,                    _narrow_oop._shift,                            int)                                   \
 492      static_field(Universe,                    _narrow_oop._use_implicit_null_checks,         bool)                                  \
 493      static_field(Universe,                    _narrow_klass._base,                           address)                               \
 494      static_field(Universe,                    _narrow_klass._shift,                          int)                                   \
 495                                                                                                                                      \
 496   /******/                                                                                                                           \
 497   /* os */                                                                                                                           \
 498   /******/                                                                                                                           \
 499                                                                                                                                      \
 500      static_field(os,                          _polling_page,                                 address)                               \
 501                                                                                                                                      \
 502   /**********************************************************************************/                                               \
 503   /* Generation and Space hierarchies                                               */                                               \
 504   /**********************************************************************************/                                               \
 505                                                                                                                                      \
 506   unchecked_nonstatic_field(ageTable,          sizes,                                         sizeof(ageTable::sizes))               \
 507                                                                                                                                      \
 508   nonstatic_field(BarrierSet,                  _fake_rtti,                                    BarrierSet::FakeRtti)                  \
 509                                                                                                                                      \
 510   nonstatic_field(BarrierSet::FakeRtti,        _concrete_tag,                                 BarrierSet::Name)                      \
 511                                                                                                                                      \
 512   nonstatic_field(BlockOffsetTable,            _bottom,                                       HeapWord*)                             \
 513   nonstatic_field(BlockOffsetTable,            _end,                                          HeapWord*)                             \
 514                                                                                                                                      \
 515   nonstatic_field(BlockOffsetSharedArray,      _reserved,                                     MemRegion)                             \
 516   nonstatic_field(BlockOffsetSharedArray,      _end,                                          HeapWord*)                             \
 517   nonstatic_field(BlockOffsetSharedArray,      _vs,                                           VirtualSpace)                          \
 518   nonstatic_field(BlockOffsetSharedArray,      _offset_array,                                 u_char*)                               \
 519                                                                                                                                      \
 520   nonstatic_field(BlockOffsetArray,            _array,                                        BlockOffsetSharedArray*)               \
 521   nonstatic_field(BlockOffsetArray,            _sp,                                           Space*)                                \
 522   nonstatic_field(BlockOffsetArrayContigSpace, _next_offset_threshold,                        HeapWord*)                             \
 523   nonstatic_field(BlockOffsetArrayContigSpace, _next_offset_index,                            size_t)                                \
 524                                                                                                                                      \
 525   nonstatic_field(BlockOffsetArrayNonContigSpace, _unallocated_block,                         HeapWord*)                             \
 526                                                                                                                                      \
 527   nonstatic_field(CardGeneration,              _rs,                                           CardTableRS*)                          \
 528   nonstatic_field(CardGeneration,              _bts,                                          BlockOffsetSharedArray*)               \
 529   nonstatic_field(CardGeneration,              _shrink_factor,                                size_t)                                \
 530   nonstatic_field(CardGeneration,              _capacity_at_prologue,                         size_t)                                \
 531   nonstatic_field(CardGeneration,              _used_at_prologue,                             size_t)                                \
 532                                                                                                                                      \
 533   nonstatic_field(CardTableModRefBS,           _whole_heap,                                   const MemRegion)                       \
 534   nonstatic_field(CardTableModRefBS,           _guard_index,                                  const size_t)                          \
 535   nonstatic_field(CardTableModRefBS,           _last_valid_index,                             const size_t)                          \
 536   nonstatic_field(CardTableModRefBS,           _page_size,                                    const size_t)                          \
 537   nonstatic_field(CardTableModRefBS,           _byte_map_size,                                const size_t)                          \
 538   nonstatic_field(CardTableModRefBS,           _byte_map,                                     jbyte*)                                \
 539   nonstatic_field(CardTableModRefBS,           _cur_covered_regions,                          int)                                   \
 540   nonstatic_field(CardTableModRefBS,           _covered,                                      MemRegion*)                            \
 541   nonstatic_field(CardTableModRefBS,           _committed,                                    MemRegion*)                            \
 542   nonstatic_field(CardTableModRefBS,           _guard_region,                                 MemRegion)                             \
 543   nonstatic_field(CardTableModRefBS,           byte_map_base,                                 jbyte*)                                \
 544                                                                                                                                      \
 545   nonstatic_field(CardTableRS,                 _ct_bs,                                        CardTableModRefBSForCTRS*)             \
 546                                                                                                                                      \
 547   nonstatic_field(CollectedHeap,               _reserved,                                     MemRegion)                             \
 548   nonstatic_field(CollectedHeap,               _barrier_set,                                  BarrierSet*)                           \
 549   nonstatic_field(CollectedHeap,               _defer_initial_card_mark,                      bool)                                  \
 550   nonstatic_field(CollectedHeap,               _is_gc_active,                                 bool)                                  \
 551   nonstatic_field(CollectedHeap,               _total_collections,                            unsigned int)                          \
 552                                                                                                                                      \
 553   nonstatic_field(CompactibleSpace,            _compaction_top,                               HeapWord*)                             \
 554   nonstatic_field(CompactibleSpace,            _first_dead,                                   HeapWord*)                             \
 555   nonstatic_field(CompactibleSpace,            _end_of_live,                                  HeapWord*)                             \
 556                                                                                                                                      \
 557   nonstatic_field(ContiguousSpace,             _top,                                          HeapWord*)                             \
 558   nonstatic_field(ContiguousSpace,             _concurrent_iteration_safe_limit,              HeapWord*)                             \
 559   nonstatic_field(ContiguousSpace,             _saved_mark_word,                              HeapWord*)                             \
 560                                                                                                                                      \
 561   nonstatic_field(DefNewGeneration,            _old_gen,                                      Generation*)                           \
 562   nonstatic_field(DefNewGeneration,            _tenuring_threshold,                           uint)                                  \
 563   nonstatic_field(DefNewGeneration,            _age_table,                                    ageTable)                              \
 564   nonstatic_field(DefNewGeneration,            _eden_space,                                   ContiguousSpace*)                      \
 565   nonstatic_field(DefNewGeneration,            _from_space,                                   ContiguousSpace*)                      \
 566   nonstatic_field(DefNewGeneration,            _to_space,                                     ContiguousSpace*)                      \
 567                                                                                                                                      \
 568   nonstatic_field(Generation,                  _reserved,                                     MemRegion)                             \
 569   nonstatic_field(Generation,                  _virtual_space,                                VirtualSpace)                          \
 570   nonstatic_field(Generation,                  _stat_record,                                  Generation::StatRecord)                \
 571                                                                                                                                      \
 572   nonstatic_field(Generation::StatRecord,      invocations,                                   int)                                   \
 573   nonstatic_field(Generation::StatRecord,      accumulated_time,                              elapsedTimer)                          \
 574                                                                                                                                      \
 575   nonstatic_field(GenerationSpec,              _name,                                         Generation::Name)                      \
 576   nonstatic_field(GenerationSpec,              _init_size,                                    size_t)                                \
 577   nonstatic_field(GenerationSpec,              _max_size,                                     size_t)                                \
 578                                                                                                                                      \
 579   nonstatic_field(GenCollectedHeap,            _young_gen,                                    Generation*)                           \
 580   nonstatic_field(GenCollectedHeap,            _old_gen,                                      Generation*)                           \
 581                                                                                                                                      \
 582   nonstatic_field(GenCollectorPolicy,          _young_gen_spec,                               GenerationSpec*)                       \
 583   nonstatic_field(GenCollectorPolicy,          _old_gen_spec,                                 GenerationSpec*)                       \
 584                                                                                                                                      \
 585   nonstatic_field(HeapWord,                    i,                                             char*)                                 \
 586                                                                                                                                      \
 587   nonstatic_field(MemRegion,                   _start,                                        HeapWord*)                             \
 588   nonstatic_field(MemRegion,                   _word_size,                                    size_t)                                \
 589                                                                                                                                      \
 590   nonstatic_field(OffsetTableContigSpace,      _offsets,                                      BlockOffsetArray)                      \
 591                                                                                                                                      \
 592   nonstatic_field(TenuredGeneration,           _min_heap_delta_bytes,                         size_t)                                \
 593   nonstatic_field(TenuredGeneration,           _the_space,                                    ContiguousSpace*)                      \
 594                                                                                                                                      \
 595   nonstatic_field(Space,                       _bottom,                                       HeapWord*)                             \
 596   nonstatic_field(Space,                       _end,                                          HeapWord*)                             \
 597                                                                                                                                      \
 598   nonstatic_field(ThreadLocalAllocBuffer,      _start,                                        HeapWord*)                             \
 599   nonstatic_field(ThreadLocalAllocBuffer,      _top,                                          HeapWord*)                             \
 600   nonstatic_field(ThreadLocalAllocBuffer,      _end,                                          HeapWord*)                             \
 601   nonstatic_field(ThreadLocalAllocBuffer,      _pf_top,                                       HeapWord*)                             \
 602   nonstatic_field(ThreadLocalAllocBuffer,      _desired_size,                                 size_t)                                \
 603   nonstatic_field(ThreadLocalAllocBuffer,      _refill_waste_limit,                           size_t)                                \
 604      static_field(ThreadLocalAllocBuffer,      _target_refills,                               unsigned)                              \
 605   nonstatic_field(ThreadLocalAllocBuffer,      _number_of_refills,                            unsigned)                              \
 606   nonstatic_field(ThreadLocalAllocBuffer,      _fast_refill_waste,                            unsigned)                              \
 607   nonstatic_field(ThreadLocalAllocBuffer,      _slow_refill_waste,                            unsigned)                              \
 608   nonstatic_field(ThreadLocalAllocBuffer,      _gc_waste,                                     unsigned)                              \
 609   nonstatic_field(ThreadLocalAllocBuffer,      _slow_allocations,                             unsigned)                              \
 610   nonstatic_field(VirtualSpace,                _low_boundary,                                 char*)                                 \
 611   nonstatic_field(VirtualSpace,                _high_boundary,                                char*)                                 \
 612   nonstatic_field(VirtualSpace,                _low,                                          char*)                                 \
 613   nonstatic_field(VirtualSpace,                _high,                                         char*)                                 \
 614   nonstatic_field(VirtualSpace,                _lower_high,                                   char*)                                 \
 615   nonstatic_field(VirtualSpace,                _middle_high,                                  char*)                                 \
 616   nonstatic_field(VirtualSpace,                _upper_high,                                   char*)                                 \
 617                                                                                                                                      \
 618   /************************/                                                                                                         \
 619   /* PerfMemory - jvmstat */                                                                                                         \
 620   /************************/                                                                                                         \
 621                                                                                                                                      \
 622   nonstatic_field(PerfDataPrologue,            magic,                                         jint)                                  \
 623   nonstatic_field(PerfDataPrologue,            byte_order,                                    jbyte)                                 \
 624   nonstatic_field(PerfDataPrologue,            major_version,                                 jbyte)                                 \
 625   nonstatic_field(PerfDataPrologue,            minor_version,                                 jbyte)                                 \
 626   nonstatic_field(PerfDataPrologue,            accessible,                                    jbyte)                                 \
 627   nonstatic_field(PerfDataPrologue,            used,                                          jint)                                  \
 628   nonstatic_field(PerfDataPrologue,            overflow,                                      jint)                                  \
 629   nonstatic_field(PerfDataPrologue,            mod_time_stamp,                                jlong)                                 \
 630   nonstatic_field(PerfDataPrologue,            entry_offset,                                  jint)                                  \
 631   nonstatic_field(PerfDataPrologue,            num_entries,                                   jint)                                  \
 632                                                                                                                                      \
 633   nonstatic_field(PerfDataEntry,               entry_length,                                  jint)                                  \
 634   nonstatic_field(PerfDataEntry,               name_offset,                                   jint)                                  \
 635   nonstatic_field(PerfDataEntry,               vector_length,                                 jint)                                  \
 636   nonstatic_field(PerfDataEntry,               data_type,                                     jbyte)                                 \
 637   nonstatic_field(PerfDataEntry,               flags,                                         jbyte)                                 \
 638   nonstatic_field(PerfDataEntry,               data_units,                                    jbyte)                                 \
 639   nonstatic_field(PerfDataEntry,               data_variability,                              jbyte)                                 \
 640   nonstatic_field(PerfDataEntry,               data_offset,                                   jint)                                  \
 641                                                                                                                                      \
 642      static_field(PerfMemory,                  _start,                                        char*)                                 \
 643      static_field(PerfMemory,                  _end,                                          char*)                                 \
 644      static_field(PerfMemory,                  _top,                                          char*)                                 \
 645      static_field(PerfMemory,                  _capacity,                                     size_t)                                \
 646      static_field(PerfMemory,                  _prologue,                                     PerfDataPrologue*)                     \
 647      static_field(PerfMemory,                  _initialized,                                  jint)                                  \
 648                                                                                                                                      \
 649   /***************/                                                                                                                  \
 650   /* SymbolTable */                                                                                                                  \
 651   /***************/                                                                                                                  \
 652                                                                                                                                      \
 653      static_field(SymbolTable,                 _the_table,                                    SymbolTable*)                          \
 654      static_field(SymbolTable,                 _shared_table,                                 SymbolCompactHashTable)                \
 655                                                                                                                                      \
 656   /***************/                                                                                                                  \
 657   /* StringTable */                                                                                                                  \
 658   /***************/                                                                                                                  \
 659                                                                                                                                      \
 660      static_field(StringTable,                 _the_table,                                    StringTable*)                          \
 661                                                                                                                                      \
 662   /********************/                                                                                                             \
 663   /* CompactHashTable */                                                                                                             \
 664   /********************/                                                                                                             \
 665                                                                                                                                      \
 666   nonstatic_field(SymbolCompactHashTable,      _base_address,                                 uintx)                                 \
 667   nonstatic_field(SymbolCompactHashTable,      _entry_count,                                  juint)                                 \
 668   nonstatic_field(SymbolCompactHashTable,      _bucket_count,                                 juint)                                 \
 669   nonstatic_field(SymbolCompactHashTable,      _table_end_offset,                             juint)                                 \
 670   nonstatic_field(SymbolCompactHashTable,      _buckets,                                      juint*)                                \
 671                                                                                                                                      \
 672   /********************/                                                                                                             \
 673   /* SystemDictionary */                                                                                                             \
 674   /********************/                                                                                                             \
 675                                                                                                                                      \
 676      static_field(SystemDictionary,            _dictionary,                                   Dictionary*)                           \
 677      static_field(SystemDictionary,            _placeholders,                                 PlaceholderTable*)                     \
 678      static_field(SystemDictionary,            _shared_dictionary,                            Dictionary*)                           \
 679      static_field(SystemDictionary,            _system_loader_lock_obj,                       oop)                                   \
 680      static_field(SystemDictionary,            _loader_constraints,                           LoaderConstraintTable*)                \
 681      static_field(SystemDictionary,            WK_KLASS(Object_klass),                        InstanceKlass*)                        \
 682      static_field(SystemDictionary,            WK_KLASS(String_klass),                        InstanceKlass*)                        \
 683      static_field(SystemDictionary,            WK_KLASS(Class_klass),                         InstanceKlass*)                        \
 684      static_field(SystemDictionary,            WK_KLASS(Cloneable_klass),                     InstanceKlass*)                        \
 685      static_field(SystemDictionary,            WK_KLASS(ClassLoader_klass),                   InstanceKlass*)                        \
 686      static_field(SystemDictionary,            WK_KLASS(Serializable_klass),                  InstanceKlass*)                        \
 687      static_field(SystemDictionary,            WK_KLASS(System_klass),                        InstanceKlass*)                        \
 688      static_field(SystemDictionary,            WK_KLASS(Throwable_klass),                     InstanceKlass*)                        \
 689      static_field(SystemDictionary,            WK_KLASS(ThreadDeath_klass),                   InstanceKlass*)                        \
 690      static_field(SystemDictionary,            WK_KLASS(Error_klass),                         InstanceKlass*)                        \
 691      static_field(SystemDictionary,            WK_KLASS(Exception_klass),                     InstanceKlass*)                        \
 692      static_field(SystemDictionary,            WK_KLASS(RuntimeException_klass),              InstanceKlass*)                        \
 693      static_field(SystemDictionary,            WK_KLASS(ClassNotFoundException_klass),        InstanceKlass*)                        \
 694      static_field(SystemDictionary,            WK_KLASS(NoClassDefFoundError_klass),          InstanceKlass*)                        \
 695      static_field(SystemDictionary,            WK_KLASS(LinkageError_klass),                  InstanceKlass*)                        \
 696      static_field(SystemDictionary,            WK_KLASS(ClassCastException_klass),            InstanceKlass*)                        \
 697      static_field(SystemDictionary,            WK_KLASS(ArrayStoreException_klass),           InstanceKlass*)                        \
 698      static_field(SystemDictionary,            WK_KLASS(VirtualMachineError_klass),           InstanceKlass*)                        \
 699      static_field(SystemDictionary,            WK_KLASS(OutOfMemoryError_klass),              InstanceKlass*)                        \
 700      static_field(SystemDictionary,            WK_KLASS(StackOverflowError_klass),            InstanceKlass*)                        \
 701      static_field(SystemDictionary,            WK_KLASS(ProtectionDomain_klass),              InstanceKlass*)                        \
 702      static_field(SystemDictionary,            WK_KLASS(AccessControlContext_klass),          InstanceKlass*)                        \
 703      static_field(SystemDictionary,            WK_KLASS(SecureClassLoader_klass),             InstanceKlass*)                        \
 704      static_field(SystemDictionary,            WK_KLASS(Reference_klass),                     InstanceKlass*)                        \
 705      static_field(SystemDictionary,            WK_KLASS(SoftReference_klass),                 InstanceKlass*)                        \
 706      static_field(SystemDictionary,            WK_KLASS(WeakReference_klass),                 InstanceKlass*)                        \
 707      static_field(SystemDictionary,            WK_KLASS(FinalReference_klass),                InstanceKlass*)                        \
 708      static_field(SystemDictionary,            WK_KLASS(PhantomReference_klass),              InstanceKlass*)                        \
 709      static_field(SystemDictionary,            WK_KLASS(Cleaner_klass),                       InstanceKlass*)                        \
 710      static_field(SystemDictionary,            WK_KLASS(Finalizer_klass),                     InstanceKlass*)                        \
 711      static_field(SystemDictionary,            WK_KLASS(Thread_klass),                        InstanceKlass*)                        \
 712      static_field(SystemDictionary,            WK_KLASS(ThreadGroup_klass),                   InstanceKlass*)                        \
 713      static_field(SystemDictionary,            WK_KLASS(Properties_klass),                    InstanceKlass*)                        \
 714      static_field(SystemDictionary,            WK_KLASS(StringBuffer_klass),                  InstanceKlass*)                        \
 715      static_field(SystemDictionary,            WK_KLASS(MethodHandle_klass),                  InstanceKlass*)                        \
 716      static_field(SystemDictionary,            _box_klasses[0],                               InstanceKlass*)                        \
 717      static_field(SystemDictionary,            _java_system_loader,                           oop)                                   \
 718                                                                                                                                      \
 719   /*************/                                                                                                                    \
 720   /* vmSymbols */                                                                                                                    \
 721   /*************/                                                                                                                    \
 722                                                                                                                                      \
 723      static_field(vmSymbols,                   _symbols[0],                                   Symbol*)                               \
 724                                                                                                                                      \
 725   /*******************/                                                                                                              \
 726   /* HashtableBucket */                                                                                                              \
 727   /*******************/                                                                                                              \
 728                                                                                                                                      \
 729   nonstatic_field(HashtableBucket&lt;mtInternal&gt;, _entry,                                        BasicHashtableEntry&lt;mtInternal&gt;*)      \
 730                                                                                                                                      \
 731   /******************/                                                                                                               \
 732   /* HashtableEntry */                                                                                                               \
 733   /******************/                                                                                                               \
 734                                                                                                                                      \
 735   nonstatic_field(BasicHashtableEntry&lt;mtInternal&gt;, _next,                                     BasicHashtableEntry&lt;mtInternal&gt;*)      \
 736   nonstatic_field(BasicHashtableEntry&lt;mtInternal&gt;, _hash,                                     unsigned int)                          \
 737   nonstatic_field(IntptrHashtableEntry,            _literal,                                  intptr_t)                              \
 738                                                                                                                                      \
 739   /*************/                                                                                                                    \
 740   /* Hashtable */                                                                                                                    \
 741   /*************/                                                                                                                    \
 742                                                                                                                                      \
 743   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _table_size,                                   int)                                   \
 744   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _buckets,                                      HashtableBucket&lt;mtInternal&gt;*)          \
 745   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _free_list,                                    BasicHashtableEntry&lt;mtInternal&gt;*)      \
 746   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _first_free_entry,                             char*)                                 \
 747   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _end_block,                                    char*)                                 \
 748   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _entry_size,                                   int)                                   \
 749                                                                                                                                      \
 750   /*******************/                                                                                                              \
 751   /* DictionaryEntry */                                                                                                              \
 752   /*******************/                                                                                                              \
 753                                                                                                                                      \
 754   nonstatic_field(DictionaryEntry,             _loader_data,                                  ClassLoaderData*)                      \
 755   nonstatic_field(DictionaryEntry,             _pd_set,                                       ProtectionDomainEntry*)                \
 756                                                                                                                                      \
 757   /********************/                                                                                                             \
 758                                                                                                                                      \
 759   nonstatic_field(PlaceholderEntry,            _loader_data,                                  ClassLoaderData*)                      \
 760                                                                                                                                      \
 761   /**************************/                                                                                                       \
 762   /* ProtectionDomainEntry  */                                                                                                       \
 763   /**************************/                                                                                                       \
 764                                                                                                                                      \
 765   nonstatic_field(ProtectionDomainEntry,       _next,                                         ProtectionDomainEntry*)                \
 766   nonstatic_field(ProtectionDomainEntry,       _pd_cache,                                     ProtectionDomainCacheEntry*)           \
 767                                                                                                                                      \
 768   /*******************************/                                                                                                  \
 769   /* ProtectionDomainCacheEntry  */                                                                                                  \
 770   /*******************************/                                                                                                  \
 771                                                                                                                                      \
 772   nonstatic_field(ProtectionDomainCacheEntry,  _literal,                                      oop)                                   \
 773                                                                                                                                      \
 774   /*************************/                                                                                                        \
 775   /* LoaderConstraintEntry */                                                                                                        \
 776   /*************************/                                                                                                        \
 777                                                                                                                                      \
 778   nonstatic_field(LoaderConstraintEntry,       _name,                                         Symbol*)                               \
 779   nonstatic_field(LoaderConstraintEntry,       _num_loaders,                                  int)                                   \
 780   nonstatic_field(LoaderConstraintEntry,       _max_loaders,                                  int)                                   \
 781   nonstatic_field(LoaderConstraintEntry,       _loaders,                                      ClassLoaderData**)                     \
 782                                                                                                                                      \
 783   nonstatic_field(ClassLoaderData,             _class_loader,                                 oop)                                   \
 784   nonstatic_field(ClassLoaderData,             _next,                                         ClassLoaderData*)                      \
 785                                                                                                                                      \
 786      static_field(ClassLoaderDataGraph,        _head,                                         ClassLoaderData*)                      \
 787                                                                                                                                      \
 788   /**********/                                                                                                                       \
 789   /* Arrays */                                                                                                                       \
 790   /**********/                                                                                                                       \
 791                                                                                                                                      \
 792   nonstatic_field(Array&lt;Klass*&gt;,               _length,                                       int)                                   \
 793   nonstatic_field(Array&lt;Klass*&gt;,               _data[0],                                      Klass*)                                \
 794                                                                                                                                      \
 795   /*******************/                                                                                                              \
 796   /* GrowableArrays  */                                                                                                              \
 797   /*******************/                                                                                                              \
 798                                                                                                                                      \
 799   nonstatic_field(GenericGrowableArray,        _len,                                          int)                                   \
 800   nonstatic_field(GenericGrowableArray,        _max,                                          int)                                   \
 801   nonstatic_field(GenericGrowableArray,        _arena,                                        Arena*)                                \
 802   nonstatic_field(GrowableArray&lt;int&gt;,          _data,                                         int*)                                  \
 803                                                                                                                                      \
 804   /********************************/                                                                                                 \
 805   /* CodeCache (NOTE: incomplete) */                                                                                                 \
 806   /********************************/                                                                                                 \
 807                                                                                                                                      \
 808      static_field(CodeCache,                   _heaps,                                        GrowableArray&lt;CodeHeap*&gt;*)             \
 809      static_field(CodeCache,                   _low_bound,                                    address)                               \
 810      static_field(CodeCache,                   _high_bound,                                   address)                               \
 811      static_field(CodeCache,                   _scavenge_root_nmethods,                       nmethod*)                              \
 812                                                                                                                                      \
 813   /*******************************/                                                                                                  \
 814   /* CodeHeap (NOTE: incomplete) */                                                                                                  \
 815   /*******************************/                                                                                                  \
 816                                                                                                                                      \
 817   nonstatic_field(CodeHeap,                    _memory,                                       VirtualSpace)                          \
 818   nonstatic_field(CodeHeap,                    _segmap,                                       VirtualSpace)                          \
 819   nonstatic_field(CodeHeap,                    _log2_segment_size,                            int)                                   \
 820   nonstatic_field(HeapBlock,                   _header,                                       HeapBlock::Header)                     \
 821   nonstatic_field(HeapBlock::Header,           _length,                                       size_t)                                \
 822   nonstatic_field(HeapBlock::Header,           _used,                                         bool)                                  \
 823                                                                                                                                      \
 824   /**********************************/                                                                                               \
 825   /* Interpreter (NOTE: incomplete) */                                                                                               \
 826   /**********************************/                                                                                               \
 827                                                                                                                                      \
 828      static_field(AbstractInterpreter,         _code,                                         StubQueue*)                            \
 829                                                                                                                                      \
 830   /****************************/                                                                                                     \
 831   /* Stubs (NOTE: incomplete) */                                                                                                     \
 832   /****************************/                                                                                                     \
 833                                                                                                                                      \
 834   nonstatic_field(StubQueue,                   _stub_buffer,                                  address)                               \
 835   nonstatic_field(StubQueue,                   _buffer_limit,                                 int)                                   \
 836   nonstatic_field(StubQueue,                   _queue_begin,                                  int)                                   \
 837   nonstatic_field(StubQueue,                   _queue_end,                                    int)                                   \
 838   nonstatic_field(StubQueue,                   _number_of_stubs,                              int)                                   \
 839   nonstatic_field(InterpreterCodelet,          _size,                                         int)                                   \
 840   nonstatic_field(InterpreterCodelet,          _description,                                  const char*)                           \
 841   nonstatic_field(InterpreterCodelet,          _bytecode,                                     Bytecodes::Code)                       \
 842                                                                                                                                      \
 843   /***********************************/                                                                                              \
 844   /* StubRoutines (NOTE: incomplete) */                                                                                              \
 845   /***********************************/                                                                                              \
 846                                                                                                                                      \
 847      static_field(StubRoutines,                _verify_oop_count,                             jint)                                  \
 848      static_field(StubRoutines,                _call_stub_return_address,                     address)                               \
 849      static_field(StubRoutines,                _aescrypt_encryptBlock,                        address)                               \
 850      static_field(StubRoutines,                _aescrypt_decryptBlock,                        address)                               \
 851      static_field(StubRoutines,                _cipherBlockChaining_encryptAESCrypt,          address)                               \
 852      static_field(StubRoutines,                _cipherBlockChaining_decryptAESCrypt,          address)                               \
 853      static_field(StubRoutines,                _ghash_processBlocks,                          address)                               \
 854      static_field(StubRoutines,                _updateBytesCRC32,                             address)                               \
 855      static_field(StubRoutines,                _crc_table_adr,                                address)                               \
 856      static_field(StubRoutines,                _crc32c_table_addr,                            address)                               \
 857      static_field(StubRoutines,                _updateBytesCRC32C,                            address)                               \
 858      static_field(StubRoutines,                _multiplyToLen,                                address)                               \
 859      static_field(StubRoutines,                _squareToLen,                                  address)                               \
 860      static_field(StubRoutines,                _mulAdd,                                       address)                               \
 861      static_field(StubRoutines,                _dexp,                                         address)                               \
 862      static_field(StubRoutines,                _dlog,                                         address)                               \
 863      static_field(StubRoutines,                _jbyte_arraycopy,                              address)                               \
 864      static_field(StubRoutines,                _jshort_arraycopy,                             address)                               \
 865      static_field(StubRoutines,                _jint_arraycopy,                               address)                               \
 866      static_field(StubRoutines,                _jlong_arraycopy,                              address)                               \
 867      static_field(StubRoutines,                _oop_arraycopy,                                address)                               \
 868      static_field(StubRoutines,                _oop_arraycopy_uninit,                         address)                               \
 869      static_field(StubRoutines,                _jbyte_disjoint_arraycopy,                     address)                               \
 870      static_field(StubRoutines,                _jshort_disjoint_arraycopy,                    address)                               \
 871      static_field(StubRoutines,                _jint_disjoint_arraycopy,                      address)                               \
 872      static_field(StubRoutines,                _jlong_disjoint_arraycopy,                     address)                               \
 873      static_field(StubRoutines,                _oop_disjoint_arraycopy,                       address)                               \
 874      static_field(StubRoutines,                _oop_disjoint_arraycopy_uninit,                address)                               \
 875      static_field(StubRoutines,                _arrayof_jbyte_arraycopy,                      address)                               \
 876      static_field(StubRoutines,                _arrayof_jshort_arraycopy,                     address)                               \
 877      static_field(StubRoutines,                _arrayof_jint_arraycopy,                       address)                               \
 878      static_field(StubRoutines,                _arrayof_jlong_arraycopy,                      address)                               \
 879      static_field(StubRoutines,                _arrayof_oop_arraycopy,                        address)                               \
 880      static_field(StubRoutines,                _arrayof_oop_arraycopy_uninit,                 address)                               \
 881      static_field(StubRoutines,                _arrayof_jbyte_disjoint_arraycopy,             address)                               \
 882      static_field(StubRoutines,                _arrayof_jshort_disjoint_arraycopy,            address)                               \
 883      static_field(StubRoutines,                _arrayof_jint_disjoint_arraycopy,              address)                               \
 884      static_field(StubRoutines,                _arrayof_jlong_disjoint_arraycopy,             address)                               \
 885      static_field(StubRoutines,                _arrayof_oop_disjoint_arraycopy,               address)                               \
 886      static_field(StubRoutines,                _arrayof_oop_disjoint_arraycopy_uninit,        address)                               \
 887      static_field(StubRoutines,                _checkcast_arraycopy,                          address)                               \
 888      static_field(StubRoutines,                _checkcast_arraycopy_uninit,                   address)                               \
 889      static_field(StubRoutines,                _unsafe_arraycopy,                             address)                               \
 890      static_field(StubRoutines,                _generic_arraycopy,                            address)                               \
 891                                                                                                                                      \
 892   /*****************/                                                                                                                \
 893   /* SharedRuntime */                                                                                                                \
 894   /*****************/                                                                                                                \
 895                                                                                                                                      \
 896      static_field(SharedRuntime,               _wrong_method_blob,                            RuntimeStub*)                          \
 897      static_field(SharedRuntime,               _ic_miss_blob,                                 RuntimeStub*)                          \
 898      static_field(SharedRuntime,               _deopt_blob,                                   DeoptimizationBlob*)                   \
 899                                                                                                                                      \
 900   /***************************************/                                                                                          \
 901   /* PcDesc and other compiled code info */                                                                                          \
 902   /***************************************/                                                                                          \
 903                                                                                                                                      \
 904   nonstatic_field(PcDesc,                      _pc_offset,                                    int)                                   \
 905   nonstatic_field(PcDesc,                      _scope_decode_offset,                          int)                                   \
 906   nonstatic_field(PcDesc,                      _obj_decode_offset,                            int)                                   \
 907   nonstatic_field(PcDesc,                      _flags,                                        int)                                   \
 908                                                                                                                                      \
 909   /***************************************************/                                                                              \
 910   /* CodeBlobs (NOTE: incomplete, but only a little) */                                                                              \
 911   /***************************************************/                                                                              \
 912                                                                                                                                      \
 913   nonstatic_field(CodeBlob,                    _name,                                   const char*)                                 \
 914   nonstatic_field(CodeBlob,                    _size,                                   int)                                         \
 915   nonstatic_field(CodeBlob,                    _header_size,                            int)                                         \
 916   nonstatic_field(CodeBlob,                    _relocation_size,                        int)                                         \
 917   nonstatic_field(CodeBlob,                    _content_offset,                         int)                                         \
 918   nonstatic_field(CodeBlob,                    _code_offset,                            int)                                         \
 919   nonstatic_field(CodeBlob,                    _frame_complete_offset,                  int)                                         \
 920   nonstatic_field(CodeBlob,                    _data_offset,                            int)                                         \
 921   nonstatic_field(CodeBlob,                    _frame_size,                             int)                                         \
 922   nonstatic_field(CodeBlob,                    _oop_maps,                               ImmutableOopMapSet*)                         \
 923                                                                                                                                      \
 924   nonstatic_field(DeoptimizationBlob,          _unpack_offset,                                int)                                   \
 925                                                                                                                                      \
 926   nonstatic_field(RuntimeStub,                 _caller_must_gc_arguments,                     bool)                                  \
 927                                                                                                                                      \
 928   /**************************************************/                                                                               \
 929   /* NMethods (NOTE: incomplete, but only a little) */                                                                               \
 930   /**************************************************/                                                                               \
 931                                                                                                                                      \
 932   nonstatic_field(nmethod,                     _method,                                       Method*)                               \
 933   nonstatic_field(nmethod,                     _entry_bci,                                    int)                                   \
 934   nonstatic_field(nmethod,                     _osr_link,                                     nmethod*)                              \
 935   nonstatic_field(nmethod,                     _scavenge_root_link,                           nmethod*)                              \
 936   nonstatic_field(nmethod,                     _scavenge_root_state,                          jbyte)                                 \
 937   nonstatic_field(nmethod,                     _state,                                        volatile unsigned char)                \
 938   nonstatic_field(nmethod,                     _exception_offset,                             int)                                   \
 939   nonstatic_field(nmethod,                     _deoptimize_offset,                            int)                                   \
 940   nonstatic_field(nmethod,                     _deoptimize_mh_offset,                         int)                                   \
 941   nonstatic_field(nmethod,                     _orig_pc_offset,                               int)                                   \
 942   nonstatic_field(nmethod,                     _stub_offset,                                  int)                                   \
 943   nonstatic_field(nmethod,                     _consts_offset,                                int)                                   \
 944   nonstatic_field(nmethod,                     _oops_offset,                                  int)                                   \
 945   nonstatic_field(nmethod,                     _metadata_offset,                              int)                                   \
 946   nonstatic_field(nmethod,                     _scopes_data_offset,                           int)                                   \
 947   nonstatic_field(nmethod,                     _scopes_pcs_offset,                            int)                                   \
 948   nonstatic_field(nmethod,                     _dependencies_offset,                          int)                                   \
 949   nonstatic_field(nmethod,                     _handler_table_offset,                         int)                                   \
 950   nonstatic_field(nmethod,                     _nul_chk_table_offset,                         int)                                   \
 951   nonstatic_field(nmethod,                     _nmethod_end_offset,                           int)                                   \
 952   nonstatic_field(nmethod,                     _entry_point,                                  address)                               \
 953   nonstatic_field(nmethod,                     _verified_entry_point,                         address)                               \
 954   nonstatic_field(nmethod,                     _osr_entry_point,                              address)                               \
 955   volatile_nonstatic_field(nmethod,            _lock_count,                                   jint)                                  \
 956   nonstatic_field(nmethod,                     _stack_traversal_mark,                         long)                                  \
 957   nonstatic_field(nmethod,                     _compile_id,                                   int)                                   \
 958   nonstatic_field(nmethod,                     _comp_level,                                   int)                                   \
 959   nonstatic_field(nmethod,                     _exception_cache,                              ExceptionCache*)                       \
 960   nonstatic_field(nmethod,                     _marked_for_deoptimization,                    bool)                                  \
 961                                                                                                                                      \
 962   unchecked_c2_static_field(Deoptimization,    _trap_reason_name,                             void*)                                 \
 963                                                                                                                                      \
 964   nonstatic_field(Deoptimization::UnrollBlock, _size_of_deoptimized_frame,                    int)                                   \
 965   nonstatic_field(Deoptimization::UnrollBlock, _caller_adjustment,                            int)                                   \
 966   nonstatic_field(Deoptimization::UnrollBlock, _number_of_frames,                             int)                                   \
 967   nonstatic_field(Deoptimization::UnrollBlock, _total_frame_sizes,                            int)                                   \
 968   nonstatic_field(Deoptimization::UnrollBlock, _unpack_kind,                                  int)                                   \
 969   nonstatic_field(Deoptimization::UnrollBlock, _frame_sizes,                                  intptr_t*)                             \
 970   nonstatic_field(Deoptimization::UnrollBlock, _frame_pcs,                                    address*)                              \
 971   nonstatic_field(Deoptimization::UnrollBlock, _register_block,                               intptr_t*)                             \
 972   nonstatic_field(Deoptimization::UnrollBlock, _return_type,                                  BasicType)                             \
 973   nonstatic_field(Deoptimization::UnrollBlock, _initial_info,                                 intptr_t)                              \
 974   nonstatic_field(Deoptimization::UnrollBlock, _caller_actual_parameters,                     int)                                   \
 975                                                                                                                                      \
 976   /********************************/                                                                                                 \
 977   /* JavaCalls (NOTE: incomplete) */                                                                                                 \
 978   /********************************/                                                                                                 \
 979                                                                                                                                      \
 980   nonstatic_field(JavaCallWrapper,             _anchor,                                       JavaFrameAnchor)                       \
 981   /********************************/                                                                                                 \
 982   /* JavaFrameAnchor (NOTE: incomplete) */                                                                                           \
 983   /********************************/                                                                                                 \
 984   volatile_nonstatic_field(JavaFrameAnchor,    _last_Java_sp,                                 intptr_t*)                             \
 985   volatile_nonstatic_field(JavaFrameAnchor,    _last_Java_pc,                                 address)                               \
 986                                                                                                                                      \
 987   /******************************/                                                                                                   \
 988   /* Threads (NOTE: incomplete) */                                                                                                   \
 989   /******************************/                                                                                                   \
 990                                                                                                                                      \
 991      static_field(Threads,                     _thread_list,                                  JavaThread*)                           \
 992      static_field(Threads,                     _number_of_threads,                            int)                                   \
 993      static_field(Threads,                     _number_of_non_daemon_threads,                 int)                                   \
 994      static_field(Threads,                     _return_code,                                  int)                                   \
 995                                                                                                                                      \
 996   nonstatic_field(ThreadShadow,                _pending_exception,                            oop)                                   \
 997   nonstatic_field(ThreadShadow,                _exception_file,                               const char*)                           \
 998   nonstatic_field(ThreadShadow,                _exception_line,                               int)                                   \
 999   volatile_nonstatic_field(Thread,             _suspend_flags,                                uint32_t)                              \
1000   nonstatic_field(Thread,                      _active_handles,                               JNIHandleBlock*)                       \
1001   nonstatic_field(Thread,                      _tlab,                                         ThreadLocalAllocBuffer)                \
1002   nonstatic_field(Thread,                      _allocated_bytes,                              jlong)                                 \
1003   nonstatic_field(Thread,                      _current_pending_monitor,                      ObjectMonitor*)                        \
1004   nonstatic_field(Thread,                      _current_pending_monitor_is_from_java,         bool)                                  \
1005   nonstatic_field(Thread,                      _current_waiting_monitor,                      ObjectMonitor*)                        \
1006   nonstatic_field(NamedThread,                 _name,                                         char*)                                 \
1007   nonstatic_field(NamedThread,                 _processed_thread,                             JavaThread*)                           \
1008   nonstatic_field(JavaThread,                  _next,                                         JavaThread*)                           \
1009   nonstatic_field(JavaThread,                  _threadObj,                                    oop)                                   \
1010   nonstatic_field(JavaThread,                  _anchor,                                       JavaFrameAnchor)                       \
1011   nonstatic_field(JavaThread,                  _vm_result,                                    oop)                                   \
1012   nonstatic_field(JavaThread,                  _vm_result_2,                                  Metadata*)                             \
1013   nonstatic_field(JavaThread,                  _pending_async_exception,                      oop)                                   \
1014   volatile_nonstatic_field(JavaThread,         _exception_oop,                                oop)                                   \
1015   volatile_nonstatic_field(JavaThread,         _exception_pc,                                 address)                               \
1016   volatile_nonstatic_field(JavaThread,         _is_method_handle_return,                      int)                                   \
1017   nonstatic_field(JavaThread,                  _special_runtime_exit_condition,               JavaThread::AsyncRequests)             \
1018   nonstatic_field(JavaThread,                  _saved_exception_pc,                           address)                               \
1019   volatile_nonstatic_field(JavaThread,         _thread_state,                                 JavaThreadState)                       \
1020   nonstatic_field(JavaThread,                  _osthread,                                     OSThread*)                             \
1021   nonstatic_field(JavaThread,                  _stack_base,                                   address)                               \
1022   nonstatic_field(JavaThread,                  _stack_size,                                   size_t)                                \
1023   nonstatic_field(JavaThread,                  _vframe_array_head,                            vframeArray*)                          \
1024   nonstatic_field(JavaThread,                  _vframe_array_last,                            vframeArray*)                          \
1025   nonstatic_field(JavaThread,                  _satb_mark_queue,                              SATBMarkQueue)                         \
1026   nonstatic_field(JavaThread,                  _dirty_card_queue,                             DirtyCardQueue)                        \
1027   nonstatic_field(Thread,                      _resource_area,                                ResourceArea*)                         \
1028   nonstatic_field(CompilerThread,              _env,                                          ciEnv*)                                \
1029                                                                                                                                      \
1030   /************/                                                                                                                     \
1031   /* OSThread */                                                                                                                     \
1032   /************/                                                                                                                     \
1033                                                                                                                                      \
1034   volatile_nonstatic_field(OSThread,           _interrupted,                                  jint)                                  \
1035                                                                                                                                      \
1036   /************************/                                                                                                         \
1037   /* OopMap and OopMapSet */                                                                                                         \
1038   /************************/                                                                                                         \
1039                                                                                                                                      \
1040   nonstatic_field(OopMap,                      _pc_offset,                                    int)                                   \
1041   nonstatic_field(OopMap,                      _omv_count,                                    int)                                   \
1042   nonstatic_field(OopMap,                      _write_stream,                                 CompressedWriteStream*)                \
1043   nonstatic_field(OopMapSet,                   _om_count,                                     int)                                   \
1044   nonstatic_field(OopMapSet,                   _om_size,                                      int)                                   \
1045   nonstatic_field(OopMapSet,                   _om_data,                                      OopMap**)                              \
1046                                                                                                                                      \
1047   nonstatic_field(ImmutableOopMapSet,          _count,                                        int)                                   \
1048   nonstatic_field(ImmutableOopMapSet,          _size,                                         int)                                   \
1049                                                                                                                                      \
1050   nonstatic_field(ImmutableOopMapPair,         _pc_offset,                                    int)                                   \
1051   nonstatic_field(ImmutableOopMapPair,         _oopmap_offset,                                int)                                   \
1052                                                                                                                                      \
1053   nonstatic_field(ImmutableOopMap,             _count,                                        int)                                   \
1054                                                                                                                                      \
1055   /*********************************/                                                                                                \
1056   /* JNIHandles and JNIHandleBlock */                                                                                                \
1057   /*********************************/                                                                                                \
1058      static_field(JNIHandles,                  _global_handles,                               JNIHandleBlock*)                       \
1059      static_field(JNIHandles,                  _weak_global_handles,                          JNIHandleBlock*)                       \
1060      static_field(JNIHandles,                  _deleted_handle,                               oop)                                   \
1061                                                                                                                                      \
1062   unchecked_nonstatic_field(JNIHandleBlock,    _handles,       JNIHandleBlock::block_size_in_oops * sizeof(Oop)) /* Note: no type */ \
1063   nonstatic_field(JNIHandleBlock,              _top,                                          int)                                   \
1064   nonstatic_field(JNIHandleBlock,              _next,                                         JNIHandleBlock*)                       \
1065                                                                                                                                      \
1066   /********************/                                                                                                             \
1067   /* CompressedStream */                                                                                                             \
1068   /********************/                                                                                                             \
1069                                                                                                                                      \
1070   nonstatic_field(CompressedStream,            _buffer,                                       u_char*)                               \
1071   nonstatic_field(CompressedStream,            _position,                                     int)                                   \
1072                                                                                                                                      \
1073   /*********************************/                                                                                                \
1074   /* VMRegImpl (NOTE: incomplete) */                                                                                                 \
1075   /*********************************/                                                                                                \
1076                                                                                                                                      \
1077      static_field(VMRegImpl,                   regName[0],                                    const char*)                           \
1078      static_field(VMRegImpl,                   stack0,                                        VMReg)                                 \
1079                                                                                                                                      \
1080   /*******************************/                                                                                                  \
1081   /* Runtime1 (NOTE: incomplete) */                                                                                                  \
1082   /*******************************/                                                                                                  \
1083                                                                                                                                      \
1084   unchecked_c1_static_field(Runtime1,          _blobs,                                 sizeof(Runtime1::_blobs)) /* NOTE: no type */ \
1085                                                                                                                                      \
1086   /**************/                                                                                                                   \
1087   /* allocation */                                                                                                                   \
1088   /**************/                                                                                                                   \
1089                                                                                                                                      \
1090   nonstatic_field(Chunk,                       _next,                                         Chunk*)                                \
1091   nonstatic_field(Chunk,                       _len,                                          const size_t)                          \
1092                                                                                                                                      \
1093   nonstatic_field(Arena,                       _first,                                        Chunk*)                                \
1094   nonstatic_field(Arena,                       _chunk,                                        Chunk*)                                \
1095   nonstatic_field(Arena,                       _hwm,                                          char*)                                 \
1096   nonstatic_field(Arena,                       _max,                                          char*)                                 \
1097                                                                                                                                      \
1098   /************/                                                                                                                     \
1099   /* CI */                                                                                                                           \
1100   /************/                                                                                                                     \
1101                                                                                                                                      \
1102   nonstatic_field(ciEnv,                       _system_dictionary_modification_counter,       int)                                   \
1103   nonstatic_field(ciEnv,                       _compiler_data,                                void*)                                 \
1104   nonstatic_field(ciEnv,                       _failure_reason,                               const char*)                           \
1105   nonstatic_field(ciEnv,                       _factory,                                      ciObjectFactory*)                      \
1106   nonstatic_field(ciEnv,                       _dependencies,                                 Dependencies*)                         \
1107   nonstatic_field(ciEnv,                       _task,                                         CompileTask*)                          \
1108   nonstatic_field(ciEnv,                       _arena,                                        Arena*)                                \
1109                                                                                                                                      \
1110   nonstatic_field(ciBaseObject,                _ident,                                        uint)                                  \
1111                                                                                                                                      \
1112   nonstatic_field(ciObject,                    _handle,                                       jobject)                               \
1113   nonstatic_field(ciObject,                    _klass,                                        ciKlass*)                              \
1114                                                                                                                                      \
1115   nonstatic_field(ciMetadata,                  _metadata,                                     Metadata*)                             \
1116                                                                                                                                      \
1117   nonstatic_field(ciSymbol,                    _symbol,                                       Symbol*)                               \
1118                                                                                                                                      \
1119   nonstatic_field(ciType,                      _basic_type,                                   BasicType)                             \
1120                                                                                                                                      \
1121   nonstatic_field(ciKlass,                     _name,                                         ciSymbol*)                             \
1122                                                                                                                                      \
1123   nonstatic_field(ciArrayKlass,                _dimension,                                    jint)                                  \
1124                                                                                                                                      \
1125   nonstatic_field(ciObjArrayKlass,             _element_klass,                                ciKlass*)                              \
1126   nonstatic_field(ciObjArrayKlass,             _base_element_klass,                           ciKlass*)                              \
1127                                                                                                                                      \
1128   nonstatic_field(ciInstanceKlass,             _init_state,                                   InstanceKlass::ClassState)             \
1129   nonstatic_field(ciInstanceKlass,             _is_shared,                                    bool)                                  \
1130                                                                                                                                      \
1131   nonstatic_field(ciMethod,                    _interpreter_invocation_count,                 int)                                   \
1132   nonstatic_field(ciMethod,                    _interpreter_throwout_count,                   int)                                   \
1133   nonstatic_field(ciMethod,                    _instructions_size,                            int)                                   \
1134                                                                                                                                      \
1135   nonstatic_field(ciMethodData,                _data_size,                                    int)                                   \
1136   nonstatic_field(ciMethodData,                _state,                                        u_char)                                \
1137   nonstatic_field(ciMethodData,                _extra_data_size,                              int)                                   \
1138   nonstatic_field(ciMethodData,                _data,                                         intptr_t*)                             \
1139   nonstatic_field(ciMethodData,                _hint_di,                                      int)                                   \
1140   nonstatic_field(ciMethodData,                _eflags,                                       intx)                                  \
1141   nonstatic_field(ciMethodData,                _arg_local,                                    intx)                                  \
1142   nonstatic_field(ciMethodData,                _arg_stack,                                    intx)                                  \
1143   nonstatic_field(ciMethodData,                _arg_returned,                                 intx)                                  \
1144   nonstatic_field(ciMethodData,                _current_mileage,                              int)                                   \
1145   nonstatic_field(ciMethodData,                _orig,                                         MethodData)                            \
1146                                                                                                                                      \
1147   nonstatic_field(ciField,                     _holder,                                       ciInstanceKlass*)                      \
1148   nonstatic_field(ciField,                     _name,                                         ciSymbol*)                             \
1149   nonstatic_field(ciField,                     _signature,                                    ciSymbol*)                             \
1150   nonstatic_field(ciField,                     _offset,                                       int)                                   \
1151   nonstatic_field(ciField,                     _is_constant,                                  bool)                                  \
1152   nonstatic_field(ciField,                     _constant_value,                               ciConstant)                            \
1153                                                                                                                                      \
1154   nonstatic_field(ciObjectFactory,             _ci_metadata,                                  GrowableArray&lt;ciMetadata*&gt;*)           \
1155   nonstatic_field(ciObjectFactory,             _symbols,                                      GrowableArray&lt;ciSymbol*&gt;*)             \
1156   nonstatic_field(ciObjectFactory,             _unloaded_methods,                             GrowableArray&lt;ciMethod*&gt;*)             \
1157                                                                                                                                      \
1158   nonstatic_field(ciConstant,                  _type,                                         BasicType)                             \
1159   nonstatic_field(ciConstant,                  _value._int,                                   jint)                                  \
1160   nonstatic_field(ciConstant,                  _value._long,                                  jlong)                                 \
1161   nonstatic_field(ciConstant,                  _value._float,                                 jfloat)                                \
1162   nonstatic_field(ciConstant,                  _value._double,                                jdouble)                               \
1163   nonstatic_field(ciConstant,                  _value._object,                                ciObject*)                             \
1164                                                                                                                                      \
1165   /************/                                                                                                                     \
1166   /* Monitors */                                                                                                                     \
1167   /************/                                                                                                                     \
1168                                                                                                                                      \
1169   volatile_nonstatic_field(ObjectMonitor,      _header,                                       markOop)                               \
1170   unchecked_nonstatic_field(ObjectMonitor,     _object,                                       sizeof(void *)) /* NOTE: no type */    \
1171   unchecked_nonstatic_field(ObjectMonitor,     _owner,                                        sizeof(void *)) /* NOTE: no type */    \
1172   volatile_nonstatic_field(ObjectMonitor,      _count,                                        jint)                                  \
1173   volatile_nonstatic_field(ObjectMonitor,      _waiters,                                      jint)                                  \
1174   volatile_nonstatic_field(ObjectMonitor,      _recursions,                                   intptr_t)                              \
1175   nonstatic_field(ObjectMonitor,               FreeNext,                                      ObjectMonitor*)                        \
1176   volatile_nonstatic_field(BasicLock,          _displaced_header,                             markOop)                               \
1177   nonstatic_field(BasicObjectLock,             _lock,                                         BasicLock)                             \
1178   nonstatic_field(BasicObjectLock,             _obj,                                          oop)                                   \
1179   static_ptr_volatile_field(ObjectSynchronizer, gBlockList,                                   ObjectMonitor*)                        \
1180                                                                                                                                      \
1181   /*********************/                                                                                                            \
1182   /* Matcher (C2 only) */                                                                                                            \
1183   /*********************/                                                                                                            \
1184                                                                                                                                      \
1185   unchecked_c2_static_field(Matcher,           _regEncode,                          sizeof(Matcher::_regEncode)) /* NOTE: no type */ \
1186                                                                                                                                      \
1187   c2_nonstatic_field(Node,                     _in,                                           Node**)                                \
1188   c2_nonstatic_field(Node,                     _out,                                          Node**)                                \
1189   c2_nonstatic_field(Node,                     _cnt,                                          node_idx_t)                            \
1190   c2_nonstatic_field(Node,                     _max,                                          node_idx_t)                            \
1191   c2_nonstatic_field(Node,                     _outcnt,                                       node_idx_t)                            \
1192   c2_nonstatic_field(Node,                     _outmax,                                       node_idx_t)                            \
1193   c2_nonstatic_field(Node,                     _idx,                                          const node_idx_t)                      \
1194   c2_nonstatic_field(Node,                     _class_id,                                     jushort)                               \
1195   c2_nonstatic_field(Node,                     _flags,                                        jushort)                               \
1196                                                                                                                                      \
1197   c2_nonstatic_field(Compile,                  _root,                                         RootNode*)                             \
1198   c2_nonstatic_field(Compile,                  _unique,                                       uint)                                  \
1199   c2_nonstatic_field(Compile,                  _entry_bci,                                    int)                                   \
1200   c2_nonstatic_field(Compile,                  _top,                                          Node*)                                 \
1201   c2_nonstatic_field(Compile,                  _cfg,                                          PhaseCFG*)                             \
1202   c2_nonstatic_field(Compile,                  _regalloc,                                     PhaseRegAlloc*)                        \
1203   c2_nonstatic_field(Compile,                  _method,                                       ciMethod*)                             \
1204   c2_nonstatic_field(Compile,                  _compile_id,                                   const int)                             \
1205   c2_nonstatic_field(Compile,                  _save_argument_registers,                      const bool)                            \
1206   c2_nonstatic_field(Compile,                  _subsume_loads,                                const bool)                            \
1207   c2_nonstatic_field(Compile,                  _do_escape_analysis,                           const bool)                            \
1208   c2_nonstatic_field(Compile,                  _eliminate_boxing,                             const bool)                            \
1209   c2_nonstatic_field(Compile,                  _ilt,                                          InlineTree*)                           \
1210                                                                                                                                      \
1211   c2_nonstatic_field(InlineTree,               _caller_jvms,                                  JVMState*)                             \
1212   c2_nonstatic_field(InlineTree,               _method,                                       ciMethod*)                             \
1213   c2_nonstatic_field(InlineTree,               _caller_tree,                                  InlineTree*)                           \
1214   c2_nonstatic_field(InlineTree,               _subtrees,                                     GrowableArray&lt;InlineTree*&gt;)            \
1215                                                                                                                                      \
1216   c2_nonstatic_field(OptoRegPair,              _first,                                        short)                                 \
1217   c2_nonstatic_field(OptoRegPair,              _second,                                       short)                                 \
1218                                                                                                                                      \
1219   c2_nonstatic_field(JVMState,                 _caller,                                       JVMState*)                             \
1220   c2_nonstatic_field(JVMState,                 _depth,                                        uint)                                  \
1221   c2_nonstatic_field(JVMState,                 _locoff,                                       uint)                                  \
1222   c2_nonstatic_field(JVMState,                 _stkoff,                                       uint)                                  \
1223   c2_nonstatic_field(JVMState,                 _monoff,                                       uint)                                  \
1224   c2_nonstatic_field(JVMState,                 _scloff,                                       uint)                                  \
1225   c2_nonstatic_field(JVMState,                 _endoff,                                       uint)                                  \
1226   c2_nonstatic_field(JVMState,                 _sp,                                           uint)                                  \
1227   c2_nonstatic_field(JVMState,                 _bci,                                          int)                                   \
1228   c2_nonstatic_field(JVMState,                 _method,                                       ciMethod*)                             \
1229   c2_nonstatic_field(JVMState,                 _map,                                          SafePointNode*)                        \
1230                                                                                                                                      \
1231   c2_nonstatic_field(SafePointNode,            _jvms,                                         JVMState* const)                       \
1232                                                                                                                                      \
1233   c2_nonstatic_field(MachSafePointNode,        _jvms,                                         JVMState*)                             \
1234   c2_nonstatic_field(MachSafePointNode,        _jvmadj,                                       uint)                                  \
1235                                                                                                                                      \
1236   c2_nonstatic_field(MachIfNode,               _prob,                                         jfloat)                                \
1237   c2_nonstatic_field(MachIfNode,               _fcnt,                                         jfloat)                                \
1238                                                                                                                                      \
1239   c2_nonstatic_field(CallNode,                 _entry_point,                                  address)                               \
1240                                                                                                                                      \
1241   c2_nonstatic_field(CallJavaNode,             _method,                                       ciMethod*)                             \
1242                                                                                                                                      \
1243   c2_nonstatic_field(CallRuntimeNode,          _name,                                         const char*)                           \
1244                                                                                                                                      \
1245   c2_nonstatic_field(CallStaticJavaNode,       _name,                                         const char*)                           \
1246                                                                                                                                      \
1247   c2_nonstatic_field(MachCallJavaNode,         _method,                                       ciMethod*)                             \
1248   c2_nonstatic_field(MachCallJavaNode,         _bci,                                          int)                                   \
1249                                                                                                                                      \
1250   c2_nonstatic_field(MachCallStaticJavaNode,   _name,                                         const char*)                           \
1251                                                                                                                                      \
1252   c2_nonstatic_field(MachCallRuntimeNode,      _name,                                         const char*)                           \
1253                                                                                                                                      \
1254   c2_nonstatic_field(PhaseCFG,                 _number_of_blocks,                             uint)                                  \
1255   c2_nonstatic_field(PhaseCFG,                 _blocks,                                       Block_List)                            \
1256   c2_nonstatic_field(PhaseCFG,                 _node_to_block_mapping,                        Block_Array)                           \
1257   c2_nonstatic_field(PhaseCFG,                 _root_block,                                   Block*)                                \
1258                                                                                                                                      \
1259   c2_nonstatic_field(PhaseRegAlloc,            _node_regs,                                    OptoRegPair*)                          \
1260   c2_nonstatic_field(PhaseRegAlloc,            _node_regs_max_index,                          uint)                                  \
1261   c2_nonstatic_field(PhaseRegAlloc,            _framesize,                                    uint)                                  \
1262   c2_nonstatic_field(PhaseRegAlloc,            _max_reg,                                      OptoReg::Name)                         \
1263                                                                                                                                      \
1264   c2_nonstatic_field(PhaseChaitin,             _trip_cnt,                                     int)                                   \
1265   c2_nonstatic_field(PhaseChaitin,             _alternate,                                    int)                                   \
1266   c2_nonstatic_field(PhaseChaitin,             _lo_degree,                                    uint)                                  \
1267   c2_nonstatic_field(PhaseChaitin,             _lo_stk_degree,                                uint)                                  \
1268   c2_nonstatic_field(PhaseChaitin,             _hi_degree,                                    uint)                                  \
1269   c2_nonstatic_field(PhaseChaitin,             _simplified,                                   uint)                                  \
1270                                                                                                                                      \
1271   c2_nonstatic_field(Block,                    _nodes,                                        Node_List)                             \
1272   c2_nonstatic_field(Block,                    _succs,                                        Block_Array)                           \
1273   c2_nonstatic_field(Block,                    _num_succs,                                    uint)                                  \
1274   c2_nonstatic_field(Block,                    _pre_order,                                    uint)                                  \
1275   c2_nonstatic_field(Block,                    _dom_depth,                                    uint)                                  \
1276   c2_nonstatic_field(Block,                    _idom,                                         Block*)                                \
1277   c2_nonstatic_field(Block,                    _freq,                                         jdouble)                               \
1278                                                                                                                                      \
1279   c2_nonstatic_field(CFGElement,               _freq,                                         jdouble)                               \
1280                                                                                                                                      \
1281   c2_nonstatic_field(Block_List,               _cnt,                                          uint)                                  \
1282                                                                                                                                      \
1283   c2_nonstatic_field(Block_Array,              _size,                                         uint)                                  \
1284   c2_nonstatic_field(Block_Array,              _blocks,                                       Block**)                               \
1285   c2_nonstatic_field(Block_Array,              _arena,                                        Arena*)                                \
1286                                                                                                                                      \
1287   c2_nonstatic_field(Node_List,                _cnt,                                          uint)                                  \
1288                                                                                                                                      \
1289   c2_nonstatic_field(Node_Array,               _max,                                          uint)                                  \
1290   c2_nonstatic_field(Node_Array,               _nodes,                                        Node**)                                \
1291   c2_nonstatic_field(Node_Array,               _a,                                            Arena*)                                \
1292                                                                                                                                      \
1293                                                                                                                                      \
1294   /*********************/                                                                                                            \
1295   /* -XX flags         */                                                                                                            \
1296   /*********************/                                                                                                            \
1297                                                                                                                                      \
1298   nonstatic_field(Flag,                        _type,                                         const char*)                           \
1299   nonstatic_field(Flag,                        _name,                                         const char*)                           \
1300   unchecked_nonstatic_field(Flag,              _addr,                                         sizeof(void*)) /* NOTE: no type */     \
1301   nonstatic_field(Flag,                        _flags,                                        Flag::Flags)                           \
1302      static_field(Flag,                        flags,                                         Flag*)                                 \
1303      static_field(Flag,                        numFlags,                                      size_t)                                \
1304                                                                                                                                      \
1305   /*************************/                                                                                                        \
1306   /* JDK / VM version info */                                                                                                        \
1307   /*************************/                                                                                                        \
1308                                                                                                                                      \
1309      static_field(Abstract_VM_Version,         _s_vm_release,                                 const char*)                           \
1310      static_field(Abstract_VM_Version,         _s_internal_vm_info_string,                    const char*)                           \
1311      static_field(Abstract_VM_Version,         _vm_major_version,                             int)                                   \
1312      static_field(Abstract_VM_Version,         _vm_minor_version,                             int)                                   \
1313      static_field(Abstract_VM_Version,         _vm_security_version,                          int)                                   \
1314      static_field(Abstract_VM_Version,         _vm_build_number,                              int)                                   \
1315      static_field(Abstract_VM_Version,         _reserve_for_allocation_prefetch,              int)                                   \
1316                                                                                                                                      \
1317      static_field(JDK_Version,                 _current,                                      JDK_Version)                           \
1318   nonstatic_field(JDK_Version,                 _major,                                        unsigned char)                         \
1319                                                                                                                                      \
1320   /*************************/                                                                                                        \
1321   /* JVMTI */                                                                                                                        \
1322   /*************************/                                                                                                        \
1323                                                                                                                                      \
1324   JVMTI_STRUCTS(static_field)                                                                                                        \
1325                                                                                                                                      \
1326   /*************/                                                                                                                    \
1327   /* Arguments */                                                                                                                    \
1328   /*************/                                                                                                                    \
1329                                                                                                                                      \
1330      static_field(Arguments,                   _jvm_flags_array,                              char**)                                \
1331      static_field(Arguments,                   _num_jvm_flags,                                int)                                   \
1332      static_field(Arguments,                   _jvm_args_array,                               char**)                                \
1333      static_field(Arguments,                   _num_jvm_args,                                 int)                                   \
1334      static_field(Arguments,                   _java_command,                                 char*)                                 \
1335                                                                                                                                      \
1336   /************/                                                                                                                     \
1337   /* Array&lt;T&gt; */                                                                                                                     \
1338   /************/                                                                                                                     \
1339                                                                                                                                      \
1340   nonstatic_field(Array&lt;int&gt;,                  _length,                                       int)                                   \
1341   unchecked_nonstatic_field(Array&lt;int&gt;,        _data,                                         sizeof(int))                           \
1342   unchecked_nonstatic_field(Array&lt;u1&gt;,         _data,                                         sizeof(u1))                            \
1343   unchecked_nonstatic_field(Array&lt;u2&gt;,         _data,                                         sizeof(u2))                            \
1344   unchecked_nonstatic_field(Array&lt;Method*&gt;,    _data,                                         sizeof(Method*))                       \
1345   unchecked_nonstatic_field(Array&lt;Klass*&gt;,     _data,                                         sizeof(Klass*))                        \
1346                                                                                                                                      \
1347   /*********************************/                                                                                                \
1348   /* java_lang_Class fields        */                                                                                                \
1349   /*********************************/                                                                                                \
1350                                                                                                                                      \
1351      static_field(java_lang_Class,             _klass_offset,                                 int)                                   \
1352      static_field(java_lang_Class,             _array_klass_offset,                           int)                                   \
1353      static_field(java_lang_Class,             _oop_size_offset,                              int)                                   \
1354      static_field(java_lang_Class,             _static_oop_field_count_offset,                int)                                   \
1355                                                                                                                                      \
1356   /************************/                                                                                                         \
1357   /* Miscellaneous fields */                                                                                                         \
1358   /************************/                                                                                                         \
1359                                                                                                                                      \
1360   nonstatic_field(CompileTask,                 _method,                                       Method*)                               \
1361   nonstatic_field(CompileTask,                 _osr_bci,                                      int)                                   \
1362   nonstatic_field(CompileTask,                 _comp_level,                                   int)                                   \
1363   nonstatic_field(CompileTask,                 _compile_id,                                   uint)                                  \
1364   nonstatic_field(CompileTask,                 _num_inlined_bytecodes,                        int)                                   \
1365   nonstatic_field(CompileTask,                 _next,                                         CompileTask*)                          \
1366   nonstatic_field(CompileTask,                 _prev,                                         CompileTask*)                          \
1367                                                                                                                                      \
1368   nonstatic_field(vframeArray,                 _next,                                         vframeArray*)                          \
1369   nonstatic_field(vframeArray,                 _original,                                     frame)                                 \
1370   nonstatic_field(vframeArray,                 _caller,                                       frame)                                 \
1371   nonstatic_field(vframeArray,                 _frames,                                       int)                                   \
1372                                                                                                                                      \
1373   nonstatic_field(vframeArrayElement,          _frame,                                        frame)                                 \
1374   nonstatic_field(vframeArrayElement,          _bci,                                          int)                                   \
1375   nonstatic_field(vframeArrayElement,          _method,                                       Method*)                               \
1376                                                                                                                                      \
1377   nonstatic_field(AccessFlags,                 _flags,                                        jint)                                  \
1378   nonstatic_field(elapsedTimer,                _counter,                                      jlong)                                 \
1379   nonstatic_field(elapsedTimer,                _active,                                       bool)                                  \
1380   nonstatic_field(InvocationCounter,           _counter,                                      unsigned int)                          \
1381   volatile_nonstatic_field(FreeChunk,          _size,                                         size_t)                                \
1382   nonstatic_field(FreeChunk,                   _next,                                         FreeChunk*)                            \
1383   nonstatic_field(FreeChunk,                   _prev,                                         FreeChunk*)                            \
1384   nonstatic_field(AdaptiveFreeList&lt;FreeChunk&gt;, _size,                                         size_t)                                \
1385   nonstatic_field(AdaptiveFreeList&lt;FreeChunk&gt;, _count,                                        ssize_t)
1386 
1387 
1388 //--------------------------------------------------------------------------------
1389 // VM_TYPES
1390 //
1391 // This list must enumerate at least all of the types in the above
1392 // list. For the types in the above list, the entry below must have
1393 // exactly the same spacing since string comparisons are done in the
1394 // code which verifies the consistency of these tables (in the debug
1395 // build).
1396 //
1397 // In addition to the above types, this list is required to enumerate
1398 // the JNI's java types, which are used to indicate the size of Java
1399 // fields in this VM to the SA. Further, oop types are currently
1400 // distinguished by name (i.e., ends with "oop") over in the SA.
1401 //
1402 // The declare_toplevel_type macro should be used to declare types
1403 // which do not have a superclass.
1404 //
1405 // The declare_integer_type and declare_unsigned_integer_type macros
1406 // are required in order to properly identify C integer types over in
1407 // the SA. They should be used for any type which is otherwise opaque
1408 // and which it is necessary to coerce into an integer value. This
1409 // includes, for example, the type uintptr_t. Note that while they
1410 // will properly identify the type's size regardless of the platform,
1411 // since it is does not seem possible to deduce or check signedness at
1412 // compile time using the pointer comparison tricks, it is currently
1413 // required that the given types have the same signedness across all
1414 // platforms.
1415 //
1416 // NOTE that there are platform-specific additions to this table in
1417 // vmStructs_&lt;os&gt;_&lt;cpu&gt;.hpp.
1418 
1419 #define VM_TYPES(declare_type,                                            \
1420                  declare_toplevel_type,                                   \
1421                  declare_oop_type,                                        \
1422                  declare_integer_type,                                    \
1423                  declare_unsigned_integer_type,                           \
1424                  declare_c1_toplevel_type,                                \
1425                  declare_c2_type,                                         \
1426                  declare_c2_toplevel_type)                                \
1427                                                                           \
1428   /*************************************************************/         \
1429   /* Java primitive types -- required by the SA implementation */         \
1430   /* in order to determine the size of Java fields in this VM  */         \
1431   /* (the implementation looks up these names specifically)    */         \
1432   /* NOTE: since we fetch these sizes from the remote VM, we   */         \
1433   /* have a bootstrapping sequence during which it is not      */         \
1434   /* valid to fetch Java values from the remote process, only  */         \
1435   /* C integer values (of known size). NOTE also that we do    */         \
1436   /* NOT include "Java unsigned" types like juint here; since  */         \
1437   /* Java does not have unsigned primitive types, those can    */         \
1438   /* not be mapped directly and are considered to be C integer */         \
1439   /* types in this system (see the "other types" section,      */         \
1440   /* below.)                                                   */         \
1441   /*************************************************************/         \
1442                                                                           \
1443   declare_toplevel_type(jboolean)                                         \
1444   declare_toplevel_type(jbyte)                                            \
1445   declare_toplevel_type(jchar)                                            \
1446   declare_toplevel_type(jdouble)                                          \
1447   declare_toplevel_type(jfloat)                                           \
1448   declare_toplevel_type(jint)                                             \
1449   declare_toplevel_type(jlong)                                            \
1450   declare_toplevel_type(jshort)                                           \
1451                                                                           \
1452   /*********************************************************************/ \
1453   /* C integer types. User-defined typedefs (like "size_t" or          */ \
1454   /* "intptr_t") are guaranteed to be present with the same names over */ \
1455   /* in the SA's type database. Names like "unsigned short" are not    */ \
1456   /* guaranteed to be visible through the SA's type database lookup    */ \
1457   /* mechanism, though they will have a Type object created for them   */ \
1458   /* and are valid types for Fields.                                   */ \
1459   /*********************************************************************/ \
1460   declare_integer_type(bool)                                              \
1461   declare_integer_type(short)                                             \
1462   declare_integer_type(int)                                               \
1463   declare_integer_type(long)                                              \
1464   declare_integer_type(char)                                              \
1465   declare_unsigned_integer_type(unsigned char)                            \
1466   declare_unsigned_integer_type(volatile unsigned char)                   \
1467   declare_unsigned_integer_type(u_char)                                   \
1468   declare_unsigned_integer_type(unsigned int)                             \
1469   declare_unsigned_integer_type(uint)                                     \
1470   declare_unsigned_integer_type(unsigned short)                           \
1471   declare_unsigned_integer_type(jushort)                                  \
1472   declare_unsigned_integer_type(unsigned long)                            \
1473   /* The compiler thinks this is a different type than */                 \
1474   /* unsigned short on Win32 */                                           \
1475   declare_unsigned_integer_type(u1)                                       \
1476   declare_unsigned_integer_type(u2)                                       \
1477   declare_unsigned_integer_type(u4)                                       \
1478   declare_unsigned_integer_type(u8)                                       \
1479   declare_unsigned_integer_type(unsigned)                                 \
1480                                                                           \
1481   /*****************************/                                         \
1482   /* C primitive pointer types */                                         \
1483   /*****************************/                                         \
1484                                                                           \
1485   declare_toplevel_type(void*)                                            \
1486   declare_toplevel_type(int*)                                             \
1487   declare_toplevel_type(char*)                                            \
1488   declare_toplevel_type(char**)                                           \
1489   declare_toplevel_type(u_char*)                                          \
1490   declare_toplevel_type(unsigned char*)                                   \
1491   declare_toplevel_type(volatile unsigned char*)                          \
1492                                                                           \
1493   /*******************************************************************/   \
1494   /* Types which it will be handy to have available over in the SA   */   \
1495   /* in order to do platform-independent address -&gt; integer coercion */   \
1496   /* (note: these will be looked up by name)                         */   \
1497   /*******************************************************************/   \
1498                                                                           \
1499   declare_unsigned_integer_type(size_t)                                   \
1500   declare_integer_type(ssize_t)                                           \
1501   declare_integer_type(intx)                                              \
1502   declare_integer_type(intptr_t)                                          \
1503   declare_unsigned_integer_type(uintx)                                    \
1504   declare_unsigned_integer_type(uintptr_t)                                \
1505   declare_unsigned_integer_type(uint32_t)                                 \
1506   declare_unsigned_integer_type(uint64_t)                                 \
1507                                                                           \
1508   /******************************************/                            \
1509   /* OopDesc hierarchy (NOTE: some missing) */                            \
1510   /******************************************/                            \
1511                                                                           \
1512   declare_toplevel_type(oopDesc)                                          \
1513     declare_type(arrayOopDesc, oopDesc)                                   \
1514       declare_type(objArrayOopDesc, arrayOopDesc)                         \
1515     declare_type(instanceOopDesc, oopDesc)                                \
1516     declare_type(markOopDesc, oopDesc)                                    \
1517                                                                           \
1518   /**************************************************/                    \
1519   /* MetadataOopDesc hierarchy (NOTE: some missing) */                    \
1520   /**************************************************/                    \
1521                                                                           \
1522   declare_toplevel_type(CompiledICHolder)                                 \
1523   declare_toplevel_type(MetaspaceObj)                                     \
1524     declare_type(Metadata, MetaspaceObj)                                  \
1525     declare_type(Klass, Metadata)                                         \
1526            declare_type(ArrayKlass, Klass)                                \
1527            declare_type(ObjArrayKlass, ArrayKlass)                        \
1528            declare_type(TypeArrayKlass, ArrayKlass)                       \
1529       declare_type(InstanceKlass, Klass)                                  \
1530         declare_type(InstanceClassLoaderKlass, InstanceKlass)             \
1531         declare_type(InstanceMirrorKlass, InstanceKlass)                  \
1532         declare_type(InstanceRefKlass, InstanceKlass)                     \
1533     declare_type(ConstantPool, Metadata)                                  \
1534     declare_type(ConstantPoolCache, MetaspaceObj)                         \
1535     declare_type(MethodData, Metadata)                                    \
1536     declare_type(Method, Metadata)                                        \
1537     declare_type(MethodCounters, MetaspaceObj)                            \
1538     declare_type(ConstMethod, MetaspaceObj)                               \
1539                                                                           \
1540   declare_toplevel_type(narrowKlass)                                      \
1541                                                                           \
1542   declare_toplevel_type(vtableEntry)                                      \
1543                                                                           \
1544            declare_toplevel_type(Symbol)                                  \
1545            declare_toplevel_type(Symbol*)                                 \
1546   declare_toplevel_type(volatile Metadata*)                               \
1547                                                                           \
1548   declare_toplevel_type(DataLayout)                                       \
1549                                                                           \
1550   /********/                                                              \
1551   /* Oops */                                                              \
1552   /********/                                                              \
1553                                                                           \
1554   declare_oop_type(markOop)                                               \
1555   declare_oop_type(objArrayOop)                                           \
1556   declare_oop_type(oop)                                                   \
1557   declare_oop_type(narrowOop)                                             \
1558   declare_oop_type(typeArrayOop)                                          \
1559                                                                           \
1560   /*************************************/                                 \
1561   /* MethodOop-related data structures */                                 \
1562   /*************************************/                                 \
1563                                                                           \
1564   declare_toplevel_type(CheckedExceptionElement)                          \
1565   declare_toplevel_type(LocalVariableTableElement)                        \
1566   declare_toplevel_type(ExceptionTableElement)                            \
1567   declare_toplevel_type(MethodParametersElement)                          \
1568                                                                           \
1569   declare_toplevel_type(ClassLoaderData)                                  \
1570   declare_toplevel_type(ClassLoaderDataGraph)                             \
1571                                                                           \
1572   /******************************************/                            \
1573   /* Generation and space hierarchies       */                            \
1574   /* (needed for run-time type information) */                            \
1575   /******************************************/                            \
1576                                                                           \
1577   declare_toplevel_type(CollectedHeap)                                    \
1578            declare_type(GenCollectedHeap,             CollectedHeap)      \
1579   declare_toplevel_type(Generation)                                       \
1580            declare_type(DefNewGeneration,             Generation)         \
1581            declare_type(CardGeneration,               Generation)         \
1582            declare_type(TenuredGeneration,            CardGeneration)     \
1583   declare_toplevel_type(GenCollectorPolicy)                               \
1584   declare_toplevel_type(Space)                                            \
1585   declare_toplevel_type(BitMap)                                           \
1586            declare_type(CompactibleSpace,             Space)              \
1587            declare_type(ContiguousSpace,              CompactibleSpace)   \
1588            declare_type(OffsetTableContigSpace,       ContiguousSpace)    \
1589            declare_type(TenuredSpace,                 OffsetTableContigSpace) \
1590   declare_toplevel_type(BarrierSet)                                       \
1591            declare_type(ModRefBarrierSet,             BarrierSet)         \
1592            declare_type(CardTableModRefBS,            ModRefBarrierSet)   \
1593            declare_type(CardTableModRefBSForCTRS,     CardTableModRefBS)  \
1594   declare_toplevel_type(BarrierSet::Name)                                 \
1595   declare_toplevel_type(CardTableRS)                                      \
1596   declare_toplevel_type(BlockOffsetSharedArray)                           \
1597   declare_toplevel_type(BlockOffsetTable)                                 \
1598            declare_type(BlockOffsetArray,             BlockOffsetTable)   \
1599            declare_type(BlockOffsetArrayContigSpace,  BlockOffsetArray)   \
1600            declare_type(BlockOffsetArrayNonContigSpace, BlockOffsetArray) \
1601                                                                           \
1602   /* Miscellaneous other GC types */                                      \
1603                                                                           \
1604   declare_toplevel_type(ageTable)                                         \
1605   declare_toplevel_type(Generation::StatRecord)                           \
1606   declare_toplevel_type(GenerationSpec)                                   \
1607   declare_toplevel_type(HeapWord)                                         \
1608   declare_toplevel_type(MemRegion)                                        \
1609   declare_toplevel_type(ThreadLocalAllocBuffer)                           \
1610   declare_toplevel_type(VirtualSpace)                                     \
1611   declare_toplevel_type(SATBMarkQueue)                                    \
1612   declare_toplevel_type(DirtyCardQueue)                                   \
1613                                                                           \
1614   /* Pointers to Garbage Collection types */                              \
1615                                                                           \
1616   declare_toplevel_type(BarrierSet*)                                      \
1617   declare_toplevel_type(BlockOffsetSharedArray*)                          \
1618   declare_toplevel_type(CardTableRS*)                                     \
1619   declare_toplevel_type(CardTableModRefBS*)                               \
1620   declare_toplevel_type(CardTableModRefBS**)                              \
1621   declare_toplevel_type(CardTableModRefBSForCTRS*)                        \
1622   declare_toplevel_type(CardTableModRefBSForCTRS**)                       \
1623   declare_toplevel_type(CollectedHeap*)                                   \
1624   declare_toplevel_type(ContiguousSpace*)                                 \
1625   declare_toplevel_type(DefNewGeneration*)                                \
1626   declare_toplevel_type(GenCollectedHeap*)                                \
1627   declare_toplevel_type(Generation*)                                      \
1628   declare_toplevel_type(GenerationSpec**)                                 \
1629   declare_toplevel_type(HeapWord*)                                        \
1630   declare_toplevel_type(HeapWord* volatile)                               \
1631   declare_toplevel_type(MemRegion*)                                       \
1632   declare_toplevel_type(OffsetTableContigSpace*)                          \
1633   declare_toplevel_type(Space*)                                           \
1634   declare_toplevel_type(TenuredGeneration*)                               \
1635   declare_toplevel_type(ThreadLocalAllocBuffer*)                          \
1636                                                                           \
1637   declare_toplevel_type(BarrierSet::FakeRtti)                             \
1638                                                                           \
1639   /************************/                                              \
1640   /* PerfMemory - jvmstat */                                              \
1641   /************************/                                              \
1642                                                                           \
1643   declare_toplevel_type(PerfDataPrologue)                                 \
1644   declare_toplevel_type(PerfDataPrologue*)                                \
1645   declare_toplevel_type(PerfDataEntry)                                    \
1646   declare_toplevel_type(PerfMemory)                                       \
1647                                                                           \
1648   /*********************************/                                     \
1649   /* SymbolTable, SystemDictionary */                                     \
1650   /*********************************/                                     \
1651                                                                           \
1652   declare_toplevel_type(BasicHashtable&lt;mtInternal&gt;)                       \
1653     declare_type(IntptrHashtable, BasicHashtable&lt;mtInternal&gt;)             \
1654   declare_type(SymbolTable, SymbolHashtable)                              \
1655   declare_type(StringTable, StringHashtable)                              \
1656     declare_type(LoaderConstraintTable, KlassHashtable)                   \
1657     declare_type(KlassTwoOopHashtable, KlassHashtable)                    \
1658     declare_type(Dictionary, KlassTwoOopHashtable)                        \
1659     declare_type(PlaceholderTable, SymbolTwoOopHashtable)                 \
1660   declare_toplevel_type(BasicHashtableEntry&lt;mtInternal&gt;)                  \
1661   declare_type(IntptrHashtableEntry, BasicHashtableEntry&lt;mtInternal&gt;)     \
1662     declare_type(DictionaryEntry, KlassHashtableEntry)                    \
1663     declare_type(PlaceholderEntry, SymbolHashtableEntry)                  \
1664     declare_type(LoaderConstraintEntry, KlassHashtableEntry)              \
1665   declare_toplevel_type(HashtableBucket&lt;mtInternal&gt;)                      \
1666   declare_toplevel_type(SystemDictionary)                                 \
1667   declare_toplevel_type(vmSymbols)                                        \
1668   declare_toplevel_type(ProtectionDomainEntry)                            \
1669   declare_toplevel_type(ProtectionDomainCacheEntry)                       \
1670                                                                           \
1671   declare_toplevel_type(GenericGrowableArray)                             \
1672   declare_toplevel_type(GrowableArray&lt;int&gt;)                               \
1673   declare_toplevel_type(Arena)                                            \
1674     declare_type(ResourceArea, Arena)                                     \
1675   declare_toplevel_type(Chunk)                                            \
1676                                                                           \
1677   declare_toplevel_type(SymbolCompactHashTable)                           \
1678                                                                           \
1679   /***********************************************************/           \
1680   /* Thread hierarchy (needed for run-time type information) */           \
1681   /***********************************************************/           \
1682                                                                           \
1683   declare_toplevel_type(Threads)                                          \
1684   declare_toplevel_type(ThreadShadow)                                     \
1685            declare_type(Thread, ThreadShadow)                             \
1686            declare_type(NamedThread, Thread)                              \
1687            declare_type(WatcherThread, Thread)                            \
1688            declare_type(JavaThread, Thread)                               \
1689            declare_type(JvmtiAgentThread, JavaThread)                     \
1690            declare_type(ServiceThread, JavaThread)                        \
1691   declare_type(CompilerThread, JavaThread)                                \
1692   declare_type(CodeCacheSweeperThread, JavaThread)                        \
1693   declare_toplevel_type(OSThread)                                         \
1694   declare_toplevel_type(JavaFrameAnchor)                                  \
1695                                                                           \
1696   /***************/                                                       \
1697   /* Interpreter */                                                       \
1698   /***************/                                                       \
1699                                                                           \
1700   declare_toplevel_type(AbstractInterpreter)                              \
1701                                                                           \
1702   /*********/                                                             \
1703   /* Stubs */                                                             \
1704   /*********/                                                             \
1705                                                                           \
1706   declare_toplevel_type(StubQueue)                                        \
1707   declare_toplevel_type(StubRoutines)                                     \
1708   declare_toplevel_type(Stub)                                             \
1709            declare_type(InterpreterCodelet, Stub)                         \
1710                                                                           \
1711   /*************/                                                         \
1712   /* JavaCalls */                                                         \
1713   /*************/                                                         \
1714                                                                           \
1715   declare_toplevel_type(JavaCallWrapper)                                  \
1716                                                                           \
1717   /*************/                                                         \
1718   /* CodeCache */                                                         \
1719   /*************/                                                         \
1720                                                                           \
1721   declare_toplevel_type(CodeCache)                                        \
1722                                                                           \
1723   /************/                                                          \
1724   /* CodeHeap */                                                          \
1725   /************/                                                          \
1726                                                                           \
1727   declare_toplevel_type(CodeHeap)                                         \
1728   declare_toplevel_type(CodeHeap*)                                        \
1729   declare_toplevel_type(HeapBlock)                                        \
1730   declare_toplevel_type(HeapBlock::Header)                                \
1731            declare_type(FreeBlock, HeapBlock)                             \
1732                                                                           \
1733   /*************************************************************/         \
1734   /* CodeBlob hierarchy (needed for run-time type information) */         \
1735   /*************************************************************/         \
1736                                                                           \
1737   declare_toplevel_type(SharedRuntime)                                    \
1738                                                                           \
1739   declare_toplevel_type(CodeBlob)                                         \
1740   declare_type(BufferBlob,               CodeBlob)                        \
1741   declare_type(AdapterBlob,              BufferBlob)                      \
1742   declare_type(MethodHandlesAdapterBlob, BufferBlob)                      \
1743   declare_type(nmethod,                  CodeBlob)                        \
1744   declare_type(RuntimeStub,              CodeBlob)                        \
1745   declare_type(SingletonBlob,            CodeBlob)                        \
1746   declare_type(SafepointBlob,            SingletonBlob)                   \
1747   declare_type(DeoptimizationBlob,       SingletonBlob)                   \
1748   declare_c2_type(ExceptionBlob,         SingletonBlob)                   \
1749   declare_c2_type(UncommonTrapBlob,      CodeBlob)                        \
1750                                                                           \
1751   /***************************************/                               \
1752   /* PcDesc and other compiled code info */                               \
1753   /***************************************/                               \
1754                                                                           \
1755   declare_toplevel_type(PcDesc)                                           \
1756   declare_toplevel_type(ExceptionCache)                                   \
1757   declare_toplevel_type(PcDescCache)                                      \
1758   declare_toplevel_type(Dependencies)                                     \
1759   declare_toplevel_type(CompileTask)                                      \
1760   declare_toplevel_type(Deoptimization)                                   \
1761   declare_toplevel_type(Deoptimization::UnrollBlock)                      \
1762                                                                           \
1763   /************************/                                              \
1764   /* OopMap and OopMapSet */                                              \
1765   /************************/                                              \
1766                                                                           \
1767   declare_toplevel_type(OopMap)                                           \
1768   declare_toplevel_type(OopMapSet)                                        \
1769   declare_toplevel_type(ImmutableOopMapSet)                               \
1770   declare_toplevel_type(ImmutableOopMapPair)                              \
1771   declare_toplevel_type(ImmutableOopMap)                                  \
1772                                                                           \
1773   /********************/                                                  \
1774   /* CompressedStream */                                                  \
1775   /********************/                                                  \
1776                                                                           \
1777   declare_toplevel_type(CompressedStream)                                 \
1778                                                                           \
1779   /**************/                                                        \
1780   /* VMRegImpl  */                                                        \
1781   /**************/                                                        \
1782                                                                           \
1783   declare_toplevel_type(VMRegImpl)                                        \
1784                                                                           \
1785   /*********************************/                                     \
1786   /* JNIHandles and JNIHandleBlock */                                     \
1787   /*********************************/                                     \
1788                                                                           \
1789   declare_toplevel_type(JNIHandles)                                       \
1790   declare_toplevel_type(JNIHandleBlock)                                   \
1791   declare_toplevel_type(jobject)                                          \
1792                                                                           \
1793   /**********************/                                                \
1794   /* Runtime1 (C1 only) */                                                \
1795   /**********************/                                                \
1796                                                                           \
1797   declare_c1_toplevel_type(Runtime1)                                      \
1798                                                                           \
1799   /************/                                                          \
1800   /* Monitors */                                                          \
1801   /************/                                                          \
1802                                                                           \
1803   declare_toplevel_type(ObjectMonitor)                                    \
1804   declare_toplevel_type(ObjectSynchronizer)                               \
1805   declare_toplevel_type(BasicLock)                                        \
1806   declare_toplevel_type(BasicObjectLock)                                  \
1807                                                                           \
1808   /*********************/                                                 \
1809   /* Matcher (C2 only) */                                                 \
1810   /*********************/                                                 \
1811                                                                           \
1812   declare_c2_toplevel_type(Matcher)                                       \
1813   declare_c2_toplevel_type(Compile)                                       \
1814   declare_c2_toplevel_type(InlineTree)                                    \
1815   declare_c2_toplevel_type(OptoRegPair)                                   \
1816   declare_c2_toplevel_type(JVMState)                                      \
1817   declare_c2_toplevel_type(Phase)                                         \
1818     declare_c2_type(PhaseCFG, Phase)                                      \
1819     declare_c2_type(PhaseRegAlloc, Phase)                                 \
1820     declare_c2_type(PhaseChaitin, PhaseRegAlloc)                          \
1821   declare_c2_toplevel_type(CFGElement)                                    \
1822     declare_c2_type(Block, CFGElement)                                    \
1823   declare_c2_toplevel_type(Block_Array)                                   \
1824     declare_c2_type(Block_List, Block_Array)                              \
1825   declare_c2_toplevel_type(Node_Array)                                    \
1826   declare_c2_type(Node_List, Node_Array)                                  \
1827   declare_c2_type(Unique_Node_List, Node_List)                            \
1828   declare_c2_toplevel_type(Node)                                          \
1829   declare_c2_type(AddNode, Node)                                          \
1830   declare_c2_type(AddINode, AddNode)                                      \
1831   declare_c2_type(AddLNode, AddNode)                                      \
1832   declare_c2_type(AddFNode, AddNode)                                      \
1833   declare_c2_type(AddDNode, AddNode)                                      \
1834   declare_c2_type(AddPNode, Node)                                         \
1835   declare_c2_type(OrINode, AddNode)                                       \
1836   declare_c2_type(OrLNode, AddNode)                                       \
1837   declare_c2_type(XorINode, AddNode)                                      \
1838   declare_c2_type(XorLNode, AddNode)                                      \
1839   declare_c2_type(MaxNode, AddNode)                                       \
1840   declare_c2_type(MaxINode, MaxNode)                                      \
1841   declare_c2_type(MinINode, MaxNode)                                      \
1842   declare_c2_type(StartNode, MultiNode)                                   \
1843   declare_c2_type(StartOSRNode, StartNode)                                \
1844   declare_c2_type(ParmNode, ProjNode)                                     \
1845   declare_c2_type(ReturnNode, Node)                                       \
1846   declare_c2_type(RethrowNode, Node)                                      \
1847   declare_c2_type(TailCallNode, ReturnNode)                               \
1848   declare_c2_type(TailJumpNode, ReturnNode)                               \
1849   declare_c2_type(SafePointNode, MultiNode)                               \
1850   declare_c2_type(CallNode, SafePointNode)                                \
1851   declare_c2_type(CallJavaNode, CallNode)                                 \
1852   declare_c2_type(CallStaticJavaNode, CallJavaNode)                       \
1853   declare_c2_type(CallDynamicJavaNode, CallJavaNode)                      \
1854   declare_c2_type(CallRuntimeNode, CallNode)                              \
1855   declare_c2_type(CallLeafNode, CallRuntimeNode)                          \
1856   declare_c2_type(CallLeafNoFPNode, CallLeafNode)                         \
1857   declare_c2_type(AllocateNode, CallNode)                                 \
1858   declare_c2_type(AllocateArrayNode, AllocateNode)                        \
1859   declare_c2_type(LockNode, AbstractLockNode)                             \
1860   declare_c2_type(UnlockNode, AbstractLockNode)                           \
1861   declare_c2_type(FastLockNode, CmpNode)                                  \
1862   declare_c2_type(FastUnlockNode, CmpNode)                                \
1863   declare_c2_type(RegionNode, Node)                                       \
1864   declare_c2_type(JProjNode, ProjNode)                                    \
1865   declare_c2_type(PhiNode, TypeNode)                                      \
1866   declare_c2_type(GotoNode, Node)                                         \
1867   declare_c2_type(CProjNode, ProjNode)                                    \
1868   declare_c2_type(MultiBranchNode, MultiNode)                             \
1869   declare_c2_type(IfNode, MultiBranchNode)                                \
1870   declare_c2_type(IfTrueNode, CProjNode)                                  \
1871   declare_c2_type(IfFalseNode, CProjNode)                                 \
1872   declare_c2_type(PCTableNode, MultiBranchNode)                           \
1873   declare_c2_type(JumpNode, PCTableNode)                                  \
1874   declare_c2_type(JumpProjNode, JProjNode)                                \
1875   declare_c2_type(CatchNode, PCTableNode)                                 \
1876   declare_c2_type(CatchProjNode, CProjNode)                               \
1877   declare_c2_type(CreateExNode, TypeNode)                                 \
1878   declare_c2_type(ClearArrayNode, Node)                                   \
1879   declare_c2_type(NeverBranchNode, MultiBranchNode)                       \
1880   declare_c2_type(ConNode, TypeNode)                                      \
1881   declare_c2_type(ConINode, ConNode)                                      \
1882   declare_c2_type(ConPNode, ConNode)                                      \
1883   declare_c2_type(ConNNode, ConNode)                                      \
1884   declare_c2_type(ConLNode, ConNode)                                      \
1885   declare_c2_type(ConFNode, ConNode)                                      \
1886   declare_c2_type(ConDNode, ConNode)                                      \
1887   declare_c2_type(BinaryNode, Node)                                       \
1888   declare_c2_type(CMoveNode, TypeNode)                                    \
1889   declare_c2_type(CMoveDNode, CMoveNode)                                  \
1890   declare_c2_type(CMoveFNode, CMoveNode)                                  \
1891   declare_c2_type(CMoveINode, CMoveNode)                                  \
1892   declare_c2_type(CMoveLNode, CMoveNode)                                  \
1893   declare_c2_type(CMovePNode, CMoveNode)                                  \
1894   declare_c2_type(CMoveNNode, CMoveNode)                                  \
1895   declare_c2_type(EncodePNode, TypeNode)                                  \
1896   declare_c2_type(DecodeNNode, TypeNode)                                  \
1897   declare_c2_type(EncodePKlassNode, TypeNode)                             \
1898   declare_c2_type(DecodeNKlassNode, TypeNode)                             \
1899   declare_c2_type(ConstraintCastNode, TypeNode)                           \
1900   declare_c2_type(CastIINode, ConstraintCastNode)                         \
1901   declare_c2_type(CastPPNode, ConstraintCastNode)                         \
1902   declare_c2_type(CheckCastPPNode, TypeNode)                              \
1903   declare_c2_type(Conv2BNode, Node)                                       \
1904   declare_c2_type(ConvD2FNode, Node)                                      \
1905   declare_c2_type(ConvD2INode, Node)                                      \
1906   declare_c2_type(ConvD2LNode, Node)                                      \
1907   declare_c2_type(ConvF2DNode, Node)                                      \
1908   declare_c2_type(ConvF2INode, Node)                                      \
1909   declare_c2_type(ConvF2LNode, Node)                                      \
1910   declare_c2_type(ConvI2DNode, Node)                                      \
1911   declare_c2_type(ConvI2FNode, Node)                                      \
1912   declare_c2_type(ConvI2LNode, TypeNode)                                  \
1913   declare_c2_type(ConvL2DNode, Node)                                      \
1914   declare_c2_type(ConvL2FNode, Node)                                      \
1915   declare_c2_type(ConvL2INode, Node)                                      \
1916   declare_c2_type(CastX2PNode, Node)                                      \
1917   declare_c2_type(CastP2XNode, Node)                                      \
1918   declare_c2_type(MemBarNode, MultiNode)                                  \
1919   declare_c2_type(MemBarAcquireNode, MemBarNode)                          \
1920   declare_c2_type(MemBarReleaseNode, MemBarNode)                          \
1921   declare_c2_type(LoadFenceNode, MemBarNode)                              \
1922   declare_c2_type(StoreFenceNode, MemBarNode)                             \
1923   declare_c2_type(MemBarVolatileNode, MemBarNode)                         \
1924   declare_c2_type(MemBarCPUOrderNode, MemBarNode)                         \
1925   declare_c2_type(OnSpinWaitNode, MemBarNode)                             \
1926   declare_c2_type(InitializeNode, MemBarNode)                             \
1927   declare_c2_type(ThreadLocalNode, Node)                                  \
1928   declare_c2_type(Opaque1Node, Node)                                      \
1929   declare_c2_type(Opaque2Node, Node)                                      \
1930   declare_c2_type(PartialSubtypeCheckNode, Node)                          \
1931   declare_c2_type(MoveI2FNode, Node)                                      \
1932   declare_c2_type(MoveL2DNode, Node)                                      \
1933   declare_c2_type(MoveF2INode, Node)                                      \
1934   declare_c2_type(MoveD2LNode, Node)                                      \
1935   declare_c2_type(DivINode, Node)                                         \
1936   declare_c2_type(DivLNode, Node)                                         \
1937   declare_c2_type(DivFNode, Node)                                         \
1938   declare_c2_type(DivDNode, Node)                                         \
1939   declare_c2_type(ModINode, Node)                                         \
1940   declare_c2_type(ModLNode, Node)                                         \
1941   declare_c2_type(ModFNode, Node)                                         \
1942   declare_c2_type(ModDNode, Node)                                         \
1943   declare_c2_type(DivModNode, MultiNode)                                  \
1944   declare_c2_type(DivModINode, DivModNode)                                \
1945   declare_c2_type(DivModLNode, DivModNode)                                \
1946   declare_c2_type(BoxLockNode, Node)                                      \
1947   declare_c2_type(LoopNode, RegionNode)                                   \
1948   declare_c2_type(CountedLoopNode, LoopNode)                              \
1949   declare_c2_type(CountedLoopEndNode, IfNode)                             \
1950   declare_c2_type(MachNode, Node)                                         \
1951   declare_c2_type(MachIdealNode, MachNode)                                \
1952   declare_c2_type(MachTypeNode, MachNode)                                 \
1953   declare_c2_type(MachBreakpointNode, MachIdealNode)                      \
1954   declare_c2_type(MachUEPNode, MachIdealNode)                             \
1955   declare_c2_type(MachPrologNode, MachIdealNode)                          \
1956   declare_c2_type(MachEpilogNode, MachIdealNode)                          \
1957   declare_c2_type(MachNopNode, MachIdealNode)                             \
1958   declare_c2_type(MachSpillCopyNode, MachIdealNode)                       \
1959   declare_c2_type(MachNullCheckNode, MachIdealNode)                       \
1960   declare_c2_type(MachProjNode, ProjNode)                                 \
1961   declare_c2_type(MachIfNode, MachNode)                                   \
1962   declare_c2_type(MachFastLockNode, MachNode)                             \
1963   declare_c2_type(MachReturnNode, MachNode)                               \
1964   declare_c2_type(MachSafePointNode, MachReturnNode)                      \
1965   declare_c2_type(MachCallNode, MachSafePointNode)                        \
1966   declare_c2_type(MachCallJavaNode, MachCallNode)                         \
1967   declare_c2_type(MachCallStaticJavaNode, MachCallJavaNode)               \
1968   declare_c2_type(MachCallDynamicJavaNode, MachCallJavaNode)              \
1969   declare_c2_type(MachCallRuntimeNode, MachCallNode)                      \
1970   declare_c2_type(MachHaltNode, MachReturnNode)                           \
1971   declare_c2_type(MachTempNode, MachNode)                                 \
1972   declare_c2_type(MemNode, Node)                                          \
1973   declare_c2_type(MergeMemNode, Node)                                     \
1974   declare_c2_type(LoadNode, MemNode)                                      \
1975   declare_c2_type(LoadBNode, LoadNode)                                    \
1976   declare_c2_type(LoadUSNode, LoadNode)                                   \
1977   declare_c2_type(LoadINode, LoadNode)                                    \
1978   declare_c2_type(LoadRangeNode, LoadINode)                               \
1979   declare_c2_type(LoadLNode, LoadNode)                                    \
1980   declare_c2_type(LoadL_unalignedNode, LoadLNode)                         \
1981   declare_c2_type(LoadFNode, LoadNode)                                    \
1982   declare_c2_type(LoadDNode, LoadNode)                                    \
1983   declare_c2_type(LoadD_unalignedNode, LoadDNode)                         \
1984   declare_c2_type(LoadPNode, LoadNode)                                    \
1985   declare_c2_type(LoadNNode, LoadNode)                                    \
1986   declare_c2_type(LoadKlassNode, LoadPNode)                               \
1987   declare_c2_type(LoadNKlassNode, LoadNNode)                              \
1988   declare_c2_type(LoadSNode, LoadNode)                                    \
1989   declare_c2_type(StoreNode, MemNode)                                     \
1990   declare_c2_type(StoreBNode, StoreNode)                                  \
1991   declare_c2_type(StoreCNode, StoreNode)                                  \
1992   declare_c2_type(StoreINode, StoreNode)                                  \
1993   declare_c2_type(StoreLNode, StoreNode)                                  \
1994   declare_c2_type(StoreFNode, StoreNode)                                  \
1995   declare_c2_type(StoreDNode, StoreNode)                                  \
1996   declare_c2_type(StorePNode, StoreNode)                                  \
1997   declare_c2_type(StoreNNode, StoreNode)                                  \
1998   declare_c2_type(StoreNKlassNode, StoreNode)                             \
1999   declare_c2_type(StoreCMNode, StoreNode)                                 \
2000   declare_c2_type(LoadPLockedNode, LoadPNode)                             \
2001   declare_c2_type(SCMemProjNode, ProjNode)                                \
2002   declare_c2_type(LoadStoreNode, Node)                                    \
2003   declare_c2_type(StorePConditionalNode, LoadStoreNode)                   \
2004   declare_c2_type(StoreLConditionalNode, LoadStoreNode)                   \
2005   declare_c2_type(CompareAndSwapLNode, LoadStoreNode)                     \
2006   declare_c2_type(CompareAndSwapINode, LoadStoreNode)                     \
2007   declare_c2_type(CompareAndSwapPNode, LoadStoreNode)                     \
2008   declare_c2_type(CompareAndSwapNNode, LoadStoreNode)                     \
2009   declare_c2_type(MulNode, Node)                                          \
2010   declare_c2_type(MulINode, MulNode)                                      \
2011   declare_c2_type(MulLNode, MulNode)                                      \
2012   declare_c2_type(MulFNode, MulNode)                                      \
2013   declare_c2_type(MulDNode, MulNode)                                      \
2014   declare_c2_type(MulHiLNode, Node)                                       \
2015   declare_c2_type(AndINode, MulINode)                                     \
2016   declare_c2_type(AndLNode, MulLNode)                                     \
2017   declare_c2_type(LShiftINode, Node)                                      \
2018   declare_c2_type(LShiftLNode, Node)                                      \
2019   declare_c2_type(RShiftINode, Node)                                      \
2020   declare_c2_type(RShiftLNode, Node)                                      \
2021   declare_c2_type(URShiftINode, Node)                                     \
2022   declare_c2_type(URShiftLNode, Node)                                     \
2023   declare_c2_type(MultiNode, Node)                                        \
2024   declare_c2_type(ProjNode, Node)                                         \
2025   declare_c2_type(TypeNode, Node)                                         \
2026   declare_c2_type(NodeHash, StackObj)                                     \
2027   declare_c2_type(RootNode, LoopNode)                                     \
2028   declare_c2_type(HaltNode, Node)                                         \
2029   declare_c2_type(SubNode, Node)                                          \
2030   declare_c2_type(SubINode, SubNode)                                      \
2031   declare_c2_type(SubLNode, SubNode)                                      \
2032   declare_c2_type(SubFPNode, SubNode)                                     \
2033   declare_c2_type(SubFNode, SubFPNode)                                    \
2034   declare_c2_type(SubDNode, SubFPNode)                                    \
2035   declare_c2_type(CmpNode, SubNode)                                       \
2036   declare_c2_type(CmpINode, CmpNode)                                      \
2037   declare_c2_type(CmpUNode, CmpNode)                                      \
2038   declare_c2_type(CmpPNode, CmpNode)                                      \
2039   declare_c2_type(CmpNNode, CmpNode)                                      \
2040   declare_c2_type(CmpLNode, CmpNode)                                      \
2041   declare_c2_type(CmpL3Node, CmpLNode)                                    \
2042   declare_c2_type(CmpFNode, CmpNode)                                      \
2043   declare_c2_type(CmpF3Node, CmpFNode)                                    \
2044   declare_c2_type(CmpDNode, CmpNode)                                      \
2045   declare_c2_type(CmpD3Node, CmpDNode)                                    \
2046   declare_c2_type(BoolNode, Node)                                         \
2047   declare_c2_type(AbsNode, Node)                                          \
2048   declare_c2_type(AbsINode, AbsNode)                                      \
2049   declare_c2_type(AbsFNode, AbsNode)                                      \
2050   declare_c2_type(AbsDNode, AbsNode)                                      \
2051   declare_c2_type(CmpLTMaskNode, Node)                                    \
2052   declare_c2_type(NegNode, Node)                                          \
2053   declare_c2_type(NegFNode, NegNode)                                      \
2054   declare_c2_type(NegDNode, NegNode)                                      \
2055   declare_c2_type(CosDNode, Node)                                         \
2056   declare_c2_type(SinDNode, Node)                                         \
2057   declare_c2_type(TanDNode, Node)                                         \
2058   declare_c2_type(AtanDNode, Node)                                        \
2059   declare_c2_type(SqrtDNode, Node)                                        \
2060   declare_c2_type(Log10DNode, Node)                                       \
2061   declare_c2_type(PowDNode, Node)                                         \
2062   declare_c2_type(ReverseBytesINode, Node)                                \
2063   declare_c2_type(ReverseBytesLNode, Node)                                \
2064   declare_c2_type(ReductionNode, Node)                                    \
2065   declare_c2_type(VectorNode, Node)                                       \
2066   declare_c2_type(AddVBNode, VectorNode)                                  \
2067   declare_c2_type(AddVSNode, VectorNode)                                  \
2068   declare_c2_type(AddVINode, VectorNode)                                  \
2069   declare_c2_type(AddReductionVINode, ReductionNode)                      \
2070   declare_c2_type(AddVLNode, VectorNode)                                  \
2071   declare_c2_type(AddReductionVLNode, ReductionNode)                      \
2072   declare_c2_type(AddVFNode, VectorNode)                                  \
2073   declare_c2_type(AddReductionVFNode, ReductionNode)                      \
2074   declare_c2_type(AddVDNode, VectorNode)                                  \
2075   declare_c2_type(AddReductionVDNode, ReductionNode)                      \
2076   declare_c2_type(SubVBNode, VectorNode)                                  \
2077   declare_c2_type(SubVSNode, VectorNode)                                  \
2078   declare_c2_type(SubVINode, VectorNode)                                  \
2079   declare_c2_type(SubVLNode, VectorNode)                                  \
2080   declare_c2_type(SubVFNode, VectorNode)                                  \
2081   declare_c2_type(SubVDNode, VectorNode)                                  \
2082   declare_c2_type(MulVSNode, VectorNode)                                  \
2083   declare_c2_type(MulVLNode, VectorNode)                                  \
2084   declare_c2_type(MulReductionVLNode, ReductionNode)                      \
2085   declare_c2_type(MulVINode, VectorNode)                                  \
2086   declare_c2_type(MulReductionVINode, ReductionNode)                      \
2087   declare_c2_type(MulVFNode, VectorNode)                                  \
2088   declare_c2_type(MulReductionVFNode, ReductionNode)                      \
2089   declare_c2_type(MulVDNode, VectorNode)                                  \
2090   declare_c2_type(CMoveVDNode, VectorNode)                                \
2091   declare_c2_type(MulReductionVDNode, ReductionNode)                      \
2092   declare_c2_type(DivVFNode, VectorNode)                                  \
2093   declare_c2_type(DivVDNode, VectorNode)                                  \
2094   declare_c2_type(LShiftVBNode, VectorNode)                               \
2095   declare_c2_type(LShiftVSNode, VectorNode)                               \
2096   declare_c2_type(LShiftVINode, VectorNode)                               \
2097   declare_c2_type(LShiftVLNode, VectorNode)                               \
2098   declare_c2_type(RShiftVBNode, VectorNode)                               \
2099   declare_c2_type(RShiftVSNode, VectorNode)                               \
2100   declare_c2_type(RShiftVINode, VectorNode)                               \
2101   declare_c2_type(RShiftVLNode, VectorNode)                               \
2102   declare_c2_type(URShiftVBNode, VectorNode)                              \
2103   declare_c2_type(URShiftVSNode, VectorNode)                              \
2104   declare_c2_type(URShiftVINode, VectorNode)                              \
2105   declare_c2_type(URShiftVLNode, VectorNode)                              \
2106   declare_c2_type(AndVNode, VectorNode)                                   \
2107   declare_c2_type(OrVNode, VectorNode)                                    \
2108   declare_c2_type(XorVNode, VectorNode)                                   \
2109   declare_c2_type(LoadVectorNode, LoadNode)                               \
2110   declare_c2_type(StoreVectorNode, StoreNode)                             \
2111   declare_c2_type(ReplicateBNode, VectorNode)                             \
2112   declare_c2_type(ReplicateSNode, VectorNode)                             \
2113   declare_c2_type(ReplicateINode, VectorNode)                             \
2114   declare_c2_type(ReplicateLNode, VectorNode)                             \
2115   declare_c2_type(ReplicateFNode, VectorNode)                             \
2116   declare_c2_type(ReplicateDNode, VectorNode)                             \
2117   declare_c2_type(PackNode, VectorNode)                                   \
2118   declare_c2_type(PackBNode, PackNode)                                    \
2119   declare_c2_type(PackSNode, PackNode)                                    \
2120   declare_c2_type(PackINode, PackNode)                                    \
2121   declare_c2_type(PackLNode, PackNode)                                    \
2122   declare_c2_type(PackFNode, PackNode)                                    \
2123   declare_c2_type(PackDNode, PackNode)                                    \
2124   declare_c2_type(Pack2LNode, PackNode)                                   \
2125   declare_c2_type(Pack2DNode, PackNode)                                   \
2126   declare_c2_type(ExtractNode, Node)                                      \
2127   declare_c2_type(ExtractBNode, ExtractNode)                              \
2128   declare_c2_type(ExtractUBNode, ExtractNode)                             \
2129   declare_c2_type(ExtractCNode, ExtractNode)                              \
2130   declare_c2_type(ExtractSNode, ExtractNode)                              \
2131   declare_c2_type(ExtractINode, ExtractNode)                              \
2132   declare_c2_type(ExtractLNode, ExtractNode)                              \
2133   declare_c2_type(ExtractFNode, ExtractNode)                              \
2134   declare_c2_type(ExtractDNode, ExtractNode)                              \
2135   declare_c2_type(OverflowNode, CmpNode)                                  \
2136   declare_c2_type(OverflowINode, OverflowNode)                            \
2137   declare_c2_type(OverflowAddINode, OverflowINode)                        \
2138   declare_c2_type(OverflowSubINode, OverflowINode)                        \
2139   declare_c2_type(OverflowMulINode, OverflowINode)                        \
2140   declare_c2_type(OverflowLNode, OverflowNode)                            \
2141   declare_c2_type(OverflowAddLNode, OverflowLNode)                        \
2142   declare_c2_type(OverflowSubLNode, OverflowLNode)                        \
2143   declare_c2_type(OverflowMulLNode, OverflowLNode)                        \
2144                                                                           \
2145   /*********************/                                                 \
2146   /* Adapter Blob Entries */                                              \
2147   /*********************/                                                 \
2148   declare_toplevel_type(AdapterHandlerEntry)                              \
2149   declare_toplevel_type(AdapterHandlerEntry*)                             \
2150                                                                           \
2151   /*********************/                                                 \
2152   /* CI */                                                                \
2153   /*********************/                                                 \
2154   declare_toplevel_type(ciEnv)                                            \
2155   declare_toplevel_type(ciObjectFactory)                                  \
2156   declare_toplevel_type(ciConstant)                                       \
2157   declare_toplevel_type(ciField)                                          \
2158   declare_toplevel_type(ciSymbol)                                         \
2159   declare_toplevel_type(ciBaseObject)                                     \
2160   declare_type(ciObject, ciBaseObject)                                    \
2161   declare_type(ciInstance, ciObject)                                      \
2162   declare_type(ciMetadata, ciBaseObject)                                  \
2163   declare_type(ciMethod, ciMetadata)                                      \
2164   declare_type(ciMethodData, ciMetadata)                                  \
2165   declare_type(ciType, ciMetadata)                                        \
2166   declare_type(ciKlass, ciType)                                           \
2167   declare_type(ciInstanceKlass, ciKlass)                                  \
2168   declare_type(ciArrayKlass, ciKlass)                                     \
2169   declare_type(ciTypeArrayKlass, ciArrayKlass)                            \
2170   declare_type(ciObjArrayKlass, ciArrayKlass)                             \
2171                                                                           \
2172   /********************/                                                  \
2173   /* -XX flags        */                                                  \
2174   /********************/                                                  \
2175                                                                           \
2176   declare_toplevel_type(Flag)                                             \
2177   declare_toplevel_type(Flag*)                                            \
2178                                                                           \
2179   /********************/                                                  \
2180   /* JVMTI            */                                                  \
2181   /********************/                                                  \
2182                                                                           \
2183   declare_toplevel_type(JvmtiExport)                                      \
2184                                                                           \
2185   /********************/                                                  \
2186   /* JDK/VM version   */                                                  \
2187   /********************/                                                  \
2188                                                                           \
2189   declare_toplevel_type(Abstract_VM_Version)                              \
2190   declare_toplevel_type(JDK_Version)                                      \
2191                                                                           \
2192   /*************/                                                         \
2193   /* Arguments */                                                         \
2194   /*************/                                                         \
2195                                                                           \
2196   declare_toplevel_type(Arguments)                                        \
2197                                                                           \
2198   /***************/                                                       \
2199   /* Other types */                                                       \
2200   /***************/                                                       \
2201                                                                           \
2202   /* all enum types */                                                    \
2203                                                                           \
2204    declare_integer_type(Bytecodes::Code)                                  \
2205    declare_integer_type(Generation::Name)                                 \
2206    declare_integer_type(InstanceKlass::ClassState)                        \
2207    declare_integer_type(JavaThreadState)                                  \
2208    declare_integer_type(Location::Type)                                   \
2209    declare_integer_type(Location::Where)                                  \
2210    declare_integer_type(Flag::Flags)                                      \
2211    COMPILER2_PRESENT(declare_integer_type(OptoReg::Name))                 \
2212                                                                           \
2213    declare_toplevel_type(CHeapObj&lt;mtInternal&gt;)                            \
2214             declare_type(Array&lt;int&gt;, MetaspaceObj)                        \
2215             declare_type(Array&lt;u1&gt;, MetaspaceObj)                         \
2216             declare_type(Array&lt;u2&gt;, MetaspaceObj)                         \
2217             declare_type(Array&lt;Klass*&gt;, MetaspaceObj)                     \
2218             declare_type(Array&lt;Method*&gt;, MetaspaceObj)                    \
2219                                                                           \
2220    declare_integer_type(AccessFlags)  /* FIXME: wrong type (not integer) */\
2221   declare_toplevel_type(address)      /* FIXME: should this be an integer type? */\
2222    declare_integer_type(BasicType)   /* FIXME: wrong type (not integer) */\
2223   declare_toplevel_type(BreakpointInfo)                                   \
2224   declare_toplevel_type(BreakpointInfo*)                                  \
2225   declare_toplevel_type(CodeBlob*)                                        \
2226   declare_toplevel_type(CompressedWriteStream*)                           \
2227   declare_toplevel_type(ConstantPoolCacheEntry)                           \
2228   declare_toplevel_type(elapsedTimer)                                     \
2229   declare_toplevel_type(frame)                                            \
2230   declare_toplevel_type(intptr_t*)                                        \
2231    declare_unsigned_integer_type(InvocationCounter) /* FIXME: wrong type (not integer) */ \
2232   declare_toplevel_type(JavaThread*)                                      \
2233   declare_toplevel_type(java_lang_Class)                                  \
2234   declare_integer_type(JavaThread::AsyncRequests)                         \
2235   declare_toplevel_type(jbyte*)                                           \
2236   declare_toplevel_type(jbyte**)                                          \
2237   declare_toplevel_type(jint*)                                            \
2238   declare_toplevel_type(jniIdMapBase*)                                    \
2239   declare_unsigned_integer_type(juint)                                    \
2240   declare_unsigned_integer_type(julong)                                   \
2241   declare_toplevel_type(JNIHandleBlock*)                                  \
2242   declare_toplevel_type(JNIid)                                            \
2243   declare_toplevel_type(JNIid*)                                           \
2244   declare_toplevel_type(jmethodID*)                                       \
2245   declare_toplevel_type(Mutex*)                                           \
2246   declare_toplevel_type(nmethod*)                                         \
2247   COMPILER2_PRESENT(declare_unsigned_integer_type(node_idx_t))            \
2248   declare_toplevel_type(ObjectMonitor*)                                   \
2249   declare_toplevel_type(oop*)                                             \
2250   declare_toplevel_type(OopMap**)                                         \
2251   declare_toplevel_type(OopMapCache*)                                     \
2252   declare_toplevel_type(OopMapSet*)                                       \
2253   declare_toplevel_type(VMReg)                                            \
2254   declare_toplevel_type(OSThread*)                                        \
2255    declare_integer_type(ReferenceType)                                    \
2256   declare_toplevel_type(StubQueue*)                                       \
2257   declare_toplevel_type(Thread*)                                          \
2258   declare_toplevel_type(Universe)                                         \
2259   declare_toplevel_type(os)                                               \
2260   declare_toplevel_type(vframeArray)                                      \
2261   declare_toplevel_type(vframeArrayElement)                               \
2262   declare_toplevel_type(Annotations*)                                     \
2263                                                                           \
2264   /***************/                                                       \
2265   /* Miscellaneous types */                                               \
2266   /***************/                                                       \
2267                                                                           \
2268   /* freelist */                                                          \
2269   declare_toplevel_type(FreeChunk*)                                       \
2270   declare_toplevel_type(AdaptiveFreeList&lt;FreeChunk&gt;*)                     \
2271   declare_toplevel_type(AdaptiveFreeList&lt;FreeChunk&gt;)
2272 
2273 
2274 //--------------------------------------------------------------------------------
2275 // VM_INT_CONSTANTS
2276 //
2277 // This table contains integer constants required over in the
2278 // serviceability agent. The "declare_constant" macro is used for all
2279 // enums, etc., while "declare_preprocessor_constant" must be used for
2280 // all #defined constants.
2281 
2282 #define VM_INT_CONSTANTS(declare_constant,                                \
2283                          declare_preprocessor_constant,                   \
2284                          declare_c1_constant,                             \
2285                          declare_c2_constant,                             \
2286                          declare_c2_preprocessor_constant)                \
2287                                                                           \
2288   /******************/                                                    \
2289   /* Useful globals */                                                    \
2290   /******************/                                                    \
2291                                                                           \
2292   declare_preprocessor_constant("ASSERT", DEBUG_ONLY(1) NOT_DEBUG(0))     \
2293                                                                           \
2294   /**************/                                                        \
2295   /* Stack bias */                                                        \
2296   /**************/                                                        \
2297                                                                           \
2298   declare_preprocessor_constant("STACK_BIAS", STACK_BIAS)                 \
2299                                                                           \
2300   /****************/                                                      \
2301   /* Object sizes */                                                      \
2302   /****************/                                                      \
2303                                                                           \
2304   declare_constant(oopSize)                                               \
2305   declare_constant(LogBytesPerWord)                                       \
2306   declare_constant(BytesPerWord)                                          \
2307   declare_constant(BytesPerLong)                                          \
2308                                                                           \
2309   declare_constant(LogKlassAlignmentInBytes)                              \
2310                                                                           \
2311   /********************************************/                          \
2312   /* Generation and Space Hierarchy Constants */                          \
2313   /********************************************/                          \
2314                                                                           \
2315   declare_constant(ageTable::table_size)                                  \
2316                                                                           \
2317   declare_constant(BarrierSet::ModRef)                                    \
2318   declare_constant(BarrierSet::CardTableModRef)                           \
2319   declare_constant(BarrierSet::CardTableForRS)                            \
2320   declare_constant(BarrierSet::CardTableExtension)                        \
2321   declare_constant(BarrierSet::G1SATBCT)                                  \
2322   declare_constant(BarrierSet::G1SATBCTLogging)                           \
2323                                                                           \
2324   declare_constant(BlockOffsetSharedArray::LogN)                          \
2325   declare_constant(BlockOffsetSharedArray::LogN_words)                    \
2326   declare_constant(BlockOffsetSharedArray::N_bytes)                       \
2327   declare_constant(BlockOffsetSharedArray::N_words)                       \
2328                                                                           \
2329   declare_constant(BlockOffsetArray::N_words)                             \
2330                                                                           \
2331   declare_constant(CardTableModRefBS::clean_card)                         \
2332   declare_constant(CardTableModRefBS::last_card)                          \
2333   declare_constant(CardTableModRefBS::dirty_card)                         \
2334   declare_constant(CardTableModRefBS::Precise)                            \
2335   declare_constant(CardTableModRefBS::ObjHeadPreciseArray)                \
2336   declare_constant(CardTableModRefBS::card_shift)                         \
2337   declare_constant(CardTableModRefBS::card_size)                          \
2338   declare_constant(CardTableModRefBS::card_size_in_words)                 \
2339                                                                           \
2340   declare_constant(CardTableRS::youngergen_card)                          \
2341                                                                           \
2342   declare_constant(G1SATBCardTableModRefBS::g1_young_gen)                 \
2343                                                                           \
2344   declare_constant(CollectedHeap::GenCollectedHeap)                       \
2345   declare_constant(CollectedHeap::ParallelScavengeHeap)                   \
2346   declare_constant(CollectedHeap::G1CollectedHeap)                        \
2347                                                                           \
2348   /* constants from Generation::Name enum */                              \
2349                                                                           \
2350   declare_constant(Generation::DefNew)                                    \
2351   declare_constant(Generation::MarkSweepCompact)                          \
2352   declare_constant(Generation::Other)                                     \
2353                                                                           \
2354   declare_constant(Generation::LogOfGenGrain)                             \
2355   declare_constant(Generation::GenGrain)                                  \
2356                                                                           \
2357   declare_constant(HeapWordSize)                                          \
2358   declare_constant(LogHeapWordSize)                                       \
2359                                                                           \
2360                                                                           \
2361   /************************/                                              \
2362   /* PerfMemory - jvmstat */                                              \
2363   /************************/                                              \
2364                                                                           \
2365   declare_preprocessor_constant("PERFDATA_MAJOR_VERSION", PERFDATA_MAJOR_VERSION) \
2366   declare_preprocessor_constant("PERFDATA_MINOR_VERSION", PERFDATA_MINOR_VERSION) \
2367   declare_preprocessor_constant("PERFDATA_BIG_ENDIAN", PERFDATA_BIG_ENDIAN)       \
2368   declare_preprocessor_constant("PERFDATA_LITTLE_ENDIAN", PERFDATA_LITTLE_ENDIAN) \
2369                                                                           \
2370   /***********************************/                                   \
2371   /* LoaderConstraintTable constants */                                   \
2372   /***********************************/                                   \
2373                                                                           \
2374   declare_constant(LoaderConstraintTable::_loader_constraint_size)        \
2375   declare_constant(LoaderConstraintTable::_nof_buckets)                   \
2376                                                                           \
2377   /************************************************************/          \
2378   /* HotSpot specific JVM_ACC constants from global anon enum */          \
2379   /************************************************************/          \
2380                                                                           \
2381   declare_constant(JVM_ACC_WRITTEN_FLAGS)                                 \
2382   declare_constant(JVM_ACC_MONITOR_MATCH)                                 \
2383   declare_constant(JVM_ACC_HAS_MONITOR_BYTECODES)                         \
2384   declare_constant(JVM_ACC_HAS_LOOPS)                                     \
2385   declare_constant(JVM_ACC_LOOPS_FLAG_INIT)                               \
2386   declare_constant(JVM_ACC_QUEUED)                                        \
2387   declare_constant(JVM_ACC_NOT_C2_OSR_COMPILABLE)                         \
2388   declare_constant(JVM_ACC_HAS_LINE_NUMBER_TABLE)                         \
2389   declare_constant(JVM_ACC_HAS_CHECKED_EXCEPTIONS)                        \
2390   declare_constant(JVM_ACC_HAS_JSRS)                                      \
2391   declare_constant(JVM_ACC_IS_OLD)                                        \
2392   declare_constant(JVM_ACC_IS_OBSOLETE)                                   \
2393   declare_constant(JVM_ACC_IS_PREFIXED_NATIVE)                            \
2394   declare_constant(JVM_ACC_HAS_MIRANDA_METHODS)                           \
2395   declare_constant(JVM_ACC_HAS_VANILLA_CONSTRUCTOR)                       \
2396   declare_constant(JVM_ACC_HAS_FINALIZER)                                 \
2397   declare_constant(JVM_ACC_IS_CLONEABLE)                                  \
2398   declare_constant(JVM_ACC_HAS_LOCAL_VARIABLE_TABLE)                      \
2399   declare_constant(JVM_ACC_PROMOTED_FLAGS)                                \
2400   declare_constant(JVM_ACC_FIELD_ACCESS_WATCHED)                          \
2401   declare_constant(JVM_ACC_FIELD_MODIFICATION_WATCHED)                    \
2402   declare_constant(JVM_ACC_FIELD_INTERNAL)                                \
2403   declare_constant(JVM_ACC_FIELD_STABLE)                                  \
2404   declare_constant(JVM_ACC_FIELD_HAS_GENERIC_SIGNATURE)                   \
2405                                                                           \
2406   declare_constant(JVM_CONSTANT_Utf8)                                     \
2407   declare_constant(JVM_CONSTANT_Unicode)                                  \
2408   declare_constant(JVM_CONSTANT_Integer)                                  \
2409   declare_constant(JVM_CONSTANT_Float)                                    \
2410   declare_constant(JVM_CONSTANT_Long)                                     \
2411   declare_constant(JVM_CONSTANT_Double)                                   \
2412   declare_constant(JVM_CONSTANT_Class)                                    \
2413   declare_constant(JVM_CONSTANT_String)                                   \
2414   declare_constant(JVM_CONSTANT_Fieldref)                                 \
2415   declare_constant(JVM_CONSTANT_Methodref)                                \
2416   declare_constant(JVM_CONSTANT_InterfaceMethodref)                       \
2417   declare_constant(JVM_CONSTANT_NameAndType)                              \
2418   declare_constant(JVM_CONSTANT_MethodHandle)                             \
2419   declare_constant(JVM_CONSTANT_MethodType)                               \
2420   declare_constant(JVM_CONSTANT_InvokeDynamic)                            \
2421   declare_constant(JVM_CONSTANT_ExternalMax)                              \
2422                                                                           \
2423   declare_constant(JVM_CONSTANT_Invalid)                                  \
2424   declare_constant(JVM_CONSTANT_InternalMin)                              \
2425   declare_constant(JVM_CONSTANT_UnresolvedClass)                          \
2426   declare_constant(JVM_CONSTANT_ClassIndex)                               \
2427   declare_constant(JVM_CONSTANT_StringIndex)                              \
2428   declare_constant(JVM_CONSTANT_UnresolvedClassInError)                   \
2429   declare_constant(JVM_CONSTANT_MethodHandleInError)                      \
2430   declare_constant(JVM_CONSTANT_MethodTypeInError)                        \
2431   declare_constant(JVM_CONSTANT_InternalMax)                              \
2432                                                                           \
2433   /*****************************/                                         \
2434   /* Thread::SuspendFlags enum */                                         \
2435   /*****************************/                                         \
2436                                                                           \
2437   declare_constant(Thread::_external_suspend)                             \
2438   declare_constant(Thread::_ext_suspended)                                \
2439   declare_constant(Thread::_has_async_exception)                          \
2440                                                                           \
2441   /*******************/                                                   \
2442   /* JavaThreadState */                                                   \
2443   /*******************/                                                   \
2444                                                                           \
2445   declare_constant(_thread_uninitialized)                                 \
2446   declare_constant(_thread_new)                                           \
2447   declare_constant(_thread_new_trans)                                     \
2448   declare_constant(_thread_in_native)                                     \
2449   declare_constant(_thread_in_native_trans)                               \
2450   declare_constant(_thread_in_vm)                                         \
2451   declare_constant(_thread_in_vm_trans)                                   \
2452   declare_constant(_thread_in_Java)                                       \
2453   declare_constant(_thread_in_Java_trans)                                 \
2454   declare_constant(_thread_blocked)                                       \
2455   declare_constant(_thread_blocked_trans)                                 \
2456                                                                           \
2457   /******************************/                                        \
2458   /* Klass misc. enum constants */                                        \
2459   /******************************/                                        \
2460                                                                           \
2461   declare_constant(Klass::_primary_super_limit)                           \
2462   declare_constant(Klass::_lh_neutral_value)                              \
2463   declare_constant(Klass::_lh_instance_slow_path_bit)                     \
2464   declare_constant(Klass::_lh_log2_element_size_shift)                    \
2465   declare_constant(Klass::_lh_log2_element_size_mask)                     \
2466   declare_constant(Klass::_lh_element_type_shift)                         \
2467   declare_constant(Klass::_lh_element_type_mask)                          \
2468   declare_constant(Klass::_lh_header_size_shift)                          \
2469   declare_constant(Klass::_lh_header_size_mask)                           \
2470   declare_constant(Klass::_lh_array_tag_shift)                            \
2471   declare_constant(Klass::_lh_array_tag_type_value)                       \
2472   declare_constant(Klass::_lh_array_tag_obj_value)                        \
2473                                                                           \
2474   /********************************/                                      \
2475   /* ConstMethod anon-enum */                                             \
2476   /********************************/                                      \
2477                                                                           \
2478   declare_constant(Method::_jfr_towrite)                                  \
2479   declare_constant(Method::_caller_sensitive)                             \
2480   declare_constant(Method::_force_inline)                                 \
2481   declare_constant(Method::_dont_inline)                                  \
2482   declare_constant(Method::_hidden)                                       \
2483                                                                           \
2484   declare_constant(Method::nonvirtual_vtable_index)                       \
2485                                                                           \
2486   declare_constant(Method::extra_stack_entries_for_jsr292)                \
2487                                                                           \
2488   declare_constant(ConstMethod::_has_linenumber_table)                    \
2489   declare_constant(ConstMethod::_has_checked_exceptions)                  \
2490   declare_constant(ConstMethod::_has_localvariable_table)                 \
2491   declare_constant(ConstMethod::_has_exception_table)                     \
2492   declare_constant(ConstMethod::_has_generic_signature)                   \
2493   declare_constant(ConstMethod::_has_method_parameters)                   \
2494   declare_constant(ConstMethod::_has_method_annotations)                  \
2495   declare_constant(ConstMethod::_has_parameter_annotations)               \
2496   declare_constant(ConstMethod::_has_default_annotations)                 \
2497   declare_constant(ConstMethod::_has_type_annotations)                    \
2498                                                                           \
2499   /**************/                                                        \
2500   /* DataLayout */                                                        \
2501   /**************/                                                        \
2502                                                                           \
2503   declare_constant(DataLayout::cell_size)                                 \
2504   declare_constant(DataLayout::no_tag)                                    \
2505   declare_constant(DataLayout::bit_data_tag)                              \
2506   declare_constant(DataLayout::counter_data_tag)                          \
2507   declare_constant(DataLayout::jump_data_tag)                             \
2508   declare_constant(DataLayout::receiver_type_data_tag)                    \
2509   declare_constant(DataLayout::virtual_call_data_tag)                     \
2510   declare_constant(DataLayout::ret_data_tag)                              \
2511   declare_constant(DataLayout::branch_data_tag)                           \
2512   declare_constant(DataLayout::multi_branch_data_tag)                     \
2513   declare_constant(DataLayout::arg_info_data_tag)                         \
2514   declare_constant(DataLayout::call_type_data_tag)                        \
2515   declare_constant(DataLayout::virtual_call_type_data_tag)                \
2516   declare_constant(DataLayout::parameters_type_data_tag)                  \
2517   declare_constant(DataLayout::speculative_trap_data_tag)                 \
2518                                                                           \
2519   /*************************************/                                 \
2520   /* InstanceKlass enum                */                                 \
2521   /*************************************/                                 \
2522                                                                           \
2523                                                                           \
2524   /*************************************/                                 \
2525   /* FieldInfo FieldOffset enum        */                                 \
2526   /*************************************/                                 \
2527                                                                           \
2528   declare_constant(FieldInfo::access_flags_offset)                        \
2529   declare_constant(FieldInfo::name_index_offset)                          \
2530   declare_constant(FieldInfo::signature_index_offset)                     \
2531   declare_constant(FieldInfo::initval_index_offset)                       \
2532   declare_constant(FieldInfo::low_packed_offset)                          \
2533   declare_constant(FieldInfo::high_packed_offset)                         \
2534   declare_constant(FieldInfo::field_slots)                                \
2535                                                                           \
2536   /*************************************/                                 \
2537   /* FieldInfo tag constants           */                                 \
2538   /*************************************/                                 \
2539                                                                           \
2540   declare_preprocessor_constant("FIELDINFO_TAG_SIZE", FIELDINFO_TAG_SIZE) \
2541   declare_preprocessor_constant("FIELDINFO_TAG_MASK", FIELDINFO_TAG_MASK) \
2542   declare_preprocessor_constant("FIELDINFO_TAG_OFFSET", FIELDINFO_TAG_OFFSET) \
2543                                                                           \
2544   /************************************************/                      \
2545   /* InstanceKlass InnerClassAttributeOffset enum */                      \
2546   /************************************************/                      \
2547                                                                           \
2548   declare_constant(InstanceKlass::inner_class_inner_class_info_offset)    \
2549   declare_constant(InstanceKlass::inner_class_outer_class_info_offset)    \
2550   declare_constant(InstanceKlass::inner_class_inner_name_offset)          \
2551   declare_constant(InstanceKlass::inner_class_access_flags_offset)        \
2552   declare_constant(InstanceKlass::inner_class_next_offset)                \
2553                                                                           \
2554   /*********************************/                                     \
2555   /* InstanceKlass ClassState enum */                                     \
2556   /*********************************/                                     \
2557                                                                           \
2558   declare_constant(InstanceKlass::allocated)                              \
2559   declare_constant(InstanceKlass::loaded)                                 \
2560   declare_constant(InstanceKlass::linked)                                 \
2561   declare_constant(InstanceKlass::being_initialized)                      \
2562   declare_constant(InstanceKlass::fully_initialized)                      \
2563   declare_constant(InstanceKlass::initialization_error)                   \
2564                                                                           \
2565   /*********************************/                                     \
2566   /* Symbol* - symbol max length */                                       \
2567   /*********************************/                                     \
2568                                                                           \
2569   declare_constant(Symbol::max_symbol_length)                             \
2570                                                                           \
2571   /***********************************************/                       \
2572   /* ConstantPool* layout enum for InvokeDynamic */                       \
2573   /***********************************************/                       \
2574                                                                           \
2575   declare_constant(ConstantPool::_indy_bsm_offset)                        \
2576   declare_constant(ConstantPool::_indy_argc_offset)                       \
2577   declare_constant(ConstantPool::_indy_argv_offset)                       \
2578   declare_constant(ConstantPool::CPCACHE_INDEX_TAG)                       \
2579                                                                           \
2580   /********************************/                                      \
2581   /* ConstantPoolCacheEntry enums */                                      \
2582   /********************************/                                      \
2583                                                                           \
2584   declare_constant(ConstantPoolCacheEntry::is_volatile_shift)             \
2585   declare_constant(ConstantPoolCacheEntry::is_final_shift)                \
2586   declare_constant(ConstantPoolCacheEntry::is_forced_virtual_shift)       \
2587   declare_constant(ConstantPoolCacheEntry::is_vfinal_shift)               \
2588   declare_constant(ConstantPoolCacheEntry::is_field_entry_shift)          \
2589   declare_constant(ConstantPoolCacheEntry::tos_state_shift)               \
2590                                                                           \
2591   /***************************************/                               \
2592   /* java_lang_Thread::ThreadStatus enum */                               \
2593   /***************************************/                               \
2594                                                                           \
2595   declare_constant(java_lang_Thread::NEW)                                 \
2596   declare_constant(java_lang_Thread::RUNNABLE)                            \
2597   declare_constant(java_lang_Thread::SLEEPING)                            \
2598   declare_constant(java_lang_Thread::IN_OBJECT_WAIT)                      \
2599   declare_constant(java_lang_Thread::IN_OBJECT_WAIT_TIMED)                \
2600   declare_constant(java_lang_Thread::PARKED)                              \
2601   declare_constant(java_lang_Thread::PARKED_TIMED)                        \
2602   declare_constant(java_lang_Thread::BLOCKED_ON_MONITOR_ENTER)            \
2603   declare_constant(java_lang_Thread::TERMINATED)                          \
2604                                                                           \
2605   /******************************/                                        \
2606   /* Debug info                 */                                        \
2607   /******************************/                                        \
2608                                                                           \
2609   declare_constant(Location::OFFSET_MASK)                                 \
2610   declare_constant(Location::OFFSET_SHIFT)                                \
2611   declare_constant(Location::TYPE_MASK)                                   \
2612   declare_constant(Location::TYPE_SHIFT)                                  \
2613   declare_constant(Location::WHERE_MASK)                                  \
2614   declare_constant(Location::WHERE_SHIFT)                                 \
2615                                                                           \
2616   /* constants from Location::Type enum  */                               \
2617                                                                           \
2618   declare_constant(Location::normal)                                      \
2619   declare_constant(Location::oop)                                         \
2620   declare_constant(Location::narrowoop)                                   \
2621   declare_constant(Location::int_in_long)                                 \
2622   declare_constant(Location::lng)                                         \
2623   declare_constant(Location::float_in_dbl)                                \
2624   declare_constant(Location::dbl)                                         \
2625   declare_constant(Location::addr)                                        \
2626   declare_constant(Location::invalid)                                     \
2627                                                                           \
2628   /* constants from Location::Where enum */                               \
2629                                                                           \
2630   declare_constant(Location::on_stack)                                    \
2631   declare_constant(Location::in_register)                                 \
2632                                                                           \
2633   declare_constant(Deoptimization::Reason_many)                           \
2634   declare_constant(Deoptimization::Reason_none)                           \
2635   declare_constant(Deoptimization::Reason_null_check)                     \
2636   declare_constant(Deoptimization::Reason_null_assert)                    \
2637   declare_constant(Deoptimization::Reason_range_check)                    \
2638   declare_constant(Deoptimization::Reason_class_check)                    \
2639   declare_constant(Deoptimization::Reason_array_check)                    \
2640   declare_constant(Deoptimization::Reason_intrinsic)                      \
2641   declare_constant(Deoptimization::Reason_bimorphic)                      \
2642   declare_constant(Deoptimization::Reason_unloaded)                       \
2643   declare_constant(Deoptimization::Reason_uninitialized)                  \
2644   declare_constant(Deoptimization::Reason_unreached)                      \
2645   declare_constant(Deoptimization::Reason_unhandled)                      \
2646   declare_constant(Deoptimization::Reason_constraint)                     \
2647   declare_constant(Deoptimization::Reason_div0_check)                     \
2648   declare_constant(Deoptimization::Reason_age)                            \
2649   declare_constant(Deoptimization::Reason_predicate)                      \
2650   declare_constant(Deoptimization::Reason_loop_limit_check)               \
2651   declare_constant(Deoptimization::Reason_speculate_class_check)          \
2652   declare_constant(Deoptimization::Reason_speculate_null_check)           \
2653   declare_constant(Deoptimization::Reason_rtm_state_change)               \
2654   declare_constant(Deoptimization::Reason_unstable_if)                    \
2655   declare_constant(Deoptimization::Reason_unstable_fused_if)              \
2656   declare_constant(Deoptimization::Reason_tenured)                        \
2657   declare_constant(Deoptimization::Reason_LIMIT)                          \
2658   declare_constant(Deoptimization::Reason_RECORDED_LIMIT)                 \
2659                                                                           \
2660   declare_constant(Deoptimization::Action_none)                           \
2661   declare_constant(Deoptimization::Action_maybe_recompile)                \
2662   declare_constant(Deoptimization::Action_reinterpret)                    \
2663   declare_constant(Deoptimization::Action_make_not_entrant)               \
2664   declare_constant(Deoptimization::Action_make_not_compilable)            \
2665   declare_constant(Deoptimization::Action_LIMIT)                          \
2666                                                                           \
2667   /***************************************************/                   \
2668   /* DEFAULT_CACHE_LINE_SIZE (globalDefinitions.hpp) */                   \
2669   /***************************************************/                   \
2670                                                                           \
2671   declare_constant(DEFAULT_CACHE_LINE_SIZE)                               \
2672                                                                           \
2673   declare_constant(Deoptimization::Unpack_deopt)                          \
2674   declare_constant(Deoptimization::Unpack_exception)                      \
2675   declare_constant(Deoptimization::Unpack_uncommon_trap)                  \
2676   declare_constant(Deoptimization::Unpack_reexecute)                      \
2677                                                                           \
2678   declare_constant(Deoptimization::_action_bits)                          \
2679   declare_constant(Deoptimization::_reason_bits)                          \
2680   declare_constant(Deoptimization::_debug_id_bits)                        \
2681   declare_constant(Deoptimization::_action_shift)                         \
2682   declare_constant(Deoptimization::_reason_shift)                         \
2683   declare_constant(Deoptimization::_debug_id_shift)                       \
2684                                                                           \
2685   /*********************/                                                 \
2686   /* Matcher (C2 only) */                                                 \
2687   /*********************/                                                 \
2688                                                                           \
2689   declare_c2_preprocessor_constant("Matcher::interpreter_frame_pointer_reg", Matcher::interpreter_frame_pointer_reg()) \
2690                                                                           \
2691   /*********************************************/                         \
2692   /* MethodCompilation (globalDefinitions.hpp) */                         \
2693   /*********************************************/                         \
2694                                                                           \
2695   declare_constant(InvocationEntryBci)                                    \
2696                                                                           \
2697   /*************/                                                         \
2698   /* CompLevel */                                                         \
2699   /*************/                                                         \
2700                                                                           \
2701   declare_constant(CompLevel_any)                                         \
2702   declare_constant(CompLevel_all)                                         \
2703   declare_constant(CompLevel_none)                                        \
2704   declare_constant(CompLevel_simple)                                      \
2705   declare_constant(CompLevel_limited_profile)                             \
2706   declare_constant(CompLevel_full_profile)                                \
2707   declare_constant(CompLevel_full_optimization)                           \
2708                                                                           \
2709   /***************/                                                       \
2710   /* OopMapValue */                                                       \
2711   /***************/                                                       \
2712                                                                           \
2713   declare_constant(OopMapValue::type_bits)                                \
2714   declare_constant(OopMapValue::register_bits)                            \
2715   declare_constant(OopMapValue::type_shift)                               \
2716   declare_constant(OopMapValue::register_shift)                           \
2717   declare_constant(OopMapValue::type_mask)                                \
2718   declare_constant(OopMapValue::type_mask_in_place)                       \
2719   declare_constant(OopMapValue::register_mask)                            \
2720   declare_constant(OopMapValue::register_mask_in_place)                   \
2721   declare_constant(OopMapValue::unused_value)                             \
2722   declare_constant(OopMapValue::oop_value)                                \
2723   declare_constant(OopMapValue::narrowoop_value)                          \
2724   declare_constant(OopMapValue::callee_saved_value)                       \
2725   declare_constant(OopMapValue::derived_oop_value)                        \
2726                                                                           \
2727   /******************/                                                    \
2728   /* JNIHandleBlock */                                                    \
2729   /******************/                                                    \
2730                                                                           \
2731   declare_constant(JNIHandleBlock::block_size_in_oops)                    \
2732                                                                           \
2733   /**********************/                                                \
2734   /* ObjectSynchronizer */                                                \
2735   /**********************/                                                \
2736                                                                           \
2737   declare_constant(ObjectSynchronizer::_BLOCKSIZE)                        \
2738                                                                           \
2739   /**********************/                                                \
2740   /* PcDesc             */                                                \
2741   /**********************/                                                \
2742                                                                           \
2743   declare_constant(PcDesc::PCDESC_reexecute)                              \
2744   declare_constant(PcDesc::PCDESC_is_method_handle_invoke)                \
2745   declare_constant(PcDesc::PCDESC_return_oop)                             \
2746                                                                           \
2747   /**********************/                                                \
2748   /* frame              */                                                \
2749   /**********************/                                                \
2750   NOT_ZERO(PPC64_ONLY(declare_constant(frame::entry_frame_locals_size)))  \
2751                                                                           \
2752   NOT_ZERO(X86_ONLY(declare_constant(frame::entry_frame_call_wrapper_offset)))      \
2753   declare_constant(frame::pc_return_offset)                               \
2754                                                                           \
2755   /*************/                                                         \
2756   /* vmSymbols */                                                         \
2757   /*************/                                                         \
2758                                                                           \
2759   declare_constant(vmSymbols::FIRST_SID)                                  \
2760   declare_constant(vmSymbols::SID_LIMIT)                                  \
2761                                                                           \
2762   /****************/                                                      \
2763   /* vmIntrinsics */                                                      \
2764   /****************/                                                      \
2765                                                                           \
2766   declare_constant(vmIntrinsics::_invokeBasic)                            \
2767   declare_constant(vmIntrinsics::_linkToVirtual)                          \
2768   declare_constant(vmIntrinsics::_linkToStatic)                           \
2769   declare_constant(vmIntrinsics::_linkToSpecial)                          \
2770   declare_constant(vmIntrinsics::_linkToInterface)                        \
2771                                                                           \
2772   /********************************/                                      \
2773   /* Calling convention constants */                                      \
2774   /********************************/                                      \
2775                                                                           \
2776   declare_constant(RegisterImpl::number_of_registers)                     \
2777   declare_constant(ConcreteRegisterImpl::number_of_registers)             \
2778   declare_preprocessor_constant("REG_COUNT", REG_COUNT)                \
2779   declare_c2_preprocessor_constant("SAVED_ON_ENTRY_REG_COUNT", SAVED_ON_ENTRY_REG_COUNT) \
2780   declare_c2_preprocessor_constant("C_SAVED_ON_ENTRY_REG_COUNT", C_SAVED_ON_ENTRY_REG_COUNT)
2781 
2782 
2783 //--------------------------------------------------------------------------------
2784 // VM_LONG_CONSTANTS
2785 //
2786 // This table contains long constants required over in the
2787 // serviceability agent. The "declare_constant" macro is used for all
2788 // enums, etc., while "declare_preprocessor_constant" must be used for
2789 // all #defined constants.
2790 
2791 #define VM_LONG_CONSTANTS(declare_constant, declare_preprocessor_constant, declare_c1_constant, declare_c2_constant, declare_c2_preprocessor_constant) \
2792                                                                           \
2793   /*********************/                                                 \
2794   /* MarkOop constants */                                                 \
2795   /*********************/                                                 \
2796                                                                           \
2797   /* Note: some of these are declared as long constants just for */       \
2798   /* consistency. The mask constants are the only ones requiring */       \
2799   /* 64 bits (on 64-bit platforms). */                                    \
2800                                                                           \
2801   declare_constant(markOopDesc::age_bits)                                 \
2802   declare_constant(markOopDesc::lock_bits)                                \
2803   declare_constant(markOopDesc::biased_lock_bits)                         \
2804   declare_constant(markOopDesc::max_hash_bits)                            \
2805   declare_constant(markOopDesc::hash_bits)                                \
2806                                                                           \
2807   declare_constant(markOopDesc::lock_shift)                               \
2808   declare_constant(markOopDesc::biased_lock_shift)                        \
2809   declare_constant(markOopDesc::age_shift)                                \
2810   declare_constant(markOopDesc::hash_shift)                               \
2811                                                                           \
2812   declare_constant(markOopDesc::lock_mask)                                \
2813   declare_constant(markOopDesc::lock_mask_in_place)                       \
2814   declare_constant(markOopDesc::biased_lock_mask)                         \
2815   declare_constant(markOopDesc::biased_lock_mask_in_place)                \
2816   declare_constant(markOopDesc::biased_lock_bit_in_place)                 \
2817   declare_constant(markOopDesc::age_mask)                                 \
2818   declare_constant(markOopDesc::age_mask_in_place)                        \
2819   declare_constant(markOopDesc::epoch_mask)                               \
2820   declare_constant(markOopDesc::epoch_mask_in_place)                      \
2821   declare_constant(markOopDesc::hash_mask)                                \
2822   declare_constant(markOopDesc::hash_mask_in_place)                       \
2823   declare_constant(markOopDesc::biased_lock_alignment)                    \
2824                                                                           \
2825   declare_constant(markOopDesc::locked_value)                             \
2826   declare_constant(markOopDesc::unlocked_value)                           \
2827   declare_constant(markOopDesc::monitor_value)                            \
2828   declare_constant(markOopDesc::marked_value)                             \
2829   declare_constant(markOopDesc::biased_lock_pattern)                      \
2830                                                                           \
2831   declare_constant(markOopDesc::no_hash)                                  \
2832   declare_constant(markOopDesc::no_hash_in_place)                         \
2833   declare_constant(markOopDesc::no_lock_in_place)                         \
2834   declare_constant(markOopDesc::max_age)                                  \
2835                                                                           \
2836   /* Constants in markOop used by CMS. */                                 \
2837   declare_constant(markOopDesc::cms_shift)                                \
2838   declare_constant(markOopDesc::cms_mask)                                 \
2839   declare_constant(markOopDesc::size_shift)                               \
2840                                                                           \
2841   /* InvocationCounter constants */                                       \
2842   declare_constant(InvocationCounter::count_increment)                    \
2843   declare_constant(InvocationCounter::count_shift)
2844 
2845 
2846 //--------------------------------------------------------------------------------
2847 // VM_ADDRESSES
2848 //
2849 
2850 #define VM_ADDRESSES(declare_address, declare_preprocessor_address, declare_function) \
2851                                                                           \
2852   declare_function(SharedRuntime::register_finalizer)                     \
2853   declare_function(SharedRuntime::exception_handler_for_return_address)   \
2854   declare_function(SharedRuntime::OSR_migration_end)                      \
2855   declare_function(SharedRuntime::dsin)                                   \
2856   declare_function(SharedRuntime::dcos)                                   \
2857   declare_function(SharedRuntime::dtan)                                   \
2858   declare_function(SharedRuntime::dexp)                                   \
2859   declare_function(SharedRuntime::dlog)                                   \
2860   declare_function(SharedRuntime::dlog10)                                 \
2861   declare_function(SharedRuntime::dpow)                                   \
2862                                                                           \
2863   declare_function(os::dll_load)                                          \
2864   declare_function(os::dll_lookup)                                        \
2865   declare_function(os::javaTimeMillis)                                    \
2866   declare_function(os::javaTimeNanos)                                     \
2867                                                                           \
2868   declare_function(Deoptimization::fetch_unroll_info)                     \
2869   COMPILER2_PRESENT(declare_function(Deoptimization::uncommon_trap))      \
2870   declare_function(Deoptimization::unpack_frames)
2871 
2872 //--------------------------------------------------------------------------------
2873 // Macros operating on the above lists
2874 //--------------------------------------------------------------------------------
2875 
2876 // This utility macro quotes the passed string
2877 #define QUOTE(x) #x
2878 
2879 //--------------------------------------------------------------------------------
2880 // VMStructEntry macros
2881 //
2882 
2883 // This macro generates a VMStructEntry line for a nonstatic field
2884 #define GENERATE_NONSTATIC_VM_STRUCT_ENTRY(typeName, fieldName, type)              \
2885  { QUOTE(typeName), QUOTE(fieldName), QUOTE(type), 0, offset_of(typeName, fieldName), NULL },
2886 
2887 // This macro generates a VMStructEntry line for a static field
2888 #define GENERATE_STATIC_VM_STRUCT_ENTRY(typeName, fieldName, type)                 \
2889  { QUOTE(typeName), QUOTE(fieldName), QUOTE(type), 1, 0, &amp;typeName::fieldName },
2890 
2891 // This macro generates a VMStructEntry line for a static pointer volatile field,
2892 // e.g.: "static ObjectMonitor * volatile gBlockList;"
2893 #define GENERATE_STATIC_PTR_VOLATILE_VM_STRUCT_ENTRY(typeName, fieldName, type)    \
2894  { QUOTE(typeName), QUOTE(fieldName), QUOTE(type), 1, 0, (void *)&amp;typeName::fieldName },
2895 
2896 // This macro generates a VMStructEntry line for an unchecked
2897 // nonstatic field, in which the size of the type is also specified.
2898 // The type string is given as NULL, indicating an "opaque" type.
2899 #define GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY(typeName, fieldName, size)    \
2900   { QUOTE(typeName), QUOTE(fieldName), NULL, 0, offset_of(typeName, fieldName), NULL },
2901 
2902 // This macro generates a VMStructEntry line for an unchecked
2903 // static field, in which the size of the type is also specified.
2904 // The type string is given as NULL, indicating an "opaque" type.
2905 #define GENERATE_UNCHECKED_STATIC_VM_STRUCT_ENTRY(typeName, fieldName, size)       \
2906  { QUOTE(typeName), QUOTE(fieldName), NULL, 1, 0, (void*) &amp;typeName::fieldName },
2907 
2908 // This macro generates the sentinel value indicating the end of the list
2909 #define GENERATE_VM_STRUCT_LAST_ENTRY() \
2910  { NULL, NULL, NULL, 0, 0, NULL }
2911 
2912 // This macro checks the type of a VMStructEntry by comparing pointer types
2913 #define CHECK_NONSTATIC_VM_STRUCT_ENTRY(typeName, fieldName, type)                 \
2914  {typeName *dummyObj = NULL; type* dummy = &amp;dummyObj-&gt;fieldName;                   \
2915   assert(offset_of(typeName, fieldName) &lt; sizeof(typeName), "Illegal nonstatic struct entry, field offset too large"); }
2916 
2917 // This macro checks the type of a volatile VMStructEntry by comparing pointer types
2918 #define CHECK_VOLATILE_NONSTATIC_VM_STRUCT_ENTRY(typeName, fieldName, type)        \
2919  {typedef type dummyvtype; typeName *dummyObj = NULL; volatile dummyvtype* dummy = &amp;dummyObj-&gt;fieldName; }
2920 
2921 // This macro checks the type of a static VMStructEntry by comparing pointer types
2922 #define CHECK_STATIC_VM_STRUCT_ENTRY(typeName, fieldName, type)                    \
2923  {type* dummy = &amp;typeName::fieldName; }
2924 
2925 // This macro checks the type of a static pointer volatile VMStructEntry by comparing pointer types,
2926 // e.g.: "static ObjectMonitor * volatile gBlockList;"
2927 #define CHECK_STATIC_PTR_VOLATILE_VM_STRUCT_ENTRY(typeName, fieldName, type)       \
2928  {type volatile * dummy = &amp;typeName::fieldName; }
2929 
2930 // This macro ensures the type of a field and its containing type are
2931 // present in the type table. The assertion string is shorter than
2932 // preferable because (incredibly) of a bug in Solstice NFS client
2933 // which seems to prevent very long lines from compiling. This assertion
2934 // means that an entry in VMStructs::localHotSpotVMStructs[] was not
2935 // found in VMStructs::localHotSpotVMTypes[].
2936 #define ENSURE_FIELD_TYPE_PRESENT(typeName, fieldName, type)                       \
2937  { assert(findType(QUOTE(typeName)) != 0, "type \"" QUOTE(typeName) "\" not found in type table"); \
2938    assert(findType(QUOTE(type)) != 0, "type \"" QUOTE(type) "\" not found in type table"); }
2939 
2940 // This is a no-op macro for unchecked fields
2941 #define CHECK_NO_OP(a, b, c)
2942 
2943 //
2944 // Build-specific macros:
2945 //
2946 
2947 // Generate and check a nonstatic field in non-product builds
2948 #ifndef PRODUCT
2949 # define GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2950 # define CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)    CHECK_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2951 # define ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT(a, b, c)          ENSURE_FIELD_TYPE_PRESENT(a, b, c)
2952 # define GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2953 # define CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)    CHECK_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2954 # define ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT(a, b, c)          ENSURE_FIELD_TYPE_PRESENT(a, b, c)
2955 #else
2956 # define GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2957 # define CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2958 # define ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT(a, b, c)
2959 # define GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2960 # define CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2961 # define ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT(a, b, c)
2962 #endif /* PRODUCT */
2963 
2964 // Generate and check a nonstatic field in C1 builds
2965 #ifdef COMPILER1
2966 # define GENERATE_C1_NONSTATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2967 # define CHECK_C1_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)    CHECK_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2968 # define ENSURE_C1_FIELD_TYPE_PRESENT(a, b, c)          ENSURE_FIELD_TYPE_PRESENT(a, b, c)
2969 #else
2970 # define GENERATE_C1_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2971 # define CHECK_C1_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2972 # define ENSURE_C1_FIELD_TYPE_PRESENT(a, b, c)
2973 #endif /* COMPILER1 */
2974 // Generate and check a nonstatic field in C2 builds
2975 #ifdef COMPILER2
2976 # define GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2977 # define CHECK_C2_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)    CHECK_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2978 # define ENSURE_C2_FIELD_TYPE_PRESENT(a, b, c)          ENSURE_FIELD_TYPE_PRESENT(a, b, c)
2979 #else
2980 # define GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2981 # define CHECK_C2_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2982 # define ENSURE_C2_FIELD_TYPE_PRESENT(a, b, c)
2983 #endif /* COMPILER2 */
2984 
2985 // Generate but do not check a static field in C1 builds
2986 #ifdef COMPILER1
2987 # define GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c)
2988 #else
2989 # define GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c)
2990 #endif /* COMPILER1 */
2991 
2992 // Generate but do not check a static field in C2 builds
2993 #ifdef COMPILER2
2994 # define GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c)
2995 #else
2996 # define GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c)
2997 #endif /* COMPILER2 */
2998 
2999 //--------------------------------------------------------------------------------
3000 // VMTypeEntry macros
3001 //
3002 
3003 #define GENERATE_VM_TYPE_ENTRY(type, superclass) \
3004  { QUOTE(type), QUOTE(superclass), 0, 0, 0, sizeof(type) },
3005 
3006 #define GENERATE_TOPLEVEL_VM_TYPE_ENTRY(type) \
3007  { QUOTE(type), NULL,              0, 0, 0, sizeof(type) },
3008 
3009 #define GENERATE_OOP_VM_TYPE_ENTRY(type) \
3010  { QUOTE(type), NULL,              1, 0, 0, sizeof(type) },
3011 
3012 #define GENERATE_INTEGER_VM_TYPE_ENTRY(type) \
3013  { QUOTE(type), NULL,              0, 1, 0, sizeof(type) },
3014 
3015 #define GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY(type) \
3016  { QUOTE(type), NULL,              0, 1, 1, sizeof(type) },
3017 
3018 #define GENERATE_VM_TYPE_LAST_ENTRY() \
3019  { NULL, NULL, 0, 0, 0, 0 }
3020 
3021 #define CHECK_VM_TYPE_ENTRY(type, superclass) \
3022  { type* dummyObj = NULL; superclass* dummySuperObj = dummyObj; }
3023 
3024 #define CHECK_VM_TYPE_NO_OP(a)
3025 #define CHECK_SINGLE_ARG_VM_TYPE_NO_OP(a)
3026 
3027 //
3028 // Build-specific macros:
3029 //
3030 
3031 #ifdef COMPILER1
3032 # define GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY(a)               GENERATE_TOPLEVEL_VM_TYPE_ENTRY(a)
3033 # define CHECK_C1_TOPLEVEL_VM_TYPE_ENTRY(a)
3034 #else
3035 # define GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY(a)
3036 # define CHECK_C1_TOPLEVEL_VM_TYPE_ENTRY(a)
3037 #endif /* COMPILER1 */
3038 
3039 #ifdef COMPILER2
3040 # define GENERATE_C2_VM_TYPE_ENTRY(a, b)                     GENERATE_VM_TYPE_ENTRY(a, b)
3041 # define CHECK_C2_VM_TYPE_ENTRY(a, b)                        CHECK_VM_TYPE_ENTRY(a, b)
3042 # define GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY(a)               GENERATE_TOPLEVEL_VM_TYPE_ENTRY(a)
3043 # define CHECK_C2_TOPLEVEL_VM_TYPE_ENTRY(a)
3044 #else
3045 # define GENERATE_C2_VM_TYPE_ENTRY(a, b)
3046 # define CHECK_C2_VM_TYPE_ENTRY(a, b)
3047 # define GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY(a)
3048 # define CHECK_C2_TOPLEVEL_VM_TYPE_ENTRY(a)
3049 #endif /* COMPILER2 */
3050 
3051 
3052 //--------------------------------------------------------------------------------
3053 // VMIntConstantEntry macros
3054 //
3055 
3056 #define GENERATE_VM_INT_CONSTANT_ENTRY(name) \
3057  { QUOTE(name), (int32_t) name },
3058 
3059 #define GENERATE_VM_INT_CONSTANT_WITH_VALUE_ENTRY(name, value) \
3060  { (name), (int32_t)(value) },
3061 
3062 #define GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY(name, value) \
3063  { name, (int32_t) value },
3064 
3065 // This macro generates the sentinel value indicating the end of the list
3066 #define GENERATE_VM_INT_CONSTANT_LAST_ENTRY() \
3067  { NULL, 0 }
3068 
3069 
3070 // Generate an int constant for a C1 build
3071 #ifdef COMPILER1
3072 # define GENERATE_C1_VM_INT_CONSTANT_ENTRY(name)  GENERATE_VM_INT_CONSTANT_ENTRY(name)
3073 #else
3074 # define GENERATE_C1_VM_INT_CONSTANT_ENTRY(name)
3075 #endif /* COMPILER1 */
3076 
3077 // Generate an int constant for a C2 build
3078 #ifdef COMPILER2
3079 # define GENERATE_C2_VM_INT_CONSTANT_ENTRY(name)                      GENERATE_VM_INT_CONSTANT_ENTRY(name)
3080 # define GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY(name, value)  GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY(name, value)
3081 #else
3082 # define GENERATE_C2_VM_INT_CONSTANT_ENTRY(name)
3083 # define GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY(name, value)
3084 #endif /* COMPILER1 */
3085 
3086 //--------------------------------------------------------------------------------
3087 // VMLongConstantEntry macros
3088 //
3089 
3090 #define GENERATE_VM_LONG_CONSTANT_ENTRY(name) \
3091   { QUOTE(name), name },
3092 
3093 #define GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY(name, value) \
3094   { name, value },
3095 
3096 // This macro generates the sentinel value indicating the end of the list
3097 #define GENERATE_VM_LONG_CONSTANT_LAST_ENTRY() \
3098  { NULL, 0 }
3099 
3100 // Generate a long constant for a C1 build
3101 #ifdef COMPILER1
3102 # define GENERATE_C1_VM_LONG_CONSTANT_ENTRY(name)  GENERATE_VM_LONG_CONSTANT_ENTRY(name)
3103 #else
3104 # define GENERATE_C1_VM_LONG_CONSTANT_ENTRY(name)
3105 #endif /* COMPILER1 */
3106 
3107 // Generate a long constant for a C2 build
3108 #ifdef COMPILER2
3109 # define GENERATE_C2_VM_LONG_CONSTANT_ENTRY(name)                     GENERATE_VM_LONG_CONSTANT_ENTRY(name)
3110 # define GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY(name, value) GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY(name, value)
3111 #else
3112 # define GENERATE_C2_VM_LONG_CONSTANT_ENTRY(name)
3113 # define GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY(name, value)
3114 #endif /* COMPILER1 */
3115 
3116 //--------------------------------------------------------------------------------
3117 // VMAddressEntry macros
3118 //
3119 
3120 #define GENERATE_VM_ADDRESS_ENTRY(name) \
3121   { QUOTE(name), (void*) (name) },
3122 
3123 #define GENERATE_PREPROCESSOR_VM_ADDRESS_ENTRY(name, value) \
3124   { name, (void*) (value) },
3125 
3126 #define GENERATE_VM_FUNCTION_ENTRY(name) \
3127   { QUOTE(name), CAST_FROM_FN_PTR(void*, &amp;(name)) },
3128 
3129 // This macro generates the sentinel value indicating the end of the list
3130 #define GENERATE_VM_ADDRESS_LAST_ENTRY() \
3131  { NULL, NULL }
3132 
3133 //
3134 // Instantiation of VMStructEntries, VMTypeEntries and VMIntConstantEntries
3135 //
3136 
3137 // These initializers are allowed to access private fields in classes
3138 // as long as class VMStructs is a friend
3139 VMStructEntry VMStructs::localHotSpotVMStructs[] = {
3140 
3141   VM_STRUCTS(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3142              GENERATE_STATIC_VM_STRUCT_ENTRY,
3143              GENERATE_STATIC_PTR_VOLATILE_VM_STRUCT_ENTRY,
3144              GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY,
3145              GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3146              GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
3147              GENERATE_C1_NONSTATIC_VM_STRUCT_ENTRY,
3148              GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY,
3149              GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY,
3150              GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY)
3151 
3152 #if INCLUDE_JVMCI
3153   VM_STRUCTS_JVMCI(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3154                    GENERATE_STATIC_VM_STRUCT_ENTRY)
3155 #endif
3156 
3157 #if INCLUDE_ALL_GCS
3158   VM_STRUCTS_PARALLELGC(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3159                         GENERATE_STATIC_VM_STRUCT_ENTRY)
3160 
3161   VM_STRUCTS_CMS(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3162                  GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3163                  GENERATE_STATIC_VM_STRUCT_ENTRY)
3164 
3165   VM_STRUCTS_G1(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3166                 GENERATE_STATIC_VM_STRUCT_ENTRY)
3167 #endif // INCLUDE_ALL_GCS
3168 
3169 #if INCLUDE_TRACE
3170   VM_STRUCTS_TRACE(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3171                 GENERATE_STATIC_VM_STRUCT_ENTRY)
3172 #endif
3173 
3174   VM_STRUCTS_EXT(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3175                  GENERATE_STATIC_VM_STRUCT_ENTRY)
3176 
3177   VM_STRUCTS_OS(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3178                 GENERATE_STATIC_VM_STRUCT_ENTRY,
3179                 GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY,
3180                 GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3181                 GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
3182                 GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY,
3183                 GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY,
3184                 GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY)
3185 
3186   VM_STRUCTS_CPU(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3187                  GENERATE_STATIC_VM_STRUCT_ENTRY,
3188                  GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY,
3189                  GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3190                  GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
3191                  GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY,
3192                  GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY,
3193                  GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY)
3194 
3195   VM_STRUCTS_OS_CPU(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3196                     GENERATE_STATIC_VM_STRUCT_ENTRY,
3197                     GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY,
3198                     GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3199                     GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
3200                     GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY,
3201                     GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY,
3202                     GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY)
3203 
3204   GENERATE_VM_STRUCT_LAST_ENTRY()
3205 };
3206 
3207 VMTypeEntry VMStructs::localHotSpotVMTypes[] = {
3208 
3209   VM_TYPES(GENERATE_VM_TYPE_ENTRY,
3210            GENERATE_TOPLEVEL_VM_TYPE_ENTRY,
3211            GENERATE_OOP_VM_TYPE_ENTRY,
3212            GENERATE_INTEGER_VM_TYPE_ENTRY,
3213            GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY,
3214            GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY,
3215            GENERATE_C2_VM_TYPE_ENTRY,
3216            GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY)
3217 
3218 #if INCLUDE_JVMCI
3219   VM_TYPES_JVMCI(GENERATE_VM_TYPE_ENTRY,
3220                  GENERATE_TOPLEVEL_VM_TYPE_ENTRY)
3221 #endif
3222 
3223 #if INCLUDE_ALL_GCS
3224   VM_TYPES_PARALLELGC(GENERATE_VM_TYPE_ENTRY,
3225                       GENERATE_TOPLEVEL_VM_TYPE_ENTRY)
3226 
3227   VM_TYPES_CMS(GENERATE_VM_TYPE_ENTRY,
3228                GENERATE_TOPLEVEL_VM_TYPE_ENTRY)
3229 
3230   VM_TYPES_PARNEW(GENERATE_VM_TYPE_ENTRY)
3231 
3232   VM_TYPES_G1(GENERATE_VM_TYPE_ENTRY,
3233               GENERATE_TOPLEVEL_VM_TYPE_ENTRY)
3234 #endif // INCLUDE_ALL_GCS
3235 
3236 #if INCLUDE_TRACE
3237   VM_TYPES_TRACE(GENERATE_VM_TYPE_ENTRY,
3238               GENERATE_TOPLEVEL_VM_TYPE_ENTRY)
3239 #endif
3240 
3241   VM_TYPES_EXT(GENERATE_VM_TYPE_ENTRY,
3242                GENERATE_TOPLEVEL_VM_TYPE_ENTRY)
3243 
3244   VM_TYPES_OS(GENERATE_VM_TYPE_ENTRY,
3245               GENERATE_TOPLEVEL_VM_TYPE_ENTRY,
3246               GENERATE_OOP_VM_TYPE_ENTRY,
3247               GENERATE_INTEGER_VM_TYPE_ENTRY,
3248               GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY,
3249               GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY,
3250               GENERATE_C2_VM_TYPE_ENTRY,
3251               GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY)
3252 
3253   VM_TYPES_CPU(GENERATE_VM_TYPE_ENTRY,
3254                GENERATE_TOPLEVEL_VM_TYPE_ENTRY,
3255                GENERATE_OOP_VM_TYPE_ENTRY,
3256                GENERATE_INTEGER_VM_TYPE_ENTRY,
3257                GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY,
3258                GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY,
3259                GENERATE_C2_VM_TYPE_ENTRY,
3260                GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY)
3261 
3262   VM_TYPES_OS_CPU(GENERATE_VM_TYPE_ENTRY,
3263                   GENERATE_TOPLEVEL_VM_TYPE_ENTRY,
3264                   GENERATE_OOP_VM_TYPE_ENTRY,
3265                   GENERATE_INTEGER_VM_TYPE_ENTRY,
3266                   GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY,
3267                   GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY,
3268                   GENERATE_C2_VM_TYPE_ENTRY,
3269                   GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY)
3270 
3271   GENERATE_VM_TYPE_LAST_ENTRY()
3272 };
3273 
3274 VMIntConstantEntry VMStructs::localHotSpotVMIntConstants[] = {
3275 
3276   VM_INT_CONSTANTS(GENERATE_VM_INT_CONSTANT_ENTRY,
3277                    GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY,
3278                    GENERATE_C1_VM_INT_CONSTANT_ENTRY,
3279                    GENERATE_C2_VM_INT_CONSTANT_ENTRY,
3280                    GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
3281 
3282 #if INCLUDE_JVMCI
3283   VM_INT_CONSTANTS_JVMCI(GENERATE_VM_INT_CONSTANT_ENTRY,
3284                          GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
3285 
3286 #endif
3287 
3288 #if INCLUDE_ALL_GCS
3289   VM_INT_CONSTANTS_CMS(GENERATE_VM_INT_CONSTANT_ENTRY)
3290 
3291   VM_INT_CONSTANTS_PARNEW(GENERATE_VM_INT_CONSTANT_ENTRY)
3292 
3293   VM_INT_CONSTANTS_G1(GENERATE_VM_INT_CONSTANT_ENTRY,
3294                       GENERATE_VM_INT_CONSTANT_WITH_VALUE_ENTRY)
3295 #endif // INCLUDE_ALL_GCS
3296 
3297 #if INCLUDE_TRACE
3298   VM_INT_CONSTANTS_TRACE(GENERATE_VM_INT_CONSTANT_ENTRY)
3299 #endif
3300 
3301   VM_INT_CONSTANTS_OS(GENERATE_VM_INT_CONSTANT_ENTRY,
3302                       GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY,
3303                       GENERATE_C1_VM_INT_CONSTANT_ENTRY,
3304                       GENERATE_C2_VM_INT_CONSTANT_ENTRY,
3305                       GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
3306 
3307   VM_INT_CONSTANTS_CPU(GENERATE_VM_INT_CONSTANT_ENTRY,
3308                        GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY,
3309                        GENERATE_C1_VM_INT_CONSTANT_ENTRY,
3310                        GENERATE_C2_VM_INT_CONSTANT_ENTRY,
3311                        GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
3312 
3313   VM_INT_CONSTANTS_OS_CPU(GENERATE_VM_INT_CONSTANT_ENTRY,
3314                           GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY,
3315                           GENERATE_C1_VM_INT_CONSTANT_ENTRY,
3316                           GENERATE_C2_VM_INT_CONSTANT_ENTRY,
3317                           GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
3318 
3319   GENERATE_VM_INT_CONSTANT_LAST_ENTRY()
3320 };
3321 
3322 VMLongConstantEntry VMStructs::localHotSpotVMLongConstants[] = {
3323 
3324   VM_LONG_CONSTANTS(GENERATE_VM_LONG_CONSTANT_ENTRY,
3325                     GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY,
3326                     GENERATE_C1_VM_LONG_CONSTANT_ENTRY,
3327                     GENERATE_C2_VM_LONG_CONSTANT_ENTRY,
3328                     GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY)
3329 
3330   VM_LONG_CONSTANTS_OS(GENERATE_VM_LONG_CONSTANT_ENTRY,
3331                        GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY,
3332                        GENERATE_C1_VM_LONG_CONSTANT_ENTRY,
3333                        GENERATE_C2_VM_LONG_CONSTANT_ENTRY,
3334                        GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY)
3335 
3336   VM_LONG_CONSTANTS_CPU(GENERATE_VM_LONG_CONSTANT_ENTRY,
3337                         GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY,
3338                         GENERATE_C1_VM_LONG_CONSTANT_ENTRY,
3339                         GENERATE_C2_VM_LONG_CONSTANT_ENTRY,
3340                         GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY)
3341 
3342   VM_LONG_CONSTANTS_OS_CPU(GENERATE_VM_LONG_CONSTANT_ENTRY,
3343                            GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY,
3344                            GENERATE_C1_VM_LONG_CONSTANT_ENTRY,
3345                            GENERATE_C2_VM_LONG_CONSTANT_ENTRY,
3346                            GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY)
3347 
3348   GENERATE_VM_LONG_CONSTANT_LAST_ENTRY()
3349 };
3350 
3351 VMAddressEntry VMStructs::localHotSpotVMAddresses[] = {
3352 
3353   VM_ADDRESSES(GENERATE_VM_ADDRESS_ENTRY,
3354                GENERATE_PREPROCESSOR_VM_ADDRESS_ENTRY,
3355                GENERATE_VM_FUNCTION_ENTRY)
3356 
3357   VM_ADDRESSES_OS(GENERATE_VM_ADDRESS_ENTRY,
3358                   GENERATE_PREPROCESSOR_VM_ADDRESS_ENTRY,
3359                   GENERATE_VM_FUNCTION_ENTRY)
3360 
3361 #if INCLUDE_JVMCI
3362   VM_ADDRESSES_JVMCI(GENERATE_VM_ADDRESS_ENTRY,
3363                      GENERATE_PREPROCESSOR_VM_ADDRESS_ENTRY,
3364                      GENERATE_VM_FUNCTION_ENTRY)
3365 #endif
3366 
3367   GENERATE_VM_ADDRESS_LAST_ENTRY()
3368 };
3369 
3370 // This is used both to check the types of referenced fields and, in
3371 // debug builds, to ensure that all of the field types are present.
3372 void
3373 VMStructs::init() {
3374   VM_STRUCTS(CHECK_NONSTATIC_VM_STRUCT_ENTRY,
3375              CHECK_STATIC_VM_STRUCT_ENTRY,
3376              CHECK_STATIC_PTR_VOLATILE_VM_STRUCT_ENTRY,
3377              CHECK_NO_OP,
3378              CHECK_VOLATILE_NONSTATIC_VM_STRUCT_ENTRY,
3379              CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
3380              CHECK_C1_NONSTATIC_VM_STRUCT_ENTRY,
3381              CHECK_C2_NONSTATIC_VM_STRUCT_ENTRY,
3382              CHECK_NO_OP,
3383              CHECK_NO_OP);
3384 
3385 #if INCLUDE_ALL_GCS
3386   VM_STRUCTS_PARALLELGC(CHECK_NONSTATIC_VM_STRUCT_ENTRY,
3387              CHECK_STATIC_VM_STRUCT_ENTRY);
3388 
3389   VM_STRUCTS_CMS(CHECK_NONSTATIC_VM_STRUCT_ENTRY,
3390              CHECK_VOLATILE_NONSTATIC_VM_STRUCT_ENTRY,
3391              CHECK_STATIC_VM_STRUCT_ENTRY);
3392 
3393   VM_STRUCTS_G1(CHECK_NONSTATIC_VM_STRUCT_ENTRY,
3394                 CHECK_STATIC_VM_STRUCT_ENTRY);
3395 
3396 #endif // INCLUDE_ALL_GCS
3397 
3398 #if INCLUDE_TRACE
3399   VM_STRUCTS_TRACE(CHECK_NONSTATIC_VM_STRUCT_ENTRY,
3400                 CHECK_STATIC_VM_STRUCT_ENTRY);
3401 #endif
3402 
3403   VM_STRUCTS_EXT(CHECK_NONSTATIC_VM_STRUCT_ENTRY,
3404                  CHECK_STATIC_VM_STRUCT_ENTRY);
3405 
3406   VM_STRUCTS_CPU(CHECK_NONSTATIC_VM_STRUCT_ENTRY,
3407                  CHECK_STATIC_VM_STRUCT_ENTRY,
3408                  CHECK_NO_OP,
3409                  CHECK_VOLATILE_NONSTATIC_VM_STRUCT_ENTRY,
3410                  CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
3411                  CHECK_C2_NONSTATIC_VM_STRUCT_ENTRY,
3412                  CHECK_NO_OP,
3413                  CHECK_NO_OP);
3414 
3415   VM_STRUCTS_OS_CPU(CHECK_NONSTATIC_VM_STRUCT_ENTRY,
3416                     CHECK_STATIC_VM_STRUCT_ENTRY,
3417                     CHECK_NO_OP,
3418                     CHECK_VOLATILE_NONSTATIC_VM_STRUCT_ENTRY,
3419                     CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
3420                     CHECK_C2_NONSTATIC_VM_STRUCT_ENTRY,
3421                     CHECK_NO_OP,
3422                     CHECK_NO_OP);
3423 
3424   VM_TYPES(CHECK_VM_TYPE_ENTRY,
3425            CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3426            CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3427            CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3428            CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3429            CHECK_C1_TOPLEVEL_VM_TYPE_ENTRY,
3430            CHECK_C2_VM_TYPE_ENTRY,
3431            CHECK_C2_TOPLEVEL_VM_TYPE_ENTRY);
3432 
3433 #if INCLUDE_ALL_GCS
3434   VM_TYPES_PARALLELGC(CHECK_VM_TYPE_ENTRY,
3435                       CHECK_SINGLE_ARG_VM_TYPE_NO_OP);
3436 
3437   VM_TYPES_CMS(CHECK_VM_TYPE_ENTRY,
3438                CHECK_SINGLE_ARG_VM_TYPE_NO_OP);
3439 
3440   VM_TYPES_PARNEW(CHECK_VM_TYPE_ENTRY)
3441 
3442   VM_TYPES_G1(CHECK_VM_TYPE_ENTRY,
3443               CHECK_SINGLE_ARG_VM_TYPE_NO_OP);
3444 
3445 #endif // INCLUDE_ALL_GCS
3446 
3447 #if INCLUDE_TRACE
3448   VM_TYPES_TRACE(CHECK_VM_TYPE_ENTRY,
3449               CHECK_SINGLE_ARG_VM_TYPE_NO_OP);
3450 #endif
3451 
3452   VM_TYPES_EXT(CHECK_VM_TYPE_ENTRY,
3453                CHECK_SINGLE_ARG_VM_TYPE_NO_OP);
3454 
3455   VM_TYPES_CPU(CHECK_VM_TYPE_ENTRY,
3456                CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3457                CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3458                CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3459                CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3460                CHECK_C1_TOPLEVEL_VM_TYPE_ENTRY,
3461                CHECK_C2_VM_TYPE_ENTRY,
3462                CHECK_C2_TOPLEVEL_VM_TYPE_ENTRY);
3463 
3464   VM_TYPES_OS_CPU(CHECK_VM_TYPE_ENTRY,
3465                   CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3466                   CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3467                   CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3468                   CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3469                   CHECK_C1_TOPLEVEL_VM_TYPE_ENTRY,
3470                   CHECK_C2_VM_TYPE_ENTRY,
3471                   CHECK_C2_TOPLEVEL_VM_TYPE_ENTRY);
3472 
3473   //
3474   // Split VM_STRUCTS() invocation into two parts to allow MS VC++ 6.0
3475   // to build with the source mounted over SNC3.2. Symptom was that
3476   // debug build failed with an internal compiler error. Has been seen
3477   // mounting sources from Solaris 2.6 and 2.7 hosts, but so far not
3478   // 2.8 hosts. Appears to occur because line is too long.
3479   //
3480   // If an assertion failure is triggered here it means that an entry
3481   // in VMStructs::localHotSpotVMStructs[] was not found in
3482   // VMStructs::localHotSpotVMTypes[]. (The assertion itself had to be
3483   // made less descriptive because of this above bug -- see the
3484   // definition of ENSURE_FIELD_TYPE_PRESENT.)
3485   //
3486   // NOTE: taken out because this was just not working on everyone's
3487   // Solstice NFS setup. If everyone switches to local workspaces on
3488   // Win32, we can put this back in.
3489 #ifndef _WINDOWS
3490   debug_only(VM_STRUCTS(ENSURE_FIELD_TYPE_PRESENT,
3491                         CHECK_NO_OP,
3492                         CHECK_NO_OP,
3493                         CHECK_NO_OP,
3494                         CHECK_NO_OP,
3495                         CHECK_NO_OP,
3496                         CHECK_NO_OP,
3497                         CHECK_NO_OP,
3498                         CHECK_NO_OP,
3499                         CHECK_NO_OP));
3500   debug_only(VM_STRUCTS(CHECK_NO_OP,
3501                         ENSURE_FIELD_TYPE_PRESENT,
3502                         ENSURE_FIELD_TYPE_PRESENT,
3503                         CHECK_NO_OP,
3504                         ENSURE_FIELD_TYPE_PRESENT,
3505                         ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT,
3506                         ENSURE_C1_FIELD_TYPE_PRESENT,
3507                         ENSURE_C2_FIELD_TYPE_PRESENT,
3508                         CHECK_NO_OP,
3509                         CHECK_NO_OP));
3510 #if INCLUDE_ALL_GCS
3511   debug_only(VM_STRUCTS_PARALLELGC(ENSURE_FIELD_TYPE_PRESENT,
3512                                    ENSURE_FIELD_TYPE_PRESENT));
3513   debug_only(VM_STRUCTS_CMS(ENSURE_FIELD_TYPE_PRESENT,
3514                             ENSURE_FIELD_TYPE_PRESENT,
3515                             ENSURE_FIELD_TYPE_PRESENT));
3516   debug_only(VM_STRUCTS_G1(ENSURE_FIELD_TYPE_PRESENT,
3517                            ENSURE_FIELD_TYPE_PRESENT));
3518 #endif // INCLUDE_ALL_GCS
3519 
3520 #if INCLUDE_TRACE
3521   debug_only(VM_STRUCTS_TRACE(ENSURE_FIELD_TYPE_PRESENT,
3522                            ENSURE_FIELD_TYPE_PRESENT));
3523 #endif
3524 
3525   debug_only(VM_STRUCTS_EXT(ENSURE_FIELD_TYPE_PRESENT,
3526                             ENSURE_FIELD_TYPE_PRESENT));
3527 
3528   debug_only(VM_STRUCTS_CPU(ENSURE_FIELD_TYPE_PRESENT,
3529                             ENSURE_FIELD_TYPE_PRESENT,
3530                             CHECK_NO_OP,
3531                             ENSURE_FIELD_TYPE_PRESENT,
3532                             ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT,
3533                             ENSURE_C2_FIELD_TYPE_PRESENT,
3534                             CHECK_NO_OP,
3535                             CHECK_NO_OP));
3536   debug_only(VM_STRUCTS_OS_CPU(ENSURE_FIELD_TYPE_PRESENT,
3537                                ENSURE_FIELD_TYPE_PRESENT,
3538                                CHECK_NO_OP,
3539                                ENSURE_FIELD_TYPE_PRESENT,
3540                                ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT,
3541                                ENSURE_C2_FIELD_TYPE_PRESENT,
3542                                CHECK_NO_OP,
3543                                CHECK_NO_OP));
3544 #endif
3545 }
3546 
3547 extern "C" {
3548 
3549 #define STRIDE(array) ((char*)&amp;array[1] - (char*)&amp;array[0])
3550 
3551 JNIEXPORT VMStructEntry* gHotSpotVMStructs = VMStructs::localHotSpotVMStructs;
3552 JNIEXPORT uint64_t gHotSpotVMStructEntryTypeNameOffset = offset_of(VMStructEntry, typeName);
3553 JNIEXPORT uint64_t gHotSpotVMStructEntryFieldNameOffset = offset_of(VMStructEntry, fieldName);
3554 JNIEXPORT uint64_t gHotSpotVMStructEntryTypeStringOffset = offset_of(VMStructEntry, typeString);
3555 JNIEXPORT uint64_t gHotSpotVMStructEntryIsStaticOffset = offset_of(VMStructEntry, isStatic);
3556 JNIEXPORT uint64_t gHotSpotVMStructEntryOffsetOffset = offset_of(VMStructEntry, offset);
3557 JNIEXPORT uint64_t gHotSpotVMStructEntryAddressOffset = offset_of(VMStructEntry, address);
3558 JNIEXPORT uint64_t gHotSpotVMStructEntryArrayStride = STRIDE(gHotSpotVMStructs);
3559 
3560 JNIEXPORT VMTypeEntry* gHotSpotVMTypes = VMStructs::localHotSpotVMTypes;
3561 JNIEXPORT uint64_t gHotSpotVMTypeEntryTypeNameOffset = offset_of(VMTypeEntry, typeName);
3562 JNIEXPORT uint64_t gHotSpotVMTypeEntrySuperclassNameOffset = offset_of(VMTypeEntry, superclassName);
3563 JNIEXPORT uint64_t gHotSpotVMTypeEntryIsOopTypeOffset = offset_of(VMTypeEntry, isOopType);
3564 JNIEXPORT uint64_t gHotSpotVMTypeEntryIsIntegerTypeOffset = offset_of(VMTypeEntry, isIntegerType);
3565 JNIEXPORT uint64_t gHotSpotVMTypeEntryIsUnsignedOffset = offset_of(VMTypeEntry, isUnsigned);
3566 JNIEXPORT uint64_t gHotSpotVMTypeEntrySizeOffset = offset_of(VMTypeEntry, size);
3567 JNIEXPORT uint64_t gHotSpotVMTypeEntryArrayStride = STRIDE(gHotSpotVMTypes);
3568 
3569 JNIEXPORT VMIntConstantEntry* gHotSpotVMIntConstants = VMStructs::localHotSpotVMIntConstants;
3570 JNIEXPORT uint64_t gHotSpotVMIntConstantEntryNameOffset = offset_of(VMIntConstantEntry, name);
3571 JNIEXPORT uint64_t gHotSpotVMIntConstantEntryValueOffset = offset_of(VMIntConstantEntry, value);
3572 JNIEXPORT uint64_t gHotSpotVMIntConstantEntryArrayStride = STRIDE(gHotSpotVMIntConstants);
3573 
3574 JNIEXPORT VMLongConstantEntry* gHotSpotVMLongConstants = VMStructs::localHotSpotVMLongConstants;
3575 JNIEXPORT uint64_t gHotSpotVMLongConstantEntryNameOffset = offset_of(VMLongConstantEntry, name);
3576 JNIEXPORT uint64_t gHotSpotVMLongConstantEntryValueOffset = offset_of(VMLongConstantEntry, value);
3577 JNIEXPORT uint64_t gHotSpotVMLongConstantEntryArrayStride = STRIDE(gHotSpotVMLongConstants);
3578 
3579 JNIEXPORT VMAddressEntry* gHotSpotVMAddresses = VMStructs::localHotSpotVMAddresses;
3580 JNIEXPORT uint64_t gHotSpotVMAddressEntryNameOffset = offset_of(VMAddressEntry, name);
3581 JNIEXPORT uint64_t gHotSpotVMAddressEntryValueOffset = offset_of(VMAddressEntry, value);
3582 JNIEXPORT uint64_t gHotSpotVMAddressEntryArrayStride = STRIDE(gHotSpotVMAddresses);
3583 }
3584 
3585 #ifdef ASSERT
3586 static int recursiveFindType(VMTypeEntry* origtypes, const char* typeName, bool isRecurse) {
3587   {
3588     VMTypeEntry* types = origtypes;
3589     while (types-&gt;typeName != NULL) {
3590       if (strcmp(typeName, types-&gt;typeName) == 0) {
3591         // Found it
3592         return 1;
3593       }
3594       ++types;
3595     }
3596   }
3597   // Search for the base type by peeling off const and *
3598   size_t len = strlen(typeName);
3599   if (typeName[len-1] == '*') {
3600     char * s = NEW_C_HEAP_ARRAY(char, len, mtInternal);
3601     strncpy(s, typeName, len - 1);
3602     s[len-1] = '\0';
3603     // tty-&gt;print_cr("checking \"%s\" for \"%s\"", s, typeName);
3604     if (recursiveFindType(origtypes, s, true) == 1) {
3605       FREE_C_HEAP_ARRAY(char, s);
3606       return 1;
3607     }
3608     FREE_C_HEAP_ARRAY(char, s);
3609   }
3610   const char* start = NULL;
3611   if (strstr(typeName, "GrowableArray&lt;") == typeName) {
3612     start = typeName + strlen("GrowableArray&lt;");
3613   } else if (strstr(typeName, "Array&lt;") == typeName) {
3614     start = typeName + strlen("Array&lt;");
3615   }
3616   if (start != NULL) {
3617     const char * end = strrchr(typeName, '&gt;');
3618     int len = end - start + 1;
3619     char * s = NEW_C_HEAP_ARRAY(char, len, mtInternal);
3620     strncpy(s, start, len - 1);
3621     s[len-1] = '\0';
3622     // tty-&gt;print_cr("checking \"%s\" for \"%s\"", s, typeName);
3623     if (recursiveFindType(origtypes, s, true) == 1) {
3624       FREE_C_HEAP_ARRAY(char, s);
3625       return 1;
3626     }
3627     FREE_C_HEAP_ARRAY(char, s);
3628   }
3629   if (strstr(typeName, "const ") == typeName) {
3630     const char * s = typeName + strlen("const ");
3631     // tty-&gt;print_cr("checking \"%s\" for \"%s\"", s, typeName);
3632     if (recursiveFindType(origtypes, s, true) == 1) {
3633       return 1;
3634     }
3635   }
3636   if (strstr(typeName, " const") == typeName + len - 6) {
3637     char * s = os::strdup_check_oom(typeName);
3638     s[len - 6] = '\0';
3639     // tty-&gt;print_cr("checking \"%s\" for \"%s\"", s, typeName);
3640     if (recursiveFindType(origtypes, s, true) == 1) {
3641       os::free(s);
3642       return 1;
3643     }
3644     os::free(s);
3645   }
3646   if (!isRecurse) {
3647     tty-&gt;print_cr("type \"%s\" not found", typeName);
3648   }
3649   return 0;
3650 }
3651 
3652 
3653 int
3654 VMStructs::findType(const char* typeName) {
3655   VMTypeEntry* types = gHotSpotVMTypes;
3656 
3657   return recursiveFindType(types, typeName, false);
3658 }
3659 #endif
3660 
3661 void vmStructs_init() {
3662   debug_only(VMStructs::init());
3663 }
3664 
3665 #ifndef PRODUCT
3666 void VMStructs::test() {
3667   // Make sure last entry in the each array is indeed the correct end marker.
3668   // The reason why these are static is to make sure they are zero initialized.
3669   // Putting them on the stack will leave some garbage in the padding of some fields.
3670   static VMStructEntry struct_last_entry = GENERATE_VM_STRUCT_LAST_ENTRY();
3671   assert(memcmp(&amp;localHotSpotVMStructs[(sizeof(localHotSpotVMStructs) / sizeof(VMStructEntry)) - 1],
3672                 &amp;struct_last_entry,
3673                 sizeof(VMStructEntry)) == 0, "Incorrect last entry in localHotSpotVMStructs");
3674 
3675   static VMTypeEntry type_last_entry = GENERATE_VM_TYPE_LAST_ENTRY();
3676   assert(memcmp(&amp;localHotSpotVMTypes[sizeof(localHotSpotVMTypes) / sizeof(VMTypeEntry) - 1],
3677                 &amp;type_last_entry,
3678                 sizeof(VMTypeEntry)) == 0, "Incorrect last entry in localHotSpotVMTypes");
3679 
3680   static VMIntConstantEntry int_last_entry = GENERATE_VM_INT_CONSTANT_LAST_ENTRY();
3681   assert(memcmp(&amp;localHotSpotVMIntConstants[sizeof(localHotSpotVMIntConstants) / sizeof(VMIntConstantEntry) - 1],
3682                 &amp;int_last_entry,
3683                 sizeof(VMIntConstantEntry)) == 0, "Incorrect last entry in localHotSpotVMIntConstants");
3684 
3685   static VMLongConstantEntry long_last_entry = GENERATE_VM_LONG_CONSTANT_LAST_ENTRY();
3686   assert(memcmp(&amp;localHotSpotVMLongConstants[sizeof(localHotSpotVMLongConstants) / sizeof(VMLongConstantEntry) - 1],
3687                 &amp;long_last_entry,
3688                 sizeof(VMLongConstantEntry)) == 0, "Incorrect last entry in localHotSpotVMLongConstants");
3689 
3690   static VMAddressEntry address_last_entry = GENERATE_VM_ADDRESS_LAST_ENTRY();
3691   assert(memcmp(&amp;localHotSpotVMAddresses[sizeof(localHotSpotVMAddresses) / sizeof(VMAddressEntry) - 1],
3692                 &amp;address_last_entry,
3693                 sizeof(VMAddressEntry)) == 0, "Incorrect last entry in localHotSpotVMAddresses");
3694 
3695 
3696   // Check for duplicate entries in type array
3697   for (int i = 0; localHotSpotVMTypes[i].typeName != NULL; i++) {
3698     for (int j = i + 1; localHotSpotVMTypes[j].typeName != NULL; j++) {
3699       if (strcmp(localHotSpotVMTypes[i].typeName, localHotSpotVMTypes[j].typeName) == 0) {
3700         tty-&gt;print_cr("Duplicate entries for '%s'", localHotSpotVMTypes[i].typeName);
3701         assert(false, "Duplicate types in localHotSpotVMTypes array");
3702       }
3703     }
3704   }
3705 }
3706 #endif
</pre></body></html>
