<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta charset="utf-8">
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="-1" />
<!--
   Note to customizers: the body of the webrev is IDed as SUNWwebrev
   to allow easy overriding by users of webrev via the userContent.css
   mechanism available in some browsers.

   For example, to have all "removed" information be red instead of
   brown, set a rule in your userContent.css file like:

       body#SUNWwebrev span.removed { color: red ! important; }
-->
<style type="text/css" media="screen">
body {
    background-color: #eeeeee;
}
hr {
    border: none 0;
    border-top: 1px solid #aaa;
    height: 1px;
}
div.summary {
    font-size: .8em;
    border-bottom: 1px solid #aaa;
    padding-left: 1em;
    padding-right: 1em;
}
div.summary h2 {
    margin-bottom: 0.3em;
}
div.summary table th {
    text-align: right;
    vertical-align: top;
    white-space: nowrap;
}
span.lineschanged {
    font-size: 0.7em;
}
span.oldmarker {
    color: red;
    font-size: large;
    font-weight: bold;
}
span.newmarker {
    color: green;
    font-size: large;
    font-weight: bold;
}
span.removed {
    color: brown;
}
span.changed {
    color: blue;
}
span.new {
    color: blue;
    font-weight: bold;
}
a.print { font-size: x-small; }

</style>

<style type="text/css" media="print">
pre { font-size: 0.8em; font-family: courier, monospace; }
span.removed { color: #444; font-style: italic }
span.changed { font-weight: bold; }
span.new { font-weight: bold; }
span.newmarker { font-size: 1.2em; font-weight: bold; }
span.oldmarker { font-size: 1.2em; font-weight: bold; }
a.print {display: none}
hr { border: none 0; border-top: 1px solid #aaa; height: 1px; }
</style>

<title>Old src/share/vm/runtime/vmStructs.cpp</title>
<body id="SUNWwebrev">
<pre>
   1 /*
   2  * Copyright (c) 2000, 2015, Oracle and/or its affiliates. All rights reserved.
   3  * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
   4  *
   5  * This code is free software; you can redistribute it and/or modify it
   6  * under the terms of the GNU General Public License version 2 only, as
   7  * published by the Free Software Foundation.
   8  *
   9  * This code is distributed in the hope that it will be useful, but WITHOUT
  10  * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  11  * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
  12  * version 2 for more details (a copy is included in the LICENSE file that
  13  * accompanied this code).
  14  *
  15  * You should have received a copy of the GNU General Public License version
  16  * 2 along with this work; if not, write to the Free Software Foundation,
  17  * Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
  18  *
  19  * Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
  20  * or visit www.oracle.com if you need additional information or have any
  21  * questions.
  22  *
  23  */
  24 
  25 #include "precompiled.hpp"
  26 #include "ci/ciField.hpp"
  27 #include "ci/ciInstance.hpp"
  28 #include "ci/ciMethodData.hpp"
  29 #include "ci/ciObjArrayKlass.hpp"
  30 #include "ci/ciSymbol.hpp"
  31 #include "classfile/compactHashtable.hpp"
  32 #include "classfile/dictionary.hpp"
  33 #include "classfile/javaClasses.hpp"
  34 #include "classfile/loaderConstraints.hpp"
  35 #include "classfile/placeholders.hpp"
  36 #include "classfile/stringTable.hpp"
  37 #include "classfile/systemDictionary.hpp"
  38 #include "code/codeBlob.hpp"
  39 #include "code/codeCache.hpp"
  40 #include "code/compressedStream.hpp"
  41 #include "code/location.hpp"
  42 #include "code/nmethod.hpp"
  43 #include "code/pcDesc.hpp"
  44 #include "code/stubs.hpp"
  45 #include "code/vmreg.hpp"
  46 #include "compiler/compileBroker.hpp"
  47 #include "compiler/oopMap.hpp"
  48 #include "gc/parallel/immutableSpace.hpp"
  49 #include "gc/parallel/mutableSpace.hpp"
  50 #include "gc/serial/defNewGeneration.hpp"
  51 #include "gc/serial/tenuredGeneration.hpp"
  52 #include "gc/shared/cardTableRS.hpp"
  53 #include "gc/shared/collectedHeap.hpp"
  54 #include "gc/shared/genCollectedHeap.hpp"
  55 #include "gc/shared/generation.hpp"
  56 #include "gc/shared/generationSpec.hpp"
  57 #include "gc/shared/space.hpp"
  58 #include "interpreter/bytecodeInterpreter.hpp"
  59 #include "interpreter/bytecodes.hpp"
  60 #include "interpreter/interpreter.hpp"
  61 #include "memory/allocation.hpp"
  62 #include "memory/allocation.inline.hpp"
  63 #include "memory/freeBlockDictionary.hpp"
  64 #include "memory/heap.hpp"
  65 #include "memory/metachunk.hpp"
  66 #include "memory/referenceType.hpp"
  67 #include "memory/universe.hpp"
  68 #include "memory/virtualspace.hpp"
  69 #include "oops/arrayKlass.hpp"
  70 #include "oops/arrayOop.hpp"
  71 #include "oops/compiledICHolder.hpp"
  72 #include "oops/constMethod.hpp"
  73 #include "oops/constantPool.hpp"
  74 #include "oops/cpCache.hpp"
  75 #include "oops/instanceClassLoaderKlass.hpp"
  76 #include "oops/instanceKlass.hpp"
  77 #include "oops/instanceMirrorKlass.hpp"
  78 #include "oops/instanceOop.hpp"
  79 #include "oops/klass.hpp"
  80 #include "oops/markOop.hpp"
  81 #include "oops/method.hpp"
  82 #include "oops/methodCounters.hpp"
  83 #include "oops/methodData.hpp"
  84 #include "oops/objArrayKlass.hpp"
  85 #include "oops/objArrayOop.hpp"
  86 #include "oops/oop.inline.hpp"
  87 #include "oops/symbol.hpp"
  88 #include "oops/typeArrayKlass.hpp"
  89 #include "oops/typeArrayOop.hpp"
  90 #include "prims/jvmtiAgentThread.hpp"
  91 #include "runtime/arguments.hpp"
  92 #include "runtime/deoptimization.hpp"
  93 #include "runtime/globals.hpp"
  94 #include "runtime/java.hpp"
  95 #include "runtime/javaCalls.hpp"
  96 #include "runtime/os.hpp"
  97 #include "runtime/perfMemory.hpp"
  98 #include "runtime/serviceThread.hpp"
  99 #include "runtime/sharedRuntime.hpp"
 100 #include "runtime/stubRoutines.hpp"
 101 #include "runtime/thread.inline.hpp"
 102 #include "runtime/vframeArray.hpp"
 103 #include "runtime/vmStructs.hpp"
 104 #include "utilities/array.hpp"
 105 #include "utilities/globalDefinitions.hpp"
 106 #include "utilities/hashtable.hpp"
 107 #include "utilities/macros.hpp"
 108 
 109 #ifdef TARGET_OS_FAMILY_linux
 110 # include "vmStructs_linux.hpp"
 111 #endif
 112 #ifdef TARGET_OS_FAMILY_solaris
 113 # include "vmStructs_solaris.hpp"
 114 #endif
 115 #ifdef TARGET_OS_FAMILY_windows
 116 # include "vmStructs_windows.hpp"
 117 #endif
 118 #ifdef TARGET_OS_FAMILY_aix
 119 # include "vmStructs_aix.hpp"
 120 #endif
 121 #ifdef TARGET_OS_FAMILY_bsd
 122 # include "vmStructs_bsd.hpp"
 123 #endif
 124 
 125 #ifdef TARGET_ARCH_x86
 126 # include "vmStructs_x86.hpp"
 127 #endif
 128 #ifdef TARGET_ARCH_sparc
 129 # include "vmStructs_sparc.hpp"
 130 #endif
 131 #ifdef TARGET_ARCH_zero
 132 # include "vmStructs_zero.hpp"
 133 #endif
 134 #ifdef TARGET_ARCH_arm
 135 # include "vmStructs_arm.hpp"
 136 #endif
 137 #ifdef TARGET_ARCH_ppc
 138 # include "vmStructs_ppc.hpp"
 139 #endif
 140 #ifdef TARGET_ARCH_aarch64
 141 # include "vmStructs_aarch64.hpp"
 142 #endif
 143 
 144 #ifdef TARGET_OS_ARCH_linux_x86
 145 # include "vmStructs_linux_x86.hpp"
 146 #endif
 147 #ifdef TARGET_OS_ARCH_linux_sparc
 148 # include "vmStructs_linux_sparc.hpp"
 149 #endif
 150 #ifdef TARGET_OS_ARCH_linux_zero
 151 # include "vmStructs_linux_zero.hpp"
 152 #endif
 153 #ifdef TARGET_OS_ARCH_solaris_x86
 154 # include "vmStructs_solaris_x86.hpp"
 155 #endif
 156 #ifdef TARGET_OS_ARCH_solaris_sparc
 157 # include "vmStructs_solaris_sparc.hpp"
 158 #endif
 159 #ifdef TARGET_OS_ARCH_windows_x86
 160 # include "vmStructs_windows_x86.hpp"
 161 #endif
 162 #ifdef TARGET_OS_ARCH_linux_arm
 163 # include "vmStructs_linux_arm.hpp"
 164 #endif
 165 #ifdef TARGET_OS_ARCH_linux_ppc
 166 # include "vmStructs_linux_ppc.hpp"
 167 #endif
 168 #ifdef TARGET_OS_ARCH_linux_aarch64
 169 # include "vmStructs_linux_aarch64.hpp"
 170 #endif
 171 #ifdef TARGET_OS_ARCH_aix_ppc
 172 # include "vmStructs_aix_ppc.hpp"
 173 #endif
 174 #ifdef TARGET_OS_ARCH_bsd_x86
 175 # include "vmStructs_bsd_x86.hpp"
 176 #endif
 177 #ifdef TARGET_OS_ARCH_bsd_zero
 178 # include "vmStructs_bsd_zero.hpp"
 179 #endif
 180 
 181 #if INCLUDE_ALL_GCS
 182 #include "gc/cms/compactibleFreeListSpace.hpp"
 183 #include "gc/cms/concurrentMarkSweepGeneration.hpp"
 184 #include "gc/cms/concurrentMarkSweepThread.hpp"
 185 #include "gc/cms/parNewGeneration.hpp"
 186 #include "gc/cms/vmStructs_cms.hpp"
 187 #include "gc/cms/vmStructs_parNew.hpp"
 188 #include "gc/g1/vmStructs_g1.hpp"
 189 #include "gc/parallel/asPSOldGen.hpp"
 190 #include "gc/parallel/asPSYoungGen.hpp"
 191 #include "gc/parallel/parallelScavengeHeap.hpp"
 192 #include "gc/parallel/psOldGen.hpp"
 193 #include "gc/parallel/psVirtualspace.hpp"
 194 #include "gc/parallel/psYoungGen.hpp"
 195 #include "gc/parallel/vmStructs_parallelgc.hpp"
 196 #endif // INCLUDE_ALL_GCS
 197 
 198 #if INCLUDE_JVMCI
 199 # include "jvmci/vmStructs_jvmci.hpp"
 200 #endif
 201 
 202 #if INCLUDE_TRACE
 203 #include "runtime/vmStructs_trace.hpp"
 204 #endif
 205 
 206 #include "runtime/vmStructs_ext.hpp"
 207 
 208 #ifdef COMPILER2
 209 #include "opto/addnode.hpp"
 210 #include "opto/block.hpp"
 211 #include "opto/callnode.hpp"
 212 #include "opto/castnode.hpp"
 213 #include "opto/cfgnode.hpp"
 214 #include "opto/chaitin.hpp"
 215 #include "opto/convertnode.hpp"
 216 #include "opto/divnode.hpp"
 217 #include "opto/intrinsicnode.hpp"
 218 #include "opto/locknode.hpp"
 219 #include "opto/loopnode.hpp"
 220 #include "opto/machnode.hpp"
 221 #include "opto/matcher.hpp"
 222 #include "opto/mathexactnode.hpp"
 223 #include "opto/movenode.hpp"
 224 #include "opto/mulnode.hpp"
 225 #include "opto/narrowptrnode.hpp"
 226 #include "opto/opaquenode.hpp"
 227 #include "opto/optoreg.hpp"
 228 #include "opto/parse.hpp"
 229 #include "opto/phaseX.hpp"
 230 #include "opto/regalloc.hpp"
 231 #include "opto/rootnode.hpp"
 232 #include "opto/subnode.hpp"
 233 #include "opto/vectornode.hpp"
 234 #endif // COMPILER2
 235 
 236 // Note: the cross-product of (c1, c2, product, nonproduct, ...),
 237 // (nonstatic, static), and (unchecked, checked) has not been taken.
 238 // Only the macros currently needed have been defined.
 239 
 240 // A field whose type is not checked is given a null string as the
 241 // type name, indicating an "opaque" type to the serviceability agent.
 242 
 243 // NOTE: there is an interdependency between this file and
 244 // HotSpotTypeDataBase.java, which parses the type strings.
 245 
 246 #ifndef REG_COUNT
 247   #define REG_COUNT 0
 248 #endif
 249 
 250 #if INCLUDE_JVMTI
 251   #define JVMTI_STRUCTS(static_field) \
 252     static_field(JvmtiExport,                     _can_access_local_variables,                  bool)                                  \
 253     static_field(JvmtiExport,                     _can_hotswap_or_post_breakpoint,              bool)                                  \
 254     static_field(JvmtiExport,                     _can_post_on_exceptions,                      bool)                                  \
 255     static_field(JvmtiExport,                     _can_walk_any_space,                          bool)
 256 #else
 257   #define JVMTI_STRUCTS(static_field)
 258 #endif // INCLUDE_JVMTI
 259 
 260 typedef HashtableEntry&lt;intptr_t, mtInternal&gt;  IntptrHashtableEntry;
 261 typedef Hashtable&lt;intptr_t, mtInternal&gt;       IntptrHashtable;
 262 typedef Hashtable&lt;Symbol*, mtSymbol&gt;          SymbolHashtable;
 263 typedef HashtableEntry&lt;Symbol*, mtClass&gt;      SymbolHashtableEntry;
 264 typedef Hashtable&lt;oop, mtSymbol&gt;              StringHashtable;
 265 typedef TwoOopHashtable&lt;Klass*, mtClass&gt;      KlassTwoOopHashtable;
 266 typedef Hashtable&lt;Klass*, mtClass&gt;            KlassHashtable;
 267 typedef HashtableEntry&lt;Klass*, mtClass&gt;       KlassHashtableEntry;
 268 typedef TwoOopHashtable&lt;Symbol*, mtClass&gt;     SymbolTwoOopHashtable;
 269 typedef CompactHashtable&lt;Symbol*, char&gt;       SymbolCompactHashTable;
 270 
 271 //--------------------------------------------------------------------------------
 272 // VM_STRUCTS
 273 //
 274 // This list enumerates all of the fields the serviceability agent
 275 // needs to know about. Be sure to see also the type table below this one.
 276 // NOTE that there are platform-specific additions to this table in
 277 // vmStructs_&lt;os&gt;_&lt;cpu&gt;.hpp.
 278 
 279 #define VM_STRUCTS(nonstatic_field, \
 280                    static_field, \
 281                    static_ptr_volatile_field, \
 282                    unchecked_nonstatic_field, \
 283                    volatile_nonstatic_field, \
 284                    nonproduct_nonstatic_field, \
 285                    c1_nonstatic_field, \
 286                    c2_nonstatic_field, \
 287                    unchecked_c1_static_field, \
 288                    unchecked_c2_static_field) \
 289                                                                                                                                      \
 290   /******************************************************************/                                                               \
 291   /* OopDesc and Klass hierarchies (NOTE: MethodData* incomplete) */                                                                 \
 292   /******************************************************************/                                                               \
 293                                                                                                                                      \
 294   volatile_nonstatic_field(oopDesc,            _mark,                                         markOop)                               \
 295   volatile_nonstatic_field(oopDesc,            _metadata._klass,                              Klass*)                                \
 296   volatile_nonstatic_field(oopDesc,            _metadata._compressed_klass,                   narrowOop)                             \
 297      static_field(oopDesc,                     _bs,                                           BarrierSet*)                           \
 298   nonstatic_field(ArrayKlass,                  _dimension,                                    int)                                   \
 299   volatile_nonstatic_field(ArrayKlass,         _higher_dimension,                             Klass*)                                \
 300   volatile_nonstatic_field(ArrayKlass,         _lower_dimension,                              Klass*)                                \
 301   nonstatic_field(ArrayKlass,                  _vtable_len,                                   int)                                   \
 302   nonstatic_field(CompiledICHolder,            _holder_method,                                Method*)                               \
 303   nonstatic_field(CompiledICHolder,            _holder_klass,                                 Klass*)                                \
 304   nonstatic_field(ConstantPool,                _tags,                                         Array&lt;u1&gt;*)                            \
 305   nonstatic_field(ConstantPool,                _cache,                                        ConstantPoolCache*)                    \
 306   nonstatic_field(ConstantPool,                _pool_holder,                                  InstanceKlass*)                        \
 307   nonstatic_field(ConstantPool,                _operands,                                     Array&lt;u2&gt;*)                            \
 308   nonstatic_field(ConstantPool,                _length,                                       int)                                   \
 309   nonstatic_field(ConstantPool,                _resolved_references,                          jobject)                               \
 310   nonstatic_field(ConstantPool,                _reference_map,                                Array&lt;u2&gt;*)                            \
 311   nonstatic_field(ConstantPoolCache,           _length,                                       int)                                   \
 312   nonstatic_field(ConstantPoolCache,           _constant_pool,                                ConstantPool*)                         \
 313   nonstatic_field(InstanceKlass,               _array_klasses,                                Klass*)                                \
 314   nonstatic_field(InstanceKlass,               _methods,                                      Array&lt;Method*&gt;*)                       \
 315   nonstatic_field(InstanceKlass,               _default_methods,                              Array&lt;Method*&gt;*)                       \
 316   nonstatic_field(InstanceKlass,               _local_interfaces,                             Array&lt;Klass*&gt;*)                        \
 317   nonstatic_field(InstanceKlass,               _transitive_interfaces,                        Array&lt;Klass*&gt;*)                        \
 318   nonstatic_field(InstanceKlass,               _fields,                                       Array&lt;u2&gt;*)                            \
 319   nonstatic_field(InstanceKlass,               _java_fields_count,                            u2)                                    \
 320   nonstatic_field(InstanceKlass,               _constants,                                    ConstantPool*)                         \
 321   nonstatic_field(InstanceKlass,               _class_loader_data,                            ClassLoaderData*)                      \
 322   nonstatic_field(InstanceKlass,               _source_file_name_index,                       u2)                                    \
 323   nonstatic_field(InstanceKlass,               _source_debug_extension,                       char*)                                 \
 324   nonstatic_field(InstanceKlass,               _inner_classes,                                Array&lt;jushort&gt;*)                       \
 325   nonstatic_field(InstanceKlass,               _nonstatic_field_size,                         int)                                   \
 326   nonstatic_field(InstanceKlass,               _static_field_size,                            int)                                   \
 327   nonstatic_field(InstanceKlass,               _static_oop_field_count,                       u2)                                    \
 328   nonstatic_field(InstanceKlass,               _nonstatic_oop_map_size,                       int)                                   \
 329   nonstatic_field(InstanceKlass,               _is_marked_dependent,                          bool)                                  \
 330   nonstatic_field(InstanceKlass,               _misc_flags,                                   u2)                                    \
 331   nonstatic_field(InstanceKlass,               _minor_version,                                u2)                                    \
 332   nonstatic_field(InstanceKlass,               _major_version,                                u2)                                    \
 333   nonstatic_field(InstanceKlass,               _init_state,                                   u1)                                    \
 334   nonstatic_field(InstanceKlass,               _init_thread,                                  Thread*)                               \
 335   nonstatic_field(InstanceKlass,               _vtable_len,                                   int)                                   \
 336   nonstatic_field(InstanceKlass,               _itable_len,                                   int)                                   \
 337   nonstatic_field(InstanceKlass,               _reference_type,                               u1)                                    \
 338   volatile_nonstatic_field(InstanceKlass,      _oop_map_cache,                                OopMapCache*)                          \
 339   nonstatic_field(InstanceKlass,               _jni_ids,                                      JNIid*)                                \
 340   nonstatic_field(InstanceKlass,               _osr_nmethods_head,                            nmethod*)                              \
 341   nonstatic_field(InstanceKlass,               _breakpoints,                                  BreakpointInfo*)                       \
 342   nonstatic_field(InstanceKlass,               _generic_signature_index,                      u2)                                    \
 343   nonstatic_field(InstanceKlass,               _methods_jmethod_ids,                          jmethodID*)                            \
 344   volatile_nonstatic_field(InstanceKlass,      _idnum_allocated_count,                        u2)                                    \
 345   nonstatic_field(InstanceKlass,               _annotations,                                  Annotations*)                          \
 346   nonstatic_field(InstanceKlass,               _dependencies,                                 nmethodBucket*)                        \
 347   nonstatic_field(nmethodBucket,               _nmethod,                                      nmethod*)                              \
 348   nonstatic_field(nmethodBucket,               _count,                                        int)                                   \
 349   nonstatic_field(nmethodBucket,               _next,                                         nmethodBucket*)                        \
 350   nonstatic_field(InstanceKlass,               _method_ordering,                              Array&lt;int&gt;*)                           \
 351   nonstatic_field(InstanceKlass,               _default_vtable_indices,                       Array&lt;int&gt;*)                           \
 352   nonstatic_field(Klass,                       _super_check_offset,                           juint)                                 \
 353   nonstatic_field(Klass,                       _secondary_super_cache,                        Klass*)                                \
 354   nonstatic_field(Klass,                       _secondary_supers,                             Array&lt;Klass*&gt;*)                        \
 355   nonstatic_field(Klass,                       _primary_supers[0],                            Klass*)                                \
 356   nonstatic_field(Klass,                       _java_mirror,                                  oop)                                   \
 357   nonstatic_field(Klass,                       _modifier_flags,                               jint)                                  \
 358   nonstatic_field(Klass,                       _super,                                        Klass*)                                \
 359   nonstatic_field(Klass,                       _subklass,                                     Klass*)                                \
 360   nonstatic_field(Klass,                       _layout_helper,                                jint)                                  \
 361   nonstatic_field(Klass,                       _name,                                         Symbol*)                               \
 362   nonstatic_field(Klass,                       _access_flags,                                 AccessFlags)                           \
 363   nonstatic_field(Klass,                       _prototype_header,                             markOop)                               \
 364   nonstatic_field(Klass,                       _next_sibling,                                 Klass*)                                \
 365   nonstatic_field(vtableEntry,                 _method,                                       Method*)                               \
 366   nonstatic_field(MethodData,                  _size,                                         int)                                   \
 367   nonstatic_field(MethodData,                  _method,                                       Method*)                               \
 368   nonstatic_field(MethodData,                  _data_size,                                    int)                                   \
 369   nonstatic_field(MethodData,                  _data[0],                                      intptr_t)                              \
 370   nonstatic_field(MethodData,                  _parameters_type_data_di,                      int)                                   \
 371   nonstatic_field(MethodData,                  _nof_decompiles,                               uint)                                  \
 372   nonstatic_field(MethodData,                  _nof_overflow_recompiles,                      uint)                                  \
 373   nonstatic_field(MethodData,                  _nof_overflow_traps,                           uint)                                  \
 374   nonstatic_field(MethodData,                  _trap_hist._array[0],                          u1)                                    \
 375   nonstatic_field(MethodData,                  _eflags,                                       intx)                                  \
 376   nonstatic_field(MethodData,                  _arg_local,                                    intx)                                  \
 377   nonstatic_field(MethodData,                  _arg_stack,                                    intx)                                  \
 378   nonstatic_field(MethodData,                  _arg_returned,                                 intx)                                  \
 379   nonstatic_field(MethodData,                  _tenure_traps,                                 uint)                                  \
 380   nonstatic_field(MethodData,                  _invoke_mask,                                  int)                                   \
 381   nonstatic_field(MethodData,                  _backedge_mask,                                int)                                   \
 382   nonstatic_field(DataLayout,                  _header._struct._tag,                          u1)                                    \
 383   nonstatic_field(DataLayout,                  _header._struct._flags,                        u1)                                    \
 384   nonstatic_field(DataLayout,                  _header._struct._bci,                          u2)                                    \
 385   nonstatic_field(DataLayout,                  _cells[0],                                     intptr_t)                              \
 386   nonstatic_field(MethodCounters,              _nmethod_age,                                  int)                                   \
 387   nonstatic_field(MethodCounters,              _interpreter_invocation_limit,                 int)                                   \
 388   nonstatic_field(MethodCounters,              _interpreter_backward_branch_limit,            int)                                   \
 389   nonstatic_field(MethodCounters,              _interpreter_profile_limit,                    int)                                   \
 390   nonstatic_field(MethodCounters,              _invoke_mask,                                  int)                                   \
 391   nonstatic_field(MethodCounters,              _backedge_mask,                                int)                                   \
 392   nonstatic_field(MethodCounters,              _interpreter_invocation_count,                 int)                                   \
 393   nonstatic_field(MethodCounters,              _interpreter_throwout_count,                   u2)                                    \
 394   nonstatic_field(MethodCounters,              _number_of_breakpoints,                        u2)                                    \
 395   nonstatic_field(MethodCounters,              _invocation_counter,                           InvocationCounter)                     \
 396   nonstatic_field(MethodCounters,              _backedge_counter,                             InvocationCounter)                     \
 397   nonstatic_field(Method,                      _constMethod,                                  ConstMethod*)                          \
 398   nonstatic_field(Method,                      _method_data,                                  MethodData*)                           \
 399   nonstatic_field(Method,                      _method_counters,                              MethodCounters*)                       \
 400   nonstatic_field(Method,                      _access_flags,                                 AccessFlags)                           \
 401   nonstatic_field(Method,                      _vtable_index,                                 int)                                   \
 402   nonstatic_field(Method,                      _intrinsic_id,                                 u2)                                    \
 403   nonstatic_field(Method,                      _flags,                                        u1)                                    \
 404   nonproduct_nonstatic_field(Method,           _compiled_invocation_count,                    int)                                   \
 405   volatile_nonstatic_field(Method,             _code,                                         nmethod*)                              \
 406   nonstatic_field(Method,                      _i2i_entry,                                    address)                               \
 407   nonstatic_field(Method,                      _adapter,                                      AdapterHandlerEntry*)                  \
 408   volatile_nonstatic_field(Method,             _from_compiled_entry,                          address)                               \
 409   volatile_nonstatic_field(Method,             _from_interpreted_entry,                       address)                               \
 410   volatile_nonstatic_field(ConstMethod,        _fingerprint,                                  uint64_t)                              \
 411   nonstatic_field(ConstMethod,                 _constants,                                    ConstantPool*)                         \
 412   nonstatic_field(ConstMethod,                 _stackmap_data,                                Array&lt;u1&gt;*)                            \
 413   nonstatic_field(ConstMethod,                 _constMethod_size,                             int)                                   \
 414   nonstatic_field(ConstMethod,                 _flags,                                        u2)                                    \
 415   nonstatic_field(ConstMethod,                 _code_size,                                    u2)                                    \
 416   nonstatic_field(ConstMethod,                 _name_index,                                   u2)                                    \
 417   nonstatic_field(ConstMethod,                 _signature_index,                              u2)                                    \
 418   nonstatic_field(ConstMethod,                 _method_idnum,                                 u2)                                    \
 419   nonstatic_field(ConstMethod,                 _max_stack,                                    u2)                                    \
 420   nonstatic_field(ConstMethod,                 _max_locals,                                   u2)                                    \
 421   nonstatic_field(ConstMethod,                 _size_of_parameters,                           u2)                                    \
 422   nonstatic_field(ObjArrayKlass,               _element_klass,                                Klass*)                                \
 423   nonstatic_field(ObjArrayKlass,               _bottom_klass,                                 Klass*)                                \
 424   volatile_nonstatic_field(Symbol,             _refcount,                                     short)                                 \
 425   nonstatic_field(Symbol,                      _identity_hash,                                short)                                 \
 426   nonstatic_field(Symbol,                      _length,                                       unsigned short)                        \
 427   unchecked_nonstatic_field(Symbol,            _body,                                         sizeof(jbyte)) /* NOTE: no type */     \
 428   nonstatic_field(Symbol,                      _body[0],                                      jbyte)                                 \
 429   nonstatic_field(TypeArrayKlass,              _max_length,                                   int)                                   \
 430                                                                                                                                      \
 431   /***********************/                                                                                                          \
 432   /* Constant Pool Cache */                                                                                                          \
 433   /***********************/                                                                                                          \
 434                                                                                                                                      \
 435   volatile_nonstatic_field(ConstantPoolCacheEntry,      _indices,                             intx)                                  \
 436   nonstatic_field(ConstantPoolCacheEntry,               _f1,                                  volatile Metadata*)                    \
 437   volatile_nonstatic_field(ConstantPoolCacheEntry,      _f2,                                  intx)                                  \
 438   volatile_nonstatic_field(ConstantPoolCacheEntry,      _flags,                               intx)                                  \
 439                                                                                                                                      \
 440   /********************************/                                                                                                 \
 441   /* MethodOop-related structures */                                                                                                 \
 442   /********************************/                                                                                                 \
 443                                                                                                                                      \
 444   nonstatic_field(CheckedExceptionElement,     class_cp_index,                                u2)                                    \
 445   nonstatic_field(LocalVariableTableElement,   start_bci,                                     u2)                                    \
 446   nonstatic_field(LocalVariableTableElement,   length,                                        u2)                                    \
 447   nonstatic_field(LocalVariableTableElement,   name_cp_index,                                 u2)                                    \
 448   nonstatic_field(LocalVariableTableElement,   descriptor_cp_index,                           u2)                                    \
 449   nonstatic_field(LocalVariableTableElement,   signature_cp_index,                            u2)                                    \
 450   nonstatic_field(LocalVariableTableElement,   slot,                                          u2)                                    \
 451   nonstatic_field(ExceptionTableElement,       start_pc,                                      u2)                                    \
 452   nonstatic_field(ExceptionTableElement,       end_pc,                                        u2)                                    \
 453   nonstatic_field(ExceptionTableElement,       handler_pc,                                    u2)                                    \
 454   nonstatic_field(ExceptionTableElement,       catch_type_index,                              u2)                                    \
 455   nonstatic_field(BreakpointInfo,              _orig_bytecode,                                Bytecodes::Code)                       \
 456   nonstatic_field(BreakpointInfo,              _bci,                                          int)                                   \
 457   nonstatic_field(BreakpointInfo,              _name_index,                                   u2)                                    \
 458   nonstatic_field(BreakpointInfo,              _signature_index,                              u2)                                    \
 459   nonstatic_field(BreakpointInfo,              _next,                                         BreakpointInfo*)                       \
 460   /***********/                                                                                                                      \
 461   /* JNI IDs */                                                                                                                      \
 462   /***********/                                                                                                                      \
 463                                                                                                                                      \
 464   nonstatic_field(JNIid,                       _holder,                                       Klass*)                                \
 465   nonstatic_field(JNIid,                       _next,                                         JNIid*)                                \
 466   nonstatic_field(JNIid,                       _offset,                                       int)                                   \
 467   /************/                                                                                                                     \
 468   /* Universe */                                                                                                                     \
 469   /************/                                                                                                                     \
 470                                                                                                                                      \
 471      static_field(Universe,                    _boolArrayKlassObj,                            Klass*)                                \
 472      static_field(Universe,                    _byteArrayKlassObj,                            Klass*)                                \
 473      static_field(Universe,                    _charArrayKlassObj,                            Klass*)                                \
 474      static_field(Universe,                    _intArrayKlassObj,                             Klass*)                                \
 475      static_field(Universe,                    _shortArrayKlassObj,                           Klass*)                                \
 476      static_field(Universe,                    _longArrayKlassObj,                            Klass*)                                \
 477      static_field(Universe,                    _singleArrayKlassObj,                          Klass*)                                \
 478      static_field(Universe,                    _doubleArrayKlassObj,                          Klass*)                                \
 479      static_field(Universe,                    _mirrors[0],                                   oop)                                   \
 480      static_field(Universe,                    _main_thread_group,                            oop)                                   \
 481      static_field(Universe,                    _system_thread_group,                          oop)                                   \
 482      static_field(Universe,                    _the_empty_class_klass_array,                  objArrayOop)                           \
 483      static_field(Universe,                    _null_ptr_exception_instance,                  oop)                                   \
 484      static_field(Universe,                    _arithmetic_exception_instance,                oop)                                   \
 485      static_field(Universe,                    _vm_exception,                                 oop)                                   \
 486      static_field(Universe,                    _collectedHeap,                                CollectedHeap*)                        \
 487      static_field(Universe,                    _base_vtable_size,                             int)                                   \
 488      static_field(Universe,                    _bootstrapping,                                bool)                                  \
 489      static_field(Universe,                    _fully_initialized,                            bool)                                  \
 490      static_field(Universe,                    _verify_count,                                 int)                                   \
 491      static_field(Universe,                    _verify_oop_mask,                              uintptr_t)                             \
 492      static_field(Universe,                    _verify_oop_bits,                              uintptr_t)                             \
 493      static_field(Universe,                    _non_oop_bits,                                 intptr_t)                              \
 494      static_field(Universe,                    _narrow_oop._base,                             address)                               \
 495      static_field(Universe,                    _narrow_oop._shift,                            int)                                   \
 496      static_field(Universe,                    _narrow_oop._use_implicit_null_checks,         bool)                                  \
 497      static_field(Universe,                    _narrow_klass._base,                           address)                               \
 498      static_field(Universe,                    _narrow_klass._shift,                          int)                                   \
 499                                                                                                                                      \
 500   /******/                                                                                                                           \
 501   /* os */                                                                                                                           \
 502   /******/                                                                                                                           \
 503                                                                                                                                      \
 504      static_field(os,                          _polling_page,                                 address)                               \
 505                                                                                                                                      \
 506   /**********************************************************************************/                                               \
 507   /* Generation and Space hierarchies                                               */                                               \
 508   /**********************************************************************************/                                               \
 509                                                                                                                                      \
 510   unchecked_nonstatic_field(ageTable,          sizes,                                         sizeof(ageTable::sizes))               \
 511                                                                                                                                      \
 512   nonstatic_field(BarrierSet,                  _fake_rtti,                                    BarrierSet::FakeRtti)                  \
 513                                                                                                                                      \
 514   nonstatic_field(BarrierSet::FakeRtti,        _concrete_tag,                                 BarrierSet::Name)                      \
 515                                                                                                                                      \
 516   nonstatic_field(BlockOffsetTable,            _bottom,                                       HeapWord*)                             \
 517   nonstatic_field(BlockOffsetTable,            _end,                                          HeapWord*)                             \
 518                                                                                                                                      \
 519   nonstatic_field(BlockOffsetSharedArray,      _reserved,                                     MemRegion)                             \
 520   nonstatic_field(BlockOffsetSharedArray,      _end,                                          HeapWord*)                             \
 521   nonstatic_field(BlockOffsetSharedArray,      _vs,                                           VirtualSpace)                          \
 522   nonstatic_field(BlockOffsetSharedArray,      _offset_array,                                 u_char*)                               \
 523                                                                                                                                      \
 524   nonstatic_field(BlockOffsetArray,            _array,                                        BlockOffsetSharedArray*)               \
 525   nonstatic_field(BlockOffsetArray,            _sp,                                           Space*)                                \
 526   nonstatic_field(BlockOffsetArrayContigSpace, _next_offset_threshold,                        HeapWord*)                             \
 527   nonstatic_field(BlockOffsetArrayContigSpace, _next_offset_index,                            size_t)                                \
 528                                                                                                                                      \
 529   nonstatic_field(BlockOffsetArrayNonContigSpace, _unallocated_block,                         HeapWord*)                             \
 530                                                                                                                                      \
 531   nonstatic_field(CardGeneration,              _rs,                                           CardTableRS*)                          \
 532   nonstatic_field(CardGeneration,              _bts,                                          BlockOffsetSharedArray*)               \
 533   nonstatic_field(CardGeneration,              _shrink_factor,                                size_t)                                \
 534   nonstatic_field(CardGeneration,              _capacity_at_prologue,                         size_t)                                \
 535   nonstatic_field(CardGeneration,              _used_at_prologue,                             size_t)                                \
 536                                                                                                                                      \
 537   nonstatic_field(CardTableModRefBS,           _whole_heap,                                   const MemRegion)                       \
 538   nonstatic_field(CardTableModRefBS,           _guard_index,                                  const size_t)                          \
 539   nonstatic_field(CardTableModRefBS,           _last_valid_index,                             const size_t)                          \
 540   nonstatic_field(CardTableModRefBS,           _page_size,                                    const size_t)                          \
 541   nonstatic_field(CardTableModRefBS,           _byte_map_size,                                const size_t)                          \
 542   nonstatic_field(CardTableModRefBS,           _byte_map,                                     jbyte*)                                \
 543   nonstatic_field(CardTableModRefBS,           _cur_covered_regions,                          int)                                   \
 544   nonstatic_field(CardTableModRefBS,           _covered,                                      MemRegion*)                            \
 545   nonstatic_field(CardTableModRefBS,           _committed,                                    MemRegion*)                            \
 546   nonstatic_field(CardTableModRefBS,           _guard_region,                                 MemRegion)                             \
 547   nonstatic_field(CardTableModRefBS,           byte_map_base,                                 jbyte*)                                \
 548                                                                                                                                      \
 549   nonstatic_field(CardTableRS,                 _ct_bs,                                        CardTableModRefBSForCTRS*)             \
 550                                                                                                                                      \
 551   nonstatic_field(CollectedHeap,               _reserved,                                     MemRegion)                             \
 552   nonstatic_field(CollectedHeap,               _barrier_set,                                  BarrierSet*)                           \
 553   nonstatic_field(CollectedHeap,               _defer_initial_card_mark,                      bool)                                  \
 554   nonstatic_field(CollectedHeap,               _is_gc_active,                                 bool)                                  \
 555   nonstatic_field(CollectedHeap,               _total_collections,                            unsigned int)                          \
 556                                                                                                                                      \
 557   nonstatic_field(CompactibleSpace,            _compaction_top,                               HeapWord*)                             \
 558   nonstatic_field(CompactibleSpace,            _first_dead,                                   HeapWord*)                             \
 559   nonstatic_field(CompactibleSpace,            _end_of_live,                                  HeapWord*)                             \
 560                                                                                                                                      \
 561   nonstatic_field(ContiguousSpace,             _top,                                          HeapWord*)                             \
 562   nonstatic_field(ContiguousSpace,             _concurrent_iteration_safe_limit,              HeapWord*)                             \
 563   nonstatic_field(ContiguousSpace,             _saved_mark_word,                              HeapWord*)                             \
 564                                                                                                                                      \
 565   nonstatic_field(DefNewGeneration,            _old_gen,                                      Generation*)                           \
 566   nonstatic_field(DefNewGeneration,            _tenuring_threshold,                           uint)                                  \
 567   nonstatic_field(DefNewGeneration,            _age_table,                                    ageTable)                              \
 568   nonstatic_field(DefNewGeneration,            _eden_space,                                   ContiguousSpace*)                      \
 569   nonstatic_field(DefNewGeneration,            _from_space,                                   ContiguousSpace*)                      \
 570   nonstatic_field(DefNewGeneration,            _to_space,                                     ContiguousSpace*)                      \
 571                                                                                                                                      \
 572   nonstatic_field(Generation,                  _reserved,                                     MemRegion)                             \
 573   nonstatic_field(Generation,                  _virtual_space,                                VirtualSpace)                          \
 574   nonstatic_field(Generation,                  _stat_record,                                  Generation::StatRecord)                \
 575                                                                                                                                      \
 576   nonstatic_field(Generation::StatRecord,      invocations,                                   int)                                   \
 577   nonstatic_field(Generation::StatRecord,      accumulated_time,                              elapsedTimer)                          \
 578                                                                                                                                      \
 579   nonstatic_field(GenerationSpec,              _name,                                         Generation::Name)                      \
 580   nonstatic_field(GenerationSpec,              _init_size,                                    size_t)                                \
 581   nonstatic_field(GenerationSpec,              _max_size,                                     size_t)                                \
 582                                                                                                                                      \
 583   nonstatic_field(GenCollectedHeap,            _young_gen,                                    Generation*)                           \
 584   nonstatic_field(GenCollectedHeap,            _old_gen,                                      Generation*)                           \
 585                                                                                                                                      \
 586   nonstatic_field(GenCollectorPolicy,          _young_gen_spec,                               GenerationSpec*)                       \
 587   nonstatic_field(GenCollectorPolicy,          _old_gen_spec,                                 GenerationSpec*)                       \
 588                                                                                                                                      \
 589   nonstatic_field(HeapWord,                    i,                                             char*)                                 \
 590                                                                                                                                      \
 591   nonstatic_field(MemRegion,                   _start,                                        HeapWord*)                             \
 592   nonstatic_field(MemRegion,                   _word_size,                                    size_t)                                \
 593                                                                                                                                      \
 594   nonstatic_field(OffsetTableContigSpace,      _offsets,                                      BlockOffsetArray)                      \
 595                                                                                                                                      \
 596   nonstatic_field(TenuredGeneration,           _min_heap_delta_bytes,                         size_t)                                \
 597   nonstatic_field(TenuredGeneration,           _the_space,                                    ContiguousSpace*)                      \
 598                                                                                                                                      \
 599   nonstatic_field(Space,                       _bottom,                                       HeapWord*)                             \
 600   nonstatic_field(Space,                       _end,                                          HeapWord*)                             \
 601                                                                                                                                      \
 602   nonstatic_field(ThreadLocalAllocBuffer,      _start,                                        HeapWord*)                             \
 603   nonstatic_field(ThreadLocalAllocBuffer,      _top,                                          HeapWord*)                             \
 604   nonstatic_field(ThreadLocalAllocBuffer,      _end,                                          HeapWord*)                             \
 605   nonstatic_field(ThreadLocalAllocBuffer,      _pf_top,                                       HeapWord*)                             \
 606   nonstatic_field(ThreadLocalAllocBuffer,      _desired_size,                                 size_t)                                \
 607   nonstatic_field(ThreadLocalAllocBuffer,      _refill_waste_limit,                           size_t)                                \
 608      static_field(ThreadLocalAllocBuffer,      _target_refills,                               unsigned)                              \
 609   nonstatic_field(ThreadLocalAllocBuffer,      _number_of_refills,                            unsigned)                              \
 610   nonstatic_field(ThreadLocalAllocBuffer,      _fast_refill_waste,                            unsigned)                              \
 611   nonstatic_field(ThreadLocalAllocBuffer,      _slow_refill_waste,                            unsigned)                              \
 612   nonstatic_field(ThreadLocalAllocBuffer,      _gc_waste,                                     unsigned)                              \
 613   nonstatic_field(ThreadLocalAllocBuffer,      _slow_allocations,                             unsigned)                              \
 614   nonstatic_field(VirtualSpace,                _low_boundary,                                 char*)                                 \
 615   nonstatic_field(VirtualSpace,                _high_boundary,                                char*)                                 \
 616   nonstatic_field(VirtualSpace,                _low,                                          char*)                                 \
 617   nonstatic_field(VirtualSpace,                _high,                                         char*)                                 \
 618   nonstatic_field(VirtualSpace,                _lower_high,                                   char*)                                 \
 619   nonstatic_field(VirtualSpace,                _middle_high,                                  char*)                                 \
 620   nonstatic_field(VirtualSpace,                _upper_high,                                   char*)                                 \
 621                                                                                                                                      \
 622   /************************/                                                                                                         \
 623   /* PerfMemory - jvmstat */                                                                                                         \
 624   /************************/                                                                                                         \
 625                                                                                                                                      \
 626   nonstatic_field(PerfDataPrologue,            magic,                                         jint)                                  \
 627   nonstatic_field(PerfDataPrologue,            byte_order,                                    jbyte)                                 \
 628   nonstatic_field(PerfDataPrologue,            major_version,                                 jbyte)                                 \
 629   nonstatic_field(PerfDataPrologue,            minor_version,                                 jbyte)                                 \
 630   nonstatic_field(PerfDataPrologue,            accessible,                                    jbyte)                                 \
 631   nonstatic_field(PerfDataPrologue,            used,                                          jint)                                  \
 632   nonstatic_field(PerfDataPrologue,            overflow,                                      jint)                                  \
 633   nonstatic_field(PerfDataPrologue,            mod_time_stamp,                                jlong)                                 \
 634   nonstatic_field(PerfDataPrologue,            entry_offset,                                  jint)                                  \
 635   nonstatic_field(PerfDataPrologue,            num_entries,                                   jint)                                  \
 636                                                                                                                                      \
 637   nonstatic_field(PerfDataEntry,               entry_length,                                  jint)                                  \
 638   nonstatic_field(PerfDataEntry,               name_offset,                                   jint)                                  \
 639   nonstatic_field(PerfDataEntry,               vector_length,                                 jint)                                  \
 640   nonstatic_field(PerfDataEntry,               data_type,                                     jbyte)                                 \
 641   nonstatic_field(PerfDataEntry,               flags,                                         jbyte)                                 \
 642   nonstatic_field(PerfDataEntry,               data_units,                                    jbyte)                                 \
 643   nonstatic_field(PerfDataEntry,               data_variability,                              jbyte)                                 \
 644   nonstatic_field(PerfDataEntry,               data_offset,                                   jint)                                  \
 645                                                                                                                                      \
 646      static_field(PerfMemory,                  _start,                                        char*)                                 \
 647      static_field(PerfMemory,                  _end,                                          char*)                                 \
 648      static_field(PerfMemory,                  _top,                                          char*)                                 \
 649      static_field(PerfMemory,                  _capacity,                                     size_t)                                \
 650      static_field(PerfMemory,                  _prologue,                                     PerfDataPrologue*)                     \
 651      static_field(PerfMemory,                  _initialized,                                  jint)                                  \
 652                                                                                                                                      \
 653   /***************/                                                                                                                  \
 654   /* SymbolTable */                                                                                                                  \
 655   /***************/                                                                                                                  \
 656                                                                                                                                      \
 657      static_field(SymbolTable,                 _the_table,                                    SymbolTable*)                          \
 658      static_field(SymbolTable,                 _shared_table,                                 SymbolCompactHashTable)                \
 659                                                                                                                                      \
 660   /***************/                                                                                                                  \
 661   /* StringTable */                                                                                                                  \
 662   /***************/                                                                                                                  \
 663                                                                                                                                      \
 664      static_field(StringTable,                 _the_table,                                    StringTable*)                          \
 665                                                                                                                                      \
 666   /********************/                                                                                                             \
 667   /* CompactHashTable */                                                                                                             \
 668   /********************/                                                                                                             \
 669                                                                                                                                      \
 670   nonstatic_field(SymbolCompactHashTable,      _base_address,                                 uintx)                                 \
 671   nonstatic_field(SymbolCompactHashTable,      _entry_count,                                  juint)                                 \
 672   nonstatic_field(SymbolCompactHashTable,      _bucket_count,                                 juint)                                 \
 673   nonstatic_field(SymbolCompactHashTable,      _table_end_offset,                             juint)                                 \
 674   nonstatic_field(SymbolCompactHashTable,      _buckets,                                      juint*)                                \
 675                                                                                                                                      \
 676   /********************/                                                                                                             \
 677   /* SystemDictionary */                                                                                                             \
 678   /********************/                                                                                                             \
 679                                                                                                                                      \
 680      static_field(SystemDictionary,            _dictionary,                                   Dictionary*)                           \
 681      static_field(SystemDictionary,            _placeholders,                                 PlaceholderTable*)                     \
 682      static_field(SystemDictionary,            _shared_dictionary,                            Dictionary*)                           \
 683      static_field(SystemDictionary,            _system_loader_lock_obj,                       oop)                                   \
 684      static_field(SystemDictionary,            _loader_constraints,                           LoaderConstraintTable*)                \
 685      static_field(SystemDictionary,            WK_KLASS(Object_klass),                        InstanceKlass*)                        \
 686      static_field(SystemDictionary,            WK_KLASS(String_klass),                        InstanceKlass*)                        \
 687      static_field(SystemDictionary,            WK_KLASS(Class_klass),                         InstanceKlass*)                        \
 688      static_field(SystemDictionary,            WK_KLASS(Cloneable_klass),                     InstanceKlass*)                        \
 689      static_field(SystemDictionary,            WK_KLASS(ClassLoader_klass),                   InstanceKlass*)                        \
 690      static_field(SystemDictionary,            WK_KLASS(Serializable_klass),                  InstanceKlass*)                        \
 691      static_field(SystemDictionary,            WK_KLASS(System_klass),                        InstanceKlass*)                        \
 692      static_field(SystemDictionary,            WK_KLASS(Throwable_klass),                     InstanceKlass*)                        \
 693      static_field(SystemDictionary,            WK_KLASS(ThreadDeath_klass),                   InstanceKlass*)                        \
 694      static_field(SystemDictionary,            WK_KLASS(Error_klass),                         InstanceKlass*)                        \
 695      static_field(SystemDictionary,            WK_KLASS(Exception_klass),                     InstanceKlass*)                        \
 696      static_field(SystemDictionary,            WK_KLASS(RuntimeException_klass),              InstanceKlass*)                        \
 697      static_field(SystemDictionary,            WK_KLASS(ClassNotFoundException_klass),        InstanceKlass*)                        \
 698      static_field(SystemDictionary,            WK_KLASS(NoClassDefFoundError_klass),          InstanceKlass*)                        \
 699      static_field(SystemDictionary,            WK_KLASS(LinkageError_klass),                  InstanceKlass*)                        \
 700      static_field(SystemDictionary,            WK_KLASS(ClassCastException_klass),            InstanceKlass*)                        \
 701      static_field(SystemDictionary,            WK_KLASS(ArrayStoreException_klass),           InstanceKlass*)                        \
 702      static_field(SystemDictionary,            WK_KLASS(VirtualMachineError_klass),           InstanceKlass*)                        \
 703      static_field(SystemDictionary,            WK_KLASS(OutOfMemoryError_klass),              InstanceKlass*)                        \
 704      static_field(SystemDictionary,            WK_KLASS(StackOverflowError_klass),            InstanceKlass*)                        \
 705      static_field(SystemDictionary,            WK_KLASS(ProtectionDomain_klass),              InstanceKlass*)                        \
 706      static_field(SystemDictionary,            WK_KLASS(AccessControlContext_klass),          InstanceKlass*)                        \
 707      static_field(SystemDictionary,            WK_KLASS(SecureClassLoader_klass),             InstanceKlass*)                        \
 708      static_field(SystemDictionary,            WK_KLASS(Reference_klass),                     InstanceKlass*)                        \
 709      static_field(SystemDictionary,            WK_KLASS(SoftReference_klass),                 InstanceKlass*)                        \
 710      static_field(SystemDictionary,            WK_KLASS(WeakReference_klass),                 InstanceKlass*)                        \
 711      static_field(SystemDictionary,            WK_KLASS(FinalReference_klass),                InstanceKlass*)                        \
 712      static_field(SystemDictionary,            WK_KLASS(PhantomReference_klass),              InstanceKlass*)                        \
 713      static_field(SystemDictionary,            WK_KLASS(Cleaner_klass),                       InstanceKlass*)                        \
 714      static_field(SystemDictionary,            WK_KLASS(Finalizer_klass),                     InstanceKlass*)                        \
 715      static_field(SystemDictionary,            WK_KLASS(Thread_klass),                        InstanceKlass*)                        \
 716      static_field(SystemDictionary,            WK_KLASS(ThreadGroup_klass),                   InstanceKlass*)                        \
 717      static_field(SystemDictionary,            WK_KLASS(Properties_klass),                    InstanceKlass*)                        \
 718      static_field(SystemDictionary,            WK_KLASS(StringBuffer_klass),                  InstanceKlass*)                        \
 719      static_field(SystemDictionary,            WK_KLASS(MethodHandle_klass),                  InstanceKlass*)                        \
 720      static_field(SystemDictionary,            _box_klasses[0],                               InstanceKlass*)                        \
 721      static_field(SystemDictionary,            _java_system_loader,                           oop)                                   \
 722                                                                                                                                      \
 723   /*************/                                                                                                                    \
 724   /* vmSymbols */                                                                                                                    \
 725   /*************/                                                                                                                    \
 726                                                                                                                                      \
 727      static_field(vmSymbols,                   _symbols[0],                                   Symbol*)                               \
 728                                                                                                                                      \
 729   /*******************/                                                                                                              \
 730   /* HashtableBucket */                                                                                                              \
 731   /*******************/                                                                                                              \
 732                                                                                                                                      \
 733   nonstatic_field(HashtableBucket&lt;mtInternal&gt;, _entry,                                        BasicHashtableEntry&lt;mtInternal&gt;*)      \
 734                                                                                                                                      \
 735   /******************/                                                                                                               \
 736   /* HashtableEntry */                                                                                                               \
 737   /******************/                                                                                                               \
 738                                                                                                                                      \
 739   nonstatic_field(BasicHashtableEntry&lt;mtInternal&gt;, _next,                                     BasicHashtableEntry&lt;mtInternal&gt;*)      \
 740   nonstatic_field(BasicHashtableEntry&lt;mtInternal&gt;, _hash,                                     unsigned int)                          \
 741   nonstatic_field(IntptrHashtableEntry,            _literal,                                  intptr_t)                              \
 742                                                                                                                                      \
 743   /*************/                                                                                                                    \
 744   /* Hashtable */                                                                                                                    \
 745   /*************/                                                                                                                    \
 746                                                                                                                                      \
 747   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _table_size,                                   int)                                   \
 748   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _buckets,                                      HashtableBucket&lt;mtInternal&gt;*)          \
 749   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _free_list,                                    BasicHashtableEntry&lt;mtInternal&gt;*)      \
 750   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _first_free_entry,                             char*)                                 \
 751   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _end_block,                                    char*)                                 \
 752   nonstatic_field(BasicHashtable&lt;mtInternal&gt;,  _entry_size,                                   int)                                   \
 753                                                                                                                                      \
 754   /*******************/                                                                                                              \
 755   /* DictionaryEntry */                                                                                                              \
 756   /*******************/                                                                                                              \
 757                                                                                                                                      \
 758   nonstatic_field(DictionaryEntry,             _loader_data,                                  ClassLoaderData*)                      \
 759   nonstatic_field(DictionaryEntry,             _pd_set,                                       ProtectionDomainEntry*)                \
 760                                                                                                                                      \
 761   /********************/                                                                                                             \
 762                                                                                                                                      \
 763   nonstatic_field(PlaceholderEntry,            _loader_data,                                  ClassLoaderData*)                      \
 764                                                                                                                                      \
 765   /**************************/                                                                                                       \
 766   /* ProtectionDomainEntry  */                                                                                                       \
 767   /**************************/                                                                                                       \
 768                                                                                                                                      \
 769   nonstatic_field(ProtectionDomainEntry,       _next,                                         ProtectionDomainEntry*)                \
 770   nonstatic_field(ProtectionDomainEntry,       _pd_cache,                                     ProtectionDomainCacheEntry*)           \
 771                                                                                                                                      \
 772   /*******************************/                                                                                                  \
 773   /* ProtectionDomainCacheEntry  */                                                                                                  \
 774   /*******************************/                                                                                                  \
 775                                                                                                                                      \
 776   nonstatic_field(ProtectionDomainCacheEntry,  _literal,                                      oop)                                   \
 777                                                                                                                                      \
 778   /*************************/                                                                                                        \
 779   /* LoaderConstraintEntry */                                                                                                        \
 780   /*************************/                                                                                                        \
 781                                                                                                                                      \
 782   nonstatic_field(LoaderConstraintEntry,       _name,                                         Symbol*)                               \
 783   nonstatic_field(LoaderConstraintEntry,       _num_loaders,                                  int)                                   \
 784   nonstatic_field(LoaderConstraintEntry,       _max_loaders,                                  int)                                   \
 785   nonstatic_field(LoaderConstraintEntry,       _loaders,                                      ClassLoaderData**)                     \
 786                                                                                                                                      \
 787   nonstatic_field(ClassLoaderData,             _class_loader,                                 oop)                                   \
 788   nonstatic_field(ClassLoaderData,             _next,                                         ClassLoaderData*)                      \
 789                                                                                                                                      \
 790      static_field(ClassLoaderDataGraph,        _head,                                         ClassLoaderData*)                      \
 791                                                                                                                                      \
 792   /**********/                                                                                                                       \
 793   /* Arrays */                                                                                                                       \
 794   /**********/                                                                                                                       \
 795                                                                                                                                      \
 796   nonstatic_field(Array&lt;Klass*&gt;,               _length,                                       int)                                   \
 797   nonstatic_field(Array&lt;Klass*&gt;,               _data[0],                                      Klass*)                                \
 798                                                                                                                                      \
 799   /*******************/                                                                                                              \
 800   /* GrowableArrays  */                                                                                                              \
 801   /*******************/                                                                                                              \
 802                                                                                                                                      \
 803   nonstatic_field(GenericGrowableArray,        _len,                                          int)                                   \
 804   nonstatic_field(GenericGrowableArray,        _max,                                          int)                                   \
 805   nonstatic_field(GenericGrowableArray,        _arena,                                        Arena*)                                \
 806   nonstatic_field(GrowableArray&lt;int&gt;,          _data,                                         int*)                                  \
 807                                                                                                                                      \
 808   /********************************/                                                                                                 \
 809   /* CodeCache (NOTE: incomplete) */                                                                                                 \
 810   /********************************/                                                                                                 \
 811                                                                                                                                      \
 812      static_field(CodeCache,                   _heaps,                                        GrowableArray&lt;CodeHeap*&gt;*)             \
 813      static_field(CodeCache,                   _low_bound,                                    address)                               \
 814      static_field(CodeCache,                   _high_bound,                                   address)                               \
 815      static_field(CodeCache,                   _scavenge_root_nmethods,                       nmethod*)                              \
 816                                                                                                                                      \
 817   /*******************************/                                                                                                  \
 818   /* CodeHeap (NOTE: incomplete) */                                                                                                  \
 819   /*******************************/                                                                                                  \
 820                                                                                                                                      \
 821   nonstatic_field(CodeHeap,                    _memory,                                       VirtualSpace)                          \
 822   nonstatic_field(CodeHeap,                    _segmap,                                       VirtualSpace)                          \
 823   nonstatic_field(CodeHeap,                    _log2_segment_size,                            int)                                   \
 824   nonstatic_field(HeapBlock,                   _header,                                       HeapBlock::Header)                     \
 825   nonstatic_field(HeapBlock::Header,           _length,                                       size_t)                                \
 826   nonstatic_field(HeapBlock::Header,           _used,                                         bool)                                  \
 827                                                                                                                                      \
 828   /**********************************/                                                                                               \
 829   /* Interpreter (NOTE: incomplete) */                                                                                               \
 830   /**********************************/                                                                                               \
 831                                                                                                                                      \
 832      static_field(AbstractInterpreter,         _code,                                         StubQueue*)                            \
 833                                                                                                                                      \
 834   /****************************/                                                                                                     \
 835   /* Stubs (NOTE: incomplete) */                                                                                                     \
 836   /****************************/                                                                                                     \
 837                                                                                                                                      \
 838   nonstatic_field(StubQueue,                   _stub_buffer,                                  address)                               \
 839   nonstatic_field(StubQueue,                   _buffer_limit,                                 int)                                   \
 840   nonstatic_field(StubQueue,                   _queue_begin,                                  int)                                   \
 841   nonstatic_field(StubQueue,                   _queue_end,                                    int)                                   \
 842   nonstatic_field(StubQueue,                   _number_of_stubs,                              int)                                   \
 843   nonstatic_field(InterpreterCodelet,          _size,                                         int)                                   \
 844   nonstatic_field(InterpreterCodelet,          _description,                                  const char*)                           \
 845   nonstatic_field(InterpreterCodelet,          _bytecode,                                     Bytecodes::Code)                       \
 846                                                                                                                                      \
 847   /***********************************/                                                                                              \
 848   /* StubRoutines (NOTE: incomplete) */                                                                                              \
 849   /***********************************/                                                                                              \
 850                                                                                                                                      \
 851      static_field(StubRoutines,                _verify_oop_count,                             jint)                                  \
 852      static_field(StubRoutines,                _call_stub_return_address,                     address)                               \
 853      static_field(StubRoutines,                _aescrypt_encryptBlock,                        address)                               \
 854      static_field(StubRoutines,                _aescrypt_decryptBlock,                        address)                               \
 855      static_field(StubRoutines,                _cipherBlockChaining_encryptAESCrypt,          address)                               \
 856      static_field(StubRoutines,                _cipherBlockChaining_decryptAESCrypt,          address)                               \
 857      static_field(StubRoutines,                _ghash_processBlocks,                          address)                               \
 858      static_field(StubRoutines,                _updateBytesCRC32,                             address)                               \
 859      static_field(StubRoutines,                _crc_table_adr,                                address)                               \
 860      static_field(StubRoutines,                _crc32c_table_addr,                            address)                               \
 861      static_field(StubRoutines,                _updateBytesCRC32C,                            address)                               \
 862      static_field(StubRoutines,                _multiplyToLen,                                address)                               \
 863      static_field(StubRoutines,                _squareToLen,                                  address)                               \
 864      static_field(StubRoutines,                _mulAdd,                                       address)                               \
 865      static_field(StubRoutines,                _dexp,                                         address)                               \
 866      static_field(StubRoutines,                _dlog,                                         address)                               \
 867      static_field(StubRoutines,                _jbyte_arraycopy,                              address)                               \
 868      static_field(StubRoutines,                _jshort_arraycopy,                             address)                               \
 869      static_field(StubRoutines,                _jint_arraycopy,                               address)                               \
 870      static_field(StubRoutines,                _jlong_arraycopy,                              address)                               \
 871      static_field(StubRoutines,                _oop_arraycopy,                                address)                               \
 872      static_field(StubRoutines,                _oop_arraycopy_uninit,                         address)                               \
 873      static_field(StubRoutines,                _jbyte_disjoint_arraycopy,                     address)                               \
 874      static_field(StubRoutines,                _jshort_disjoint_arraycopy,                    address)                               \
 875      static_field(StubRoutines,                _jint_disjoint_arraycopy,                      address)                               \
 876      static_field(StubRoutines,                _jlong_disjoint_arraycopy,                     address)                               \
 877      static_field(StubRoutines,                _oop_disjoint_arraycopy,                       address)                               \
 878      static_field(StubRoutines,                _oop_disjoint_arraycopy_uninit,                address)                               \
 879      static_field(StubRoutines,                _arrayof_jbyte_arraycopy,                      address)                               \
 880      static_field(StubRoutines,                _arrayof_jshort_arraycopy,                     address)                               \
 881      static_field(StubRoutines,                _arrayof_jint_arraycopy,                       address)                               \
 882      static_field(StubRoutines,                _arrayof_jlong_arraycopy,                      address)                               \
 883      static_field(StubRoutines,                _arrayof_oop_arraycopy,                        address)                               \
 884      static_field(StubRoutines,                _arrayof_oop_arraycopy_uninit,                 address)                               \
 885      static_field(StubRoutines,                _arrayof_jbyte_disjoint_arraycopy,             address)                               \
 886      static_field(StubRoutines,                _arrayof_jshort_disjoint_arraycopy,            address)                               \
 887      static_field(StubRoutines,                _arrayof_jint_disjoint_arraycopy,              address)                               \
 888      static_field(StubRoutines,                _arrayof_jlong_disjoint_arraycopy,             address)                               \
 889      static_field(StubRoutines,                _arrayof_oop_disjoint_arraycopy,               address)                               \
 890      static_field(StubRoutines,                _arrayof_oop_disjoint_arraycopy_uninit,        address)                               \
 891      static_field(StubRoutines,                _checkcast_arraycopy,                          address)                               \
 892      static_field(StubRoutines,                _checkcast_arraycopy_uninit,                   address)                               \
 893      static_field(StubRoutines,                _unsafe_arraycopy,                             address)                               \
 894      static_field(StubRoutines,                _generic_arraycopy,                            address)                               \
 895                                                                                                                                      \
 896   /*****************/                                                                                                                \
 897   /* SharedRuntime */                                                                                                                \
 898   /*****************/                                                                                                                \
 899                                                                                                                                      \
 900      static_field(SharedRuntime,               _wrong_method_blob,                            RuntimeStub*)                          \
 901      static_field(SharedRuntime,               _ic_miss_blob,                                 RuntimeStub*)                          \
 902      static_field(SharedRuntime,               _deopt_blob,                                   DeoptimizationBlob*)                   \
 903                                                                                                                                      \
 904   /***************************************/                                                                                          \
 905   /* PcDesc and other compiled code info */                                                                                          \
 906   /***************************************/                                                                                          \
 907                                                                                                                                      \
 908   nonstatic_field(PcDesc,                      _pc_offset,                                    int)                                   \
 909   nonstatic_field(PcDesc,                      _scope_decode_offset,                          int)                                   \
 910   nonstatic_field(PcDesc,                      _obj_decode_offset,                            int)                                   \
 911   nonstatic_field(PcDesc,                      _flags,                                        int)                                   \
 912                                                                                                                                      \
 913   /***************************************************/                                                                              \
 914   /* CodeBlobs (NOTE: incomplete, but only a little) */                                                                              \
 915   /***************************************************/                                                                              \
 916                                                                                                                                      \
 917   nonstatic_field(CodeBlob,                    _name,                                   const char*)                                 \
 918   nonstatic_field(CodeBlob,                    _size,                                   int)                                         \
 919   nonstatic_field(CodeBlob,                    _header_size,                            int)                                         \
 920   nonstatic_field(CodeBlob,                    _relocation_size,                        int)                                         \
 921   nonstatic_field(CodeBlob,                    _content_offset,                         int)                                         \
 922   nonstatic_field(CodeBlob,                    _code_offset,                            int)                                         \
 923   nonstatic_field(CodeBlob,                    _frame_complete_offset,                  int)                                         \
 924   nonstatic_field(CodeBlob,                    _data_offset,                            int)                                         \
 925   nonstatic_field(CodeBlob,                    _frame_size,                             int)                                         \
 926   nonstatic_field(CodeBlob,                    _oop_maps,                               ImmutableOopMapSet*)                         \
 927                                                                                                                                      \
 928   nonstatic_field(DeoptimizationBlob,          _unpack_offset,                                int)                                   \
 929                                                                                                                                      \
 930   nonstatic_field(RuntimeStub,                 _caller_must_gc_arguments,                     bool)                                  \
 931                                                                                                                                      \
 932   /**************************************************/                                                                               \
 933   /* NMethods (NOTE: incomplete, but only a little) */                                                                               \
 934   /**************************************************/                                                                               \
 935                                                                                                                                      \
 936   nonstatic_field(nmethod,                     _method,                                       Method*)                               \
 937   nonstatic_field(nmethod,                     _entry_bci,                                    int)                                   \
 938   nonstatic_field(nmethod,                     _osr_link,                                     nmethod*)                              \
 939   nonstatic_field(nmethod,                     _scavenge_root_link,                           nmethod*)                              \
 940   nonstatic_field(nmethod,                     _scavenge_root_state,                          jbyte)                                 \
 941   nonstatic_field(nmethod,                     _state,                                        volatile unsigned char)                \
 942   nonstatic_field(nmethod,                     _exception_offset,                             int)                                   \
 943   nonstatic_field(nmethod,                     _deoptimize_offset,                            int)                                   \
 944   nonstatic_field(nmethod,                     _deoptimize_mh_offset,                         int)                                   \
 945   nonstatic_field(nmethod,                     _orig_pc_offset,                               int)                                   \
 946   nonstatic_field(nmethod,                     _stub_offset,                                  int)                                   \
 947   nonstatic_field(nmethod,                     _consts_offset,                                int)                                   \
 948   nonstatic_field(nmethod,                     _oops_offset,                                  int)                                   \
 949   nonstatic_field(nmethod,                     _metadata_offset,                              int)                                   \
 950   nonstatic_field(nmethod,                     _scopes_data_offset,                           int)                                   \
 951   nonstatic_field(nmethod,                     _scopes_pcs_offset,                            int)                                   \
 952   nonstatic_field(nmethod,                     _dependencies_offset,                          int)                                   \
 953   nonstatic_field(nmethod,                     _handler_table_offset,                         int)                                   \
 954   nonstatic_field(nmethod,                     _nul_chk_table_offset,                         int)                                   \
 955   nonstatic_field(nmethod,                     _nmethod_end_offset,                           int)                                   \
 956   nonstatic_field(nmethod,                     _entry_point,                                  address)                               \
 957   nonstatic_field(nmethod,                     _verified_entry_point,                         address)                               \
 958   nonstatic_field(nmethod,                     _osr_entry_point,                              address)                               \
 959   volatile_nonstatic_field(nmethod,            _lock_count,                                   jint)                                  \
 960   nonstatic_field(nmethod,                     _stack_traversal_mark,                         long)                                  \
 961   nonstatic_field(nmethod,                     _compile_id,                                   int)                                   \
 962   nonstatic_field(nmethod,                     _comp_level,                                   int)                                   \
 963   nonstatic_field(nmethod,                     _exception_cache,                              ExceptionCache*)                       \
 964   nonstatic_field(nmethod,                     _marked_for_deoptimization,                    bool)                                  \
 965                                                                                                                                      \
 966   unchecked_c2_static_field(Deoptimization,    _trap_reason_name,                             void*)                                 \
 967                                                                                                                                      \
 968   nonstatic_field(Deoptimization::UnrollBlock, _size_of_deoptimized_frame,                    int)                                   \
 969   nonstatic_field(Deoptimization::UnrollBlock, _caller_adjustment,                            int)                                   \
 970   nonstatic_field(Deoptimization::UnrollBlock, _number_of_frames,                             int)                                   \
 971   nonstatic_field(Deoptimization::UnrollBlock, _total_frame_sizes,                            int)                                   \
 972   nonstatic_field(Deoptimization::UnrollBlock, _frame_sizes,                                  intptr_t*)                             \
 973   nonstatic_field(Deoptimization::UnrollBlock, _frame_pcs,                                    address*)                              \
 974   nonstatic_field(Deoptimization::UnrollBlock, _register_block,                               intptr_t*)                             \
 975   nonstatic_field(Deoptimization::UnrollBlock, _return_type,                                  BasicType)                             \
 976   nonstatic_field(Deoptimization::UnrollBlock, _initial_info,                                 intptr_t)                              \
 977   nonstatic_field(Deoptimization::UnrollBlock, _caller_actual_parameters,                     int)                                   \
 978                                                                                                                                      \
 979   /********************************/                                                                                                 \
 980   /* JavaCalls (NOTE: incomplete) */                                                                                                 \
 981   /********************************/                                                                                                 \
 982                                                                                                                                      \
 983   nonstatic_field(JavaCallWrapper,             _anchor,                                       JavaFrameAnchor)                       \
 984   /********************************/                                                                                                 \
 985   /* JavaFrameAnchor (NOTE: incomplete) */                                                                                           \
 986   /********************************/                                                                                                 \
 987   volatile_nonstatic_field(JavaFrameAnchor,    _last_Java_sp,                                 intptr_t*)                             \
 988   volatile_nonstatic_field(JavaFrameAnchor,    _last_Java_pc,                                 address)                               \
 989                                                                                                                                      \
 990   /******************************/                                                                                                   \
 991   /* Threads (NOTE: incomplete) */                                                                                                   \
 992   /******************************/                                                                                                   \
 993                                                                                                                                      \
 994      static_field(Threads,                     _thread_list,                                  JavaThread*)                           \
 995      static_field(Threads,                     _number_of_threads,                            int)                                   \
 996      static_field(Threads,                     _number_of_non_daemon_threads,                 int)                                   \
 997      static_field(Threads,                     _return_code,                                  int)                                   \
 998                                                                                                                                      \
 999   nonstatic_field(ThreadShadow,                _pending_exception,                            oop)                                   \
1000   nonstatic_field(ThreadShadow,                _exception_file,                               const char*)                           \
1001   nonstatic_field(ThreadShadow,                _exception_line,                               int)                                   \
1002   volatile_nonstatic_field(Thread,             _suspend_flags,                                uint32_t)                              \
1003   nonstatic_field(Thread,                      _active_handles,                               JNIHandleBlock*)                       \
1004   nonstatic_field(Thread,                      _tlab,                                         ThreadLocalAllocBuffer)                \
1005   nonstatic_field(Thread,                      _allocated_bytes,                              jlong)                                 \
1006   nonstatic_field(Thread,                      _current_pending_monitor,                      ObjectMonitor*)                        \
1007   nonstatic_field(Thread,                      _current_pending_monitor_is_from_java,         bool)                                  \
1008   nonstatic_field(Thread,                      _current_waiting_monitor,                      ObjectMonitor*)                        \
1009   nonstatic_field(NamedThread,                 _name,                                         char*)                                 \
1010   nonstatic_field(NamedThread,                 _processed_thread,                             JavaThread*)                           \
1011   nonstatic_field(JavaThread,                  _next,                                         JavaThread*)                           \
1012   nonstatic_field(JavaThread,                  _threadObj,                                    oop)                                   \
1013   nonstatic_field(JavaThread,                  _anchor,                                       JavaFrameAnchor)                       \
1014   nonstatic_field(JavaThread,                  _vm_result,                                    oop)                                   \
1015   nonstatic_field(JavaThread,                  _vm_result_2,                                  Metadata*)                             \
1016   nonstatic_field(JavaThread,                  _pending_async_exception,                      oop)                                   \
1017   volatile_nonstatic_field(JavaThread,         _exception_oop,                                oop)                                   \
1018   volatile_nonstatic_field(JavaThread,         _exception_pc,                                 address)                               \
1019   volatile_nonstatic_field(JavaThread,         _is_method_handle_return,                      int)                                   \
1020   nonstatic_field(JavaThread,                  _special_runtime_exit_condition,               JavaThread::AsyncRequests)             \
1021   nonstatic_field(JavaThread,                  _saved_exception_pc,                           address)                               \
1022   volatile_nonstatic_field(JavaThread,         _thread_state,                                 JavaThreadState)                       \
1023   nonstatic_field(JavaThread,                  _osthread,                                     OSThread*)                             \
1024   nonstatic_field(JavaThread,                  _stack_base,                                   address)                               \
1025   nonstatic_field(JavaThread,                  _stack_size,                                   size_t)                                \
1026   nonstatic_field(JavaThread,                  _vframe_array_head,                            vframeArray*)                          \
1027   nonstatic_field(JavaThread,                  _vframe_array_last,                            vframeArray*)                          \
1028   nonstatic_field(JavaThread,                  _satb_mark_queue,                              SATBMarkQueue)                         \
1029   nonstatic_field(JavaThread,                  _dirty_card_queue,                             DirtyCardQueue)                        \
1030   nonstatic_field(Thread,                      _resource_area,                                ResourceArea*)                         \
1031   nonstatic_field(CompilerThread,              _env,                                          ciEnv*)                                \
1032                                                                                                                                      \
1033   /************/                                                                                                                     \
1034   /* OSThread */                                                                                                                     \
1035   /************/                                                                                                                     \
1036                                                                                                                                      \
1037   volatile_nonstatic_field(OSThread,           _interrupted,                                  jint)                                  \
1038                                                                                                                                      \
1039   /************************/                                                                                                         \
1040   /* OopMap and OopMapSet */                                                                                                         \
1041   /************************/                                                                                                         \
1042                                                                                                                                      \
1043   nonstatic_field(OopMap,                      _pc_offset,                                    int)                                   \
1044   nonstatic_field(OopMap,                      _omv_count,                                    int)                                   \
1045   nonstatic_field(OopMap,                      _write_stream,                                 CompressedWriteStream*)                \
1046   nonstatic_field(OopMapSet,                   _om_count,                                     int)                                   \
1047   nonstatic_field(OopMapSet,                   _om_size,                                      int)                                   \
1048   nonstatic_field(OopMapSet,                   _om_data,                                      OopMap**)                              \
1049                                                                                                                                      \
1050   nonstatic_field(ImmutableOopMapSet,          _count,                                        int)                                   \
1051   nonstatic_field(ImmutableOopMapSet,          _size,                                         int)                                   \
1052                                                                                                                                      \
1053   nonstatic_field(ImmutableOopMapPair,         _pc_offset,                                    int)                                   \
1054   nonstatic_field(ImmutableOopMapPair,         _oopmap_offset,                                int)                                   \
1055                                                                                                                                      \
1056   nonstatic_field(ImmutableOopMap,             _count,                                        int)                                   \
1057                                                                                                                                      \
1058   /*********************************/                                                                                                \
1059   /* JNIHandles and JNIHandleBlock */                                                                                                \
1060   /*********************************/                                                                                                \
1061      static_field(JNIHandles,                  _global_handles,                               JNIHandleBlock*)                       \
1062      static_field(JNIHandles,                  _weak_global_handles,                          JNIHandleBlock*)                       \
1063      static_field(JNIHandles,                  _deleted_handle,                               oop)                                   \
1064                                                                                                                                      \
1065   unchecked_nonstatic_field(JNIHandleBlock,    _handles,       JNIHandleBlock::block_size_in_oops * sizeof(Oop)) /* Note: no type */ \
1066   nonstatic_field(JNIHandleBlock,              _top,                                          int)                                   \
1067   nonstatic_field(JNIHandleBlock,              _next,                                         JNIHandleBlock*)                       \
1068                                                                                                                                      \
1069   /********************/                                                                                                             \
1070   /* CompressedStream */                                                                                                             \
1071   /********************/                                                                                                             \
1072                                                                                                                                      \
1073   nonstatic_field(CompressedStream,            _buffer,                                       u_char*)                               \
1074   nonstatic_field(CompressedStream,            _position,                                     int)                                   \
1075                                                                                                                                      \
1076   /*********************************/                                                                                                \
1077   /* VMRegImpl (NOTE: incomplete) */                                                                                                 \
1078   /*********************************/                                                                                                \
1079                                                                                                                                      \
1080      static_field(VMRegImpl,                   regName[0],                                    const char*)                           \
1081      static_field(VMRegImpl,                   stack0,                                        VMReg)                                 \
1082                                                                                                                                      \
1083   /*******************************/                                                                                                  \
1084   /* Runtime1 (NOTE: incomplete) */                                                                                                  \
1085   /*******************************/                                                                                                  \
1086                                                                                                                                      \
1087   unchecked_c1_static_field(Runtime1,          _blobs,                                 sizeof(Runtime1::_blobs)) /* NOTE: no type */ \
1088                                                                                                                                      \
1089   /**************/                                                                                                                   \
1090   /* allocation */                                                                                                                   \
1091   /**************/                                                                                                                   \
1092                                                                                                                                      \
1093   nonstatic_field(Chunk,                       _next,                                         Chunk*)                                \
1094   nonstatic_field(Chunk,                       _len,                                          const size_t)                          \
1095                                                                                                                                      \
1096   nonstatic_field(Arena,                       _first,                                        Chunk*)                                \
1097   nonstatic_field(Arena,                       _chunk,                                        Chunk*)                                \
1098   nonstatic_field(Arena,                       _hwm,                                          char*)                                 \
1099   nonstatic_field(Arena,                       _max,                                          char*)                                 \
1100                                                                                                                                      \
1101   /************/                                                                                                                     \
1102   /* CI */                                                                                                                           \
1103   /************/                                                                                                                     \
1104                                                                                                                                      \
1105   nonstatic_field(ciEnv,                       _system_dictionary_modification_counter,       int)                                   \
1106   nonstatic_field(ciEnv,                       _compiler_data,                                void*)                                 \
1107   nonstatic_field(ciEnv,                       _failure_reason,                               const char*)                           \
1108   nonstatic_field(ciEnv,                       _factory,                                      ciObjectFactory*)                      \
1109   nonstatic_field(ciEnv,                       _dependencies,                                 Dependencies*)                         \
1110   nonstatic_field(ciEnv,                       _task,                                         CompileTask*)                          \
1111   nonstatic_field(ciEnv,                       _arena,                                        Arena*)                                \
1112                                                                                                                                      \
1113   nonstatic_field(ciBaseObject,                _ident,                                        uint)                                  \
1114                                                                                                                                      \
1115   nonstatic_field(ciObject,                    _handle,                                       jobject)                               \
1116   nonstatic_field(ciObject,                    _klass,                                        ciKlass*)                              \
1117                                                                                                                                      \
1118   nonstatic_field(ciMetadata,                  _metadata,                                     Metadata*)                             \
1119                                                                                                                                      \
1120   nonstatic_field(ciSymbol,                    _symbol,                                       Symbol*)                               \
1121                                                                                                                                      \
1122   nonstatic_field(ciType,                      _basic_type,                                   BasicType)                             \
1123                                                                                                                                      \
1124   nonstatic_field(ciKlass,                     _name,                                         ciSymbol*)                             \
1125                                                                                                                                      \
1126   nonstatic_field(ciArrayKlass,                _dimension,                                    jint)                                  \
1127                                                                                                                                      \
1128   nonstatic_field(ciObjArrayKlass,             _element_klass,                                ciKlass*)                              \
1129   nonstatic_field(ciObjArrayKlass,             _base_element_klass,                           ciKlass*)                              \
1130                                                                                                                                      \
1131   nonstatic_field(ciInstanceKlass,             _init_state,                                   InstanceKlass::ClassState)             \
1132   nonstatic_field(ciInstanceKlass,             _is_shared,                                    bool)                                  \
1133                                                                                                                                      \
1134   nonstatic_field(ciMethod,                    _interpreter_invocation_count,                 int)                                   \
1135   nonstatic_field(ciMethod,                    _interpreter_throwout_count,                   int)                                   \
1136   nonstatic_field(ciMethod,                    _instructions_size,                            int)                                   \
1137                                                                                                                                      \
1138   nonstatic_field(ciMethodData,                _data_size,                                    int)                                   \
1139   nonstatic_field(ciMethodData,                _state,                                        u_char)                                \
1140   nonstatic_field(ciMethodData,                _extra_data_size,                              int)                                   \
1141   nonstatic_field(ciMethodData,                _data,                                         intptr_t*)                             \
1142   nonstatic_field(ciMethodData,                _hint_di,                                      int)                                   \
1143   nonstatic_field(ciMethodData,                _eflags,                                       intx)                                  \
1144   nonstatic_field(ciMethodData,                _arg_local,                                    intx)                                  \
1145   nonstatic_field(ciMethodData,                _arg_stack,                                    intx)                                  \
1146   nonstatic_field(ciMethodData,                _arg_returned,                                 intx)                                  \
1147   nonstatic_field(ciMethodData,                _current_mileage,                              int)                                   \
1148   nonstatic_field(ciMethodData,                _orig,                                         MethodData)                            \
1149                                                                                                                                      \
1150   nonstatic_field(ciField,                     _holder,                                       ciInstanceKlass*)                      \
1151   nonstatic_field(ciField,                     _name,                                         ciSymbol*)                             \
1152   nonstatic_field(ciField,                     _signature,                                    ciSymbol*)                             \
1153   nonstatic_field(ciField,                     _offset,                                       int)                                   \
1154   nonstatic_field(ciField,                     _is_constant,                                  bool)                                  \
1155   nonstatic_field(ciField,                     _constant_value,                               ciConstant)                            \
1156                                                                                                                                      \
1157   nonstatic_field(ciObjectFactory,             _ci_metadata,                                  GrowableArray&lt;ciMetadata*&gt;*)           \
1158   nonstatic_field(ciObjectFactory,             _symbols,                                      GrowableArray&lt;ciSymbol*&gt;*)             \
1159   nonstatic_field(ciObjectFactory,             _unloaded_methods,                             GrowableArray&lt;ciMethod*&gt;*)             \
1160                                                                                                                                      \
1161   nonstatic_field(ciConstant,                  _type,                                         BasicType)                             \
1162   nonstatic_field(ciConstant,                  _value._int,                                   jint)                                  \
1163   nonstatic_field(ciConstant,                  _value._long,                                  jlong)                                 \
1164   nonstatic_field(ciConstant,                  _value._float,                                 jfloat)                                \
1165   nonstatic_field(ciConstant,                  _value._double,                                jdouble)                               \
1166   nonstatic_field(ciConstant,                  _value._object,                                ciObject*)                             \
1167                                                                                                                                      \
1168   /************/                                                                                                                     \
1169   /* Monitors */                                                                                                                     \
1170   /************/                                                                                                                     \
1171                                                                                                                                      \
1172   volatile_nonstatic_field(ObjectMonitor,      _header,                                       markOop)                               \
1173   unchecked_nonstatic_field(ObjectMonitor,     _object,                                       sizeof(void *)) /* NOTE: no type */    \
1174   unchecked_nonstatic_field(ObjectMonitor,     _owner,                                        sizeof(void *)) /* NOTE: no type */    \
1175   volatile_nonstatic_field(ObjectMonitor,      _count,                                        jint)                                  \
1176   volatile_nonstatic_field(ObjectMonitor,      _waiters,                                      jint)                                  \
1177   volatile_nonstatic_field(ObjectMonitor,      _recursions,                                   intptr_t)                              \
1178   nonstatic_field(ObjectMonitor,               FreeNext,                                      ObjectMonitor*)                        \
1179   volatile_nonstatic_field(BasicLock,          _displaced_header,                             markOop)                               \
1180   nonstatic_field(BasicObjectLock,             _lock,                                         BasicLock)                             \
1181   nonstatic_field(BasicObjectLock,             _obj,                                          oop)                                   \
1182   static_ptr_volatile_field(ObjectSynchronizer, gBlockList,                                   ObjectMonitor*)                        \
1183                                                                                                                                      \
1184   /*********************/                                                                                                            \
1185   /* Matcher (C2 only) */                                                                                                            \
1186   /*********************/                                                                                                            \
1187                                                                                                                                      \
1188   unchecked_c2_static_field(Matcher,           _regEncode,                          sizeof(Matcher::_regEncode)) /* NOTE: no type */ \
1189                                                                                                                                      \
1190   c2_nonstatic_field(Node,                     _in,                                           Node**)                                \
1191   c2_nonstatic_field(Node,                     _out,                                          Node**)                                \
1192   c2_nonstatic_field(Node,                     _cnt,                                          node_idx_t)                            \
1193   c2_nonstatic_field(Node,                     _max,                                          node_idx_t)                            \
1194   c2_nonstatic_field(Node,                     _outcnt,                                       node_idx_t)                            \
1195   c2_nonstatic_field(Node,                     _outmax,                                       node_idx_t)                            \
1196   c2_nonstatic_field(Node,                     _idx,                                          const node_idx_t)                      \
1197   c2_nonstatic_field(Node,                     _class_id,                                     jushort)                               \
1198   c2_nonstatic_field(Node,                     _flags,                                        jushort)                               \
1199                                                                                                                                      \
1200   c2_nonstatic_field(Compile,                  _root,                                         RootNode*)                             \
1201   c2_nonstatic_field(Compile,                  _unique,                                       uint)                                  \
1202   c2_nonstatic_field(Compile,                  _entry_bci,                                    int)                                   \
1203   c2_nonstatic_field(Compile,                  _top,                                          Node*)                                 \
1204   c2_nonstatic_field(Compile,                  _cfg,                                          PhaseCFG*)                             \
1205   c2_nonstatic_field(Compile,                  _regalloc,                                     PhaseRegAlloc*)                        \
1206   c2_nonstatic_field(Compile,                  _method,                                       ciMethod*)                             \
1207   c2_nonstatic_field(Compile,                  _compile_id,                                   const int)                             \
1208   c2_nonstatic_field(Compile,                  _save_argument_registers,                      const bool)                            \
1209   c2_nonstatic_field(Compile,                  _subsume_loads,                                const bool)                            \
1210   c2_nonstatic_field(Compile,                  _do_escape_analysis,                           const bool)                            \
1211   c2_nonstatic_field(Compile,                  _eliminate_boxing,                             const bool)                            \
1212   c2_nonstatic_field(Compile,                  _ilt,                                          InlineTree*)                           \
1213                                                                                                                                      \
1214   c2_nonstatic_field(InlineTree,               _caller_jvms,                                  JVMState*)                             \
1215   c2_nonstatic_field(InlineTree,               _method,                                       ciMethod*)                             \
1216   c2_nonstatic_field(InlineTree,               _caller_tree,                                  InlineTree*)                           \
1217   c2_nonstatic_field(InlineTree,               _subtrees,                                     GrowableArray&lt;InlineTree*&gt;)            \
1218                                                                                                                                      \
1219   c2_nonstatic_field(OptoRegPair,              _first,                                        short)                                 \
1220   c2_nonstatic_field(OptoRegPair,              _second,                                       short)                                 \
1221                                                                                                                                      \
1222   c2_nonstatic_field(JVMState,                 _caller,                                       JVMState*)                             \
1223   c2_nonstatic_field(JVMState,                 _depth,                                        uint)                                  \
1224   c2_nonstatic_field(JVMState,                 _locoff,                                       uint)                                  \
1225   c2_nonstatic_field(JVMState,                 _stkoff,                                       uint)                                  \
1226   c2_nonstatic_field(JVMState,                 _monoff,                                       uint)                                  \
1227   c2_nonstatic_field(JVMState,                 _scloff,                                       uint)                                  \
1228   c2_nonstatic_field(JVMState,                 _endoff,                                       uint)                                  \
1229   c2_nonstatic_field(JVMState,                 _sp,                                           uint)                                  \
1230   c2_nonstatic_field(JVMState,                 _bci,                                          int)                                   \
1231   c2_nonstatic_field(JVMState,                 _method,                                       ciMethod*)                             \
1232   c2_nonstatic_field(JVMState,                 _map,                                          SafePointNode*)                        \
1233                                                                                                                                      \
1234   c2_nonstatic_field(SafePointNode,            _jvms,                                         JVMState* const)                       \
1235                                                                                                                                      \
1236   c2_nonstatic_field(MachSafePointNode,        _jvms,                                         JVMState*)                             \
1237   c2_nonstatic_field(MachSafePointNode,        _jvmadj,                                       uint)                                  \
1238                                                                                                                                      \
1239   c2_nonstatic_field(MachIfNode,               _prob,                                         jfloat)                                \
1240   c2_nonstatic_field(MachIfNode,               _fcnt,                                         jfloat)                                \
1241                                                                                                                                      \
1242   c2_nonstatic_field(CallNode,                 _entry_point,                                  address)                               \
1243                                                                                                                                      \
1244   c2_nonstatic_field(CallJavaNode,             _method,                                       ciMethod*)                             \
1245                                                                                                                                      \
1246   c2_nonstatic_field(CallRuntimeNode,          _name,                                         const char*)                           \
1247                                                                                                                                      \
1248   c2_nonstatic_field(CallStaticJavaNode,       _name,                                         const char*)                           \
1249                                                                                                                                      \
1250   c2_nonstatic_field(MachCallJavaNode,         _method,                                       ciMethod*)                             \
1251   c2_nonstatic_field(MachCallJavaNode,         _bci,                                          int)                                   \
1252                                                                                                                                      \
1253   c2_nonstatic_field(MachCallStaticJavaNode,   _name,                                         const char*)                           \
1254                                                                                                                                      \
1255   c2_nonstatic_field(MachCallRuntimeNode,      _name,                                         const char*)                           \
1256                                                                                                                                      \
1257   c2_nonstatic_field(PhaseCFG,                 _number_of_blocks,                             uint)                                  \
1258   c2_nonstatic_field(PhaseCFG,                 _blocks,                                       Block_List)                            \
1259   c2_nonstatic_field(PhaseCFG,                 _node_to_block_mapping,                        Block_Array)                           \
1260   c2_nonstatic_field(PhaseCFG,                 _root_block,                                   Block*)                                \
1261                                                                                                                                      \
1262   c2_nonstatic_field(PhaseRegAlloc,            _node_regs,                                    OptoRegPair*)                          \
1263   c2_nonstatic_field(PhaseRegAlloc,            _node_regs_max_index,                          uint)                                  \
1264   c2_nonstatic_field(PhaseRegAlloc,            _framesize,                                    uint)                                  \
1265   c2_nonstatic_field(PhaseRegAlloc,            _max_reg,                                      OptoReg::Name)                         \
1266                                                                                                                                      \
1267   c2_nonstatic_field(PhaseChaitin,             _trip_cnt,                                     int)                                   \
1268   c2_nonstatic_field(PhaseChaitin,             _alternate,                                    int)                                   \
1269   c2_nonstatic_field(PhaseChaitin,             _lo_degree,                                    uint)                                  \
1270   c2_nonstatic_field(PhaseChaitin,             _lo_stk_degree,                                uint)                                  \
1271   c2_nonstatic_field(PhaseChaitin,             _hi_degree,                                    uint)                                  \
1272   c2_nonstatic_field(PhaseChaitin,             _simplified,                                   uint)                                  \
1273                                                                                                                                      \
1274   c2_nonstatic_field(Block,                    _nodes,                                        Node_List)                             \
1275   c2_nonstatic_field(Block,                    _succs,                                        Block_Array)                           \
1276   c2_nonstatic_field(Block,                    _num_succs,                                    uint)                                  \
1277   c2_nonstatic_field(Block,                    _pre_order,                                    uint)                                  \
1278   c2_nonstatic_field(Block,                    _dom_depth,                                    uint)                                  \
1279   c2_nonstatic_field(Block,                    _idom,                                         Block*)                                \
1280   c2_nonstatic_field(Block,                    _freq,                                         jdouble)                               \
1281                                                                                                                                      \
1282   c2_nonstatic_field(CFGElement,               _freq,                                         jdouble)                               \
1283                                                                                                                                      \
1284   c2_nonstatic_field(Block_List,               _cnt,                                          uint)                                  \
1285                                                                                                                                      \
1286   c2_nonstatic_field(Block_Array,              _size,                                         uint)                                  \
1287   c2_nonstatic_field(Block_Array,              _blocks,                                       Block**)                               \
1288   c2_nonstatic_field(Block_Array,              _arena,                                        Arena*)                                \
1289                                                                                                                                      \
1290   c2_nonstatic_field(Node_List,                _cnt,                                          uint)                                  \
1291                                                                                                                                      \
1292   c2_nonstatic_field(Node_Array,               _max,                                          uint)                                  \
1293   c2_nonstatic_field(Node_Array,               _nodes,                                        Node**)                                \
1294   c2_nonstatic_field(Node_Array,               _a,                                            Arena*)                                \
1295                                                                                                                                      \
1296                                                                                                                                      \
1297   /*********************/                                                                                                            \
1298   /* -XX flags         */                                                                                                            \
1299   /*********************/                                                                                                            \
1300                                                                                                                                      \
1301   nonstatic_field(Flag,                        _type,                                         const char*)                           \
1302   nonstatic_field(Flag,                        _name,                                         const char*)                           \
1303   unchecked_nonstatic_field(Flag,              _addr,                                         sizeof(void*)) /* NOTE: no type */     \
1304   nonstatic_field(Flag,                        _flags,                                        Flag::Flags)                           \
1305      static_field(Flag,                        flags,                                         Flag*)                                 \
1306      static_field(Flag,                        numFlags,                                      size_t)                                \
1307                                                                                                                                      \
1308   /*************************/                                                                                                        \
1309   /* JDK / VM version info */                                                                                                        \
1310   /*************************/                                                                                                        \
1311                                                                                                                                      \
1312      static_field(Abstract_VM_Version,         _s_vm_release,                                 const char*)                           \
1313      static_field(Abstract_VM_Version,         _s_internal_vm_info_string,                    const char*)                           \
1314      static_field(Abstract_VM_Version,         _vm_major_version,                             int)                                   \
1315      static_field(Abstract_VM_Version,         _vm_minor_version,                             int)                                   \
1316      static_field(Abstract_VM_Version,         _vm_micro_version,                             int)                                   \
1317      static_field(Abstract_VM_Version,         _vm_build_number,                              int)                                   \
1318      static_field(Abstract_VM_Version,         _reserve_for_allocation_prefetch,              int)                                   \
1319                                                                                                                                      \
1320      static_field(JDK_Version,                 _current,                                      JDK_Version)                           \
1321   nonstatic_field(JDK_Version,                 _partially_initialized,                        bool)                                  \
1322   nonstatic_field(JDK_Version,                 _major,                                        unsigned char)                         \
1323                                                                                                                                      \
1324   /*************************/                                                                                                        \
1325   /* JVMTI */                                                                                                                        \
1326   /*************************/                                                                                                        \
1327                                                                                                                                      \
1328   JVMTI_STRUCTS(static_field)                                                                                                        \
1329                                                                                                                                      \
1330   /*************/                                                                                                                    \
1331   /* Arguments */                                                                                                                    \
1332   /*************/                                                                                                                    \
1333                                                                                                                                      \
1334      static_field(Arguments,                   _jvm_flags_array,                              char**)                                \
1335      static_field(Arguments,                   _num_jvm_flags,                                int)                                   \
1336      static_field(Arguments,                   _jvm_args_array,                               char**)                                \
1337      static_field(Arguments,                   _num_jvm_args,                                 int)                                   \
1338      static_field(Arguments,                   _java_command,                                 char*)                                 \
1339                                                                                                                                      \
1340   /************/                                                                                                                     \
1341   /* Array&lt;T&gt; */                                                                                                                     \
1342   /************/                                                                                                                     \
1343                                                                                                                                      \
1344   nonstatic_field(Array&lt;int&gt;,                  _length,                                       int)                                   \
1345   unchecked_nonstatic_field(Array&lt;int&gt;,        _data,                                         sizeof(int))                           \
1346   unchecked_nonstatic_field(Array&lt;u1&gt;,         _data,                                         sizeof(u1))                            \
1347   unchecked_nonstatic_field(Array&lt;u2&gt;,         _data,                                         sizeof(u2))                            \
1348   unchecked_nonstatic_field(Array&lt;Method*&gt;,    _data,                                         sizeof(Method*))                       \
1349   unchecked_nonstatic_field(Array&lt;Klass*&gt;,     _data,                                         sizeof(Klass*))                        \
1350                                                                                                                                      \
1351   /*********************************/                                                                                                \
1352   /* java_lang_Class fields        */                                                                                                \
1353   /*********************************/                                                                                                \
1354                                                                                                                                      \
1355      static_field(java_lang_Class,             _klass_offset,                                 int)                                   \
1356      static_field(java_lang_Class,             _array_klass_offset,                           int)                                   \
1357      static_field(java_lang_Class,             _oop_size_offset,                              int)                                   \
1358      static_field(java_lang_Class,             _static_oop_field_count_offset,                int)                                   \
1359                                                                                                                                      \
1360   /************************/                                                                                                         \
1361   /* Miscellaneous fields */                                                                                                         \
1362   /************************/                                                                                                         \
1363                                                                                                                                      \
1364   nonstatic_field(CompileTask,                 _method,                                       Method*)                               \
1365   nonstatic_field(CompileTask,                 _osr_bci,                                      int)                                   \
1366   nonstatic_field(CompileTask,                 _comp_level,                                   int)                                   \
1367   nonstatic_field(CompileTask,                 _compile_id,                                   uint)                                  \
1368   nonstatic_field(CompileTask,                 _num_inlined_bytecodes,                        int)                                   \
1369   nonstatic_field(CompileTask,                 _next,                                         CompileTask*)                          \
1370   nonstatic_field(CompileTask,                 _prev,                                         CompileTask*)                          \
1371                                                                                                                                      \
1372   nonstatic_field(vframeArray,                 _next,                                         vframeArray*)                          \
1373   nonstatic_field(vframeArray,                 _original,                                     frame)                                 \
1374   nonstatic_field(vframeArray,                 _caller,                                       frame)                                 \
1375   nonstatic_field(vframeArray,                 _frames,                                       int)                                   \
1376                                                                                                                                      \
1377   nonstatic_field(vframeArrayElement,          _frame,                                        frame)                                 \
1378   nonstatic_field(vframeArrayElement,          _bci,                                          int)                                   \
1379   nonstatic_field(vframeArrayElement,          _method,                                       Method*)                               \
1380                                                                                                                                      \
1381   nonstatic_field(PtrQueue,                    _active,                                       bool)                                  \
1382   nonstatic_field(PtrQueue,                    _buf,                                          void**)                                \
1383   nonstatic_field(PtrQueue,                    _index,                                        size_t)                                \
1384                                                                                                                                      \
1385   nonstatic_field(AccessFlags,                 _flags,                                        jint)                                  \
1386   nonstatic_field(elapsedTimer,                _counter,                                      jlong)                                 \
1387   nonstatic_field(elapsedTimer,                _active,                                       bool)                                  \
1388   nonstatic_field(InvocationCounter,           _counter,                                      unsigned int)                          \
1389   volatile_nonstatic_field(FreeChunk,          _size,                                         size_t)                                \
1390   nonstatic_field(FreeChunk,                   _next,                                         FreeChunk*)                            \
1391   nonstatic_field(FreeChunk,                   _prev,                                         FreeChunk*)                            \
1392   nonstatic_field(AdaptiveFreeList&lt;FreeChunk&gt;, _size,                                         size_t)                                \
1393   nonstatic_field(AdaptiveFreeList&lt;FreeChunk&gt;, _count,                                        ssize_t)
1394 
1395 
1396 //--------------------------------------------------------------------------------
1397 // VM_TYPES
1398 //
1399 // This list must enumerate at least all of the types in the above
1400 // list. For the types in the above list, the entry below must have
1401 // exactly the same spacing since string comparisons are done in the
1402 // code which verifies the consistency of these tables (in the debug
1403 // build).
1404 //
1405 // In addition to the above types, this list is required to enumerate
1406 // the JNI's java types, which are used to indicate the size of Java
1407 // fields in this VM to the SA. Further, oop types are currently
1408 // distinguished by name (i.e., ends with "oop") over in the SA.
1409 //
1410 // The declare_toplevel_type macro should be used to declare types
1411 // which do not have a superclass.
1412 //
1413 // The declare_integer_type and declare_unsigned_integer_type macros
1414 // are required in order to properly identify C integer types over in
1415 // the SA. They should be used for any type which is otherwise opaque
1416 // and which it is necessary to coerce into an integer value. This
1417 // includes, for example, the type uintptr_t. Note that while they
1418 // will properly identify the type's size regardless of the platform,
1419 // since it is does not seem possible to deduce or check signedness at
1420 // compile time using the pointer comparison tricks, it is currently
1421 // required that the given types have the same signedness across all
1422 // platforms.
1423 //
1424 // NOTE that there are platform-specific additions to this table in
1425 // vmStructs_&lt;os&gt;_&lt;cpu&gt;.hpp.
1426 
1427 #define VM_TYPES(declare_type,                                            \
1428                  declare_toplevel_type,                                   \
1429                  declare_oop_type,                                        \
1430                  declare_integer_type,                                    \
1431                  declare_unsigned_integer_type,                           \
1432                  declare_c1_toplevel_type,                                \
1433                  declare_c2_type,                                         \
1434                  declare_c2_toplevel_type)                                \
1435                                                                           \
1436   /*************************************************************/         \
1437   /* Java primitive types -- required by the SA implementation */         \
1438   /* in order to determine the size of Java fields in this VM  */         \
1439   /* (the implementation looks up these names specifically)    */         \
1440   /* NOTE: since we fetch these sizes from the remote VM, we   */         \
1441   /* have a bootstrapping sequence during which it is not      */         \
1442   /* valid to fetch Java values from the remote process, only  */         \
1443   /* C integer values (of known size). NOTE also that we do    */         \
1444   /* NOT include "Java unsigned" types like juint here; since  */         \
1445   /* Java does not have unsigned primitive types, those can    */         \
1446   /* not be mapped directly and are considered to be C integer */         \
1447   /* types in this system (see the "other types" section,      */         \
1448   /* below.)                                                   */         \
1449   /*************************************************************/         \
1450                                                                           \
1451   declare_toplevel_type(jboolean)                                         \
1452   declare_toplevel_type(jbyte)                                            \
1453   declare_toplevel_type(jchar)                                            \
1454   declare_toplevel_type(jdouble)                                          \
1455   declare_toplevel_type(jfloat)                                           \
1456   declare_toplevel_type(jint)                                             \
1457   declare_toplevel_type(jlong)                                            \
1458   declare_toplevel_type(jshort)                                           \
1459                                                                           \
1460   /*********************************************************************/ \
1461   /* C integer types. User-defined typedefs (like "size_t" or          */ \
1462   /* "intptr_t") are guaranteed to be present with the same names over */ \
1463   /* in the SA's type database. Names like "unsigned short" are not    */ \
1464   /* guaranteed to be visible through the SA's type database lookup    */ \
1465   /* mechanism, though they will have a Type object created for them   */ \
1466   /* and are valid types for Fields.                                   */ \
1467   /*********************************************************************/ \
1468   declare_integer_type(bool)                                              \
1469   declare_integer_type(short)                                             \
1470   declare_integer_type(int)                                               \
1471   declare_integer_type(long)                                              \
1472   declare_integer_type(char)                                              \
1473   declare_unsigned_integer_type(unsigned char)                            \
1474   declare_unsigned_integer_type(volatile unsigned char)                   \
1475   declare_unsigned_integer_type(u_char)                                   \
1476   declare_unsigned_integer_type(unsigned int)                             \
1477   declare_unsigned_integer_type(uint)                                     \
1478   declare_unsigned_integer_type(unsigned short)                           \
1479   declare_unsigned_integer_type(jushort)                                  \
1480   declare_unsigned_integer_type(unsigned long)                            \
1481   /* The compiler thinks this is a different type than */                 \
1482   /* unsigned short on Win32 */                                           \
1483   declare_unsigned_integer_type(u1)                                       \
1484   declare_unsigned_integer_type(u2)                                       \
1485   declare_unsigned_integer_type(u4)                                       \
1486   declare_unsigned_integer_type(u8)                                       \
1487   declare_unsigned_integer_type(unsigned)                                 \
1488                                                                           \
1489   /*****************************/                                         \
1490   /* C primitive pointer types */                                         \
1491   /*****************************/                                         \
1492                                                                           \
1493   declare_toplevel_type(void*)                                            \
1494   declare_toplevel_type(int*)                                             \
1495   declare_toplevel_type(char*)                                            \
1496   declare_toplevel_type(char**)                                           \
1497   declare_toplevel_type(u_char*)                                          \
1498   declare_toplevel_type(unsigned char*)                                   \
1499   declare_toplevel_type(volatile unsigned char*)                          \
1500                                                                           \
1501   /*******************************************************************/   \
1502   /* Types which it will be handy to have available over in the SA   */   \
1503   /* in order to do platform-independent address -&gt; integer coercion */   \
1504   /* (note: these will be looked up by name)                         */   \
1505   /*******************************************************************/   \
1506                                                                           \
1507   declare_unsigned_integer_type(size_t)                                   \
1508   declare_integer_type(ssize_t)                                           \
1509   declare_integer_type(intx)                                              \
1510   declare_integer_type(intptr_t)                                          \
1511   declare_unsigned_integer_type(uintx)                                    \
1512   declare_unsigned_integer_type(uintptr_t)                                \
1513   declare_unsigned_integer_type(uint32_t)                                 \
1514   declare_unsigned_integer_type(uint64_t)                                 \
1515                                                                           \
1516   /******************************************/                            \
1517   /* OopDesc hierarchy (NOTE: some missing) */                            \
1518   /******************************************/                            \
1519                                                                           \
1520   declare_toplevel_type(oopDesc)                                          \
1521     declare_type(arrayOopDesc, oopDesc)                                   \
1522       declare_type(objArrayOopDesc, arrayOopDesc)                         \
1523     declare_type(instanceOopDesc, oopDesc)                                \
1524     declare_type(markOopDesc, oopDesc)                                    \
1525                                                                           \
1526   /**************************************************/                    \
1527   /* MetadataOopDesc hierarchy (NOTE: some missing) */                    \
1528   /**************************************************/                    \
1529                                                                           \
1530   declare_toplevel_type(CompiledICHolder)                                 \
1531   declare_toplevel_type(MetaspaceObj)                                     \
1532     declare_type(Metadata, MetaspaceObj)                                  \
1533     declare_type(Klass, Metadata)                                         \
1534            declare_type(ArrayKlass, Klass)                                \
1535            declare_type(ObjArrayKlass, ArrayKlass)                        \
1536            declare_type(TypeArrayKlass, ArrayKlass)                       \
1537       declare_type(InstanceKlass, Klass)                                  \
1538         declare_type(InstanceClassLoaderKlass, InstanceKlass)             \
1539         declare_type(InstanceMirrorKlass, InstanceKlass)                  \
1540         declare_type(InstanceRefKlass, InstanceKlass)                     \
1541     declare_type(ConstantPool, Metadata)                                  \
1542     declare_type(ConstantPoolCache, MetaspaceObj)                         \
1543     declare_type(MethodData, Metadata)                                    \
1544     declare_type(Method, Metadata)                                        \
1545     declare_type(MethodCounters, MetaspaceObj)                            \
1546     declare_type(ConstMethod, MetaspaceObj)                               \
1547                                                                           \
1548   declare_toplevel_type(narrowKlass)                                      \
1549                                                                           \
1550   declare_toplevel_type(vtableEntry)                                      \
1551                                                                           \
1552            declare_toplevel_type(Symbol)                                  \
1553            declare_toplevel_type(Symbol*)                                 \
1554   declare_toplevel_type(volatile Metadata*)                               \
1555                                                                           \
1556   declare_toplevel_type(DataLayout)                                       \
1557   declare_toplevel_type(nmethodBucket)                                    \
1558                                                                           \
1559   /********/                                                              \
1560   /* Oops */                                                              \
1561   /********/                                                              \
1562                                                                           \
1563   declare_oop_type(markOop)                                               \
1564   declare_oop_type(objArrayOop)                                           \
1565   declare_oop_type(oop)                                                   \
1566   declare_oop_type(narrowOop)                                             \
1567   declare_oop_type(typeArrayOop)                                          \
1568                                                                           \
1569   /*************************************/                                 \
1570   /* MethodOop-related data structures */                                 \
1571   /*************************************/                                 \
1572                                                                           \
1573   declare_toplevel_type(CheckedExceptionElement)                          \
1574   declare_toplevel_type(LocalVariableTableElement)                        \
1575   declare_toplevel_type(ExceptionTableElement)                            \
1576   declare_toplevel_type(MethodParametersElement)                          \
1577                                                                           \
1578   declare_toplevel_type(ClassLoaderData)                                  \
1579   declare_toplevel_type(ClassLoaderDataGraph)                             \
1580                                                                           \
1581   /******************************************/                            \
1582   /* Generation and space hierarchies       */                            \
1583   /* (needed for run-time type information) */                            \
1584   /******************************************/                            \
1585                                                                           \
1586   declare_toplevel_type(CollectedHeap)                                    \
1587            declare_type(GenCollectedHeap,             CollectedHeap)      \
1588   declare_toplevel_type(Generation)                                       \
1589            declare_type(DefNewGeneration,             Generation)         \
1590            declare_type(CardGeneration,               Generation)         \
1591            declare_type(TenuredGeneration,            CardGeneration)     \
1592   declare_toplevel_type(GenCollectorPolicy)                               \
1593   declare_toplevel_type(Space)                                            \
1594   declare_toplevel_type(BitMap)                                           \
1595            declare_type(CompactibleSpace,             Space)              \
1596            declare_type(ContiguousSpace,              CompactibleSpace)   \
1597            declare_type(OffsetTableContigSpace,       ContiguousSpace)    \
1598            declare_type(TenuredSpace,                 OffsetTableContigSpace) \
1599   declare_toplevel_type(BarrierSet)                                       \
1600            declare_type(ModRefBarrierSet,             BarrierSet)         \
1601            declare_type(CardTableModRefBS,            ModRefBarrierSet)   \
1602            declare_type(CardTableModRefBSForCTRS,     CardTableModRefBS)  \
1603   declare_toplevel_type(BarrierSet::Name)                                 \
1604   declare_toplevel_type(CardTableRS)                                      \
1605   declare_toplevel_type(BlockOffsetSharedArray)                           \
1606   declare_toplevel_type(BlockOffsetTable)                                 \
1607            declare_type(BlockOffsetArray,             BlockOffsetTable)   \
1608            declare_type(BlockOffsetArrayContigSpace,  BlockOffsetArray)   \
1609            declare_type(BlockOffsetArrayNonContigSpace, BlockOffsetArray) \
1610                                                                           \
1611   /* Miscellaneous other GC types */                                      \
1612                                                                           \
1613   declare_toplevel_type(ageTable)                                         \
1614   declare_toplevel_type(Generation::StatRecord)                           \
1615   declare_toplevel_type(GenerationSpec)                                   \
1616   declare_toplevel_type(HeapWord)                                         \
1617   declare_toplevel_type(MemRegion)                                        \
1618   declare_toplevel_type(ThreadLocalAllocBuffer)                           \
1619   declare_toplevel_type(VirtualSpace)                                     \
1620   declare_toplevel_type(SATBMarkQueue)                                    \
1621   declare_toplevel_type(DirtyCardQueue)                                   \
1622                                                                           \
1623   /* Pointers to Garbage Collection types */                              \
1624                                                                           \
1625   declare_toplevel_type(BarrierSet*)                                      \
1626   declare_toplevel_type(BlockOffsetSharedArray*)                          \
1627   declare_toplevel_type(CardTableRS*)                                     \
1628   declare_toplevel_type(CardTableModRefBS*)                               \
1629   declare_toplevel_type(CardTableModRefBS**)                              \
1630   declare_toplevel_type(CardTableModRefBSForCTRS*)                        \
1631   declare_toplevel_type(CardTableModRefBSForCTRS**)                       \
1632   declare_toplevel_type(CollectedHeap*)                                   \
1633   declare_toplevel_type(ContiguousSpace*)                                 \
1634   declare_toplevel_type(DefNewGeneration*)                                \
1635   declare_toplevel_type(GenCollectedHeap*)                                \
1636   declare_toplevel_type(Generation*)                                      \
1637   declare_toplevel_type(GenerationSpec**)                                 \
1638   declare_toplevel_type(HeapWord*)                                        \
1639   declare_toplevel_type(HeapWord* volatile)                               \
1640   declare_toplevel_type(MemRegion*)                                       \
1641   declare_toplevel_type(OffsetTableContigSpace*)                          \
1642   declare_toplevel_type(Space*)                                           \
1643   declare_toplevel_type(TenuredGeneration*)                               \
1644   declare_toplevel_type(ThreadLocalAllocBuffer*)                          \
1645                                                                           \
1646   declare_toplevel_type(BarrierSet::FakeRtti)                             \
1647                                                                           \
1648   /************************/                                              \
1649   /* PerfMemory - jvmstat */                                              \
1650   /************************/                                              \
1651                                                                           \
1652   declare_toplevel_type(PerfDataPrologue)                                 \
1653   declare_toplevel_type(PerfDataPrologue*)                                \
1654   declare_toplevel_type(PerfDataEntry)                                    \
1655   declare_toplevel_type(PerfMemory)                                       \
1656                                                                           \
1657   /*********************************/                                     \
1658   /* SymbolTable, SystemDictionary */                                     \
1659   /*********************************/                                     \
1660                                                                           \
1661   declare_toplevel_type(BasicHashtable&lt;mtInternal&gt;)                       \
1662     declare_type(IntptrHashtable, BasicHashtable&lt;mtInternal&gt;)             \
1663   declare_type(SymbolTable, SymbolHashtable)                              \
1664   declare_type(StringTable, StringHashtable)                              \
1665     declare_type(LoaderConstraintTable, KlassHashtable)                   \
1666     declare_type(KlassTwoOopHashtable, KlassHashtable)                    \
1667     declare_type(Dictionary, KlassTwoOopHashtable)                        \
1668     declare_type(PlaceholderTable, SymbolTwoOopHashtable)                 \
1669   declare_toplevel_type(BasicHashtableEntry&lt;mtInternal&gt;)                  \
1670   declare_type(IntptrHashtableEntry, BasicHashtableEntry&lt;mtInternal&gt;)     \
1671     declare_type(DictionaryEntry, KlassHashtableEntry)                    \
1672     declare_type(PlaceholderEntry, SymbolHashtableEntry)                  \
1673     declare_type(LoaderConstraintEntry, KlassHashtableEntry)              \
1674   declare_toplevel_type(HashtableBucket&lt;mtInternal&gt;)                      \
1675   declare_toplevel_type(SystemDictionary)                                 \
1676   declare_toplevel_type(vmSymbols)                                        \
1677   declare_toplevel_type(ProtectionDomainEntry)                            \
1678   declare_toplevel_type(ProtectionDomainCacheEntry)                       \
1679                                                                           \
1680   declare_toplevel_type(GenericGrowableArray)                             \
1681   declare_toplevel_type(GrowableArray&lt;int&gt;)                               \
1682   declare_toplevel_type(Arena)                                            \
1683     declare_type(ResourceArea, Arena)                                     \
1684   declare_toplevel_type(Chunk)                                            \
1685                                                                           \
1686   declare_toplevel_type(SymbolCompactHashTable)                           \
1687                                                                           \
1688   /***********************************************************/           \
1689   /* Thread hierarchy (needed for run-time type information) */           \
1690   /***********************************************************/           \
1691                                                                           \
1692   declare_toplevel_type(Threads)                                          \
1693   declare_toplevel_type(ThreadShadow)                                     \
1694            declare_type(Thread, ThreadShadow)                             \
1695            declare_type(NamedThread, Thread)                              \
1696            declare_type(WatcherThread, Thread)                            \
1697            declare_type(JavaThread, Thread)                               \
1698            declare_type(JvmtiAgentThread, JavaThread)                     \
1699            declare_type(ServiceThread, JavaThread)                        \
1700   declare_type(CompilerThread, JavaThread)                                \
1701   declare_type(CodeCacheSweeperThread, JavaThread)                        \
1702   declare_toplevel_type(OSThread)                                         \
1703   declare_toplevel_type(JavaFrameAnchor)                                  \
1704                                                                           \
1705   /***************/                                                       \
1706   /* Interpreter */                                                       \
1707   /***************/                                                       \
1708                                                                           \
1709   declare_toplevel_type(AbstractInterpreter)                              \
1710                                                                           \
1711   /*********/                                                             \
1712   /* Stubs */                                                             \
1713   /*********/                                                             \
1714                                                                           \
1715   declare_toplevel_type(StubQueue)                                        \
1716   declare_toplevel_type(StubRoutines)                                     \
1717   declare_toplevel_type(Stub)                                             \
1718            declare_type(InterpreterCodelet, Stub)                         \
1719                                                                           \
1720   /*************/                                                         \
1721   /* JavaCalls */                                                         \
1722   /*************/                                                         \
1723                                                                           \
1724   declare_toplevel_type(JavaCallWrapper)                                  \
1725                                                                           \
1726   /*************/                                                         \
1727   /* CodeCache */                                                         \
1728   /*************/                                                         \
1729                                                                           \
1730   declare_toplevel_type(CodeCache)                                        \
1731                                                                           \
1732   /************/                                                          \
1733   /* CodeHeap */                                                          \
1734   /************/                                                          \
1735                                                                           \
1736   declare_toplevel_type(CodeHeap)                                         \
1737   declare_toplevel_type(CodeHeap*)                                        \
1738   declare_toplevel_type(HeapBlock)                                        \
1739   declare_toplevel_type(HeapBlock::Header)                                \
1740            declare_type(FreeBlock, HeapBlock)                             \
1741                                                                           \
1742   /*************************************************************/         \
1743   /* CodeBlob hierarchy (needed for run-time type information) */         \
1744   /*************************************************************/         \
1745                                                                           \
1746   declare_toplevel_type(SharedRuntime)                                    \
1747                                                                           \
1748   declare_toplevel_type(CodeBlob)                                         \
1749   declare_type(BufferBlob,               CodeBlob)                        \
1750   declare_type(AdapterBlob,              BufferBlob)                      \
1751   declare_type(MethodHandlesAdapterBlob, BufferBlob)                      \
1752   declare_type(nmethod,                  CodeBlob)                        \
1753   declare_type(RuntimeStub,              CodeBlob)                        \
1754   declare_type(SingletonBlob,            CodeBlob)                        \
1755   declare_type(SafepointBlob,            SingletonBlob)                   \
1756   declare_type(DeoptimizationBlob,       SingletonBlob)                   \
1757   declare_c2_type(ExceptionBlob,         SingletonBlob)                   \
1758   declare_c2_type(UncommonTrapBlob,      CodeBlob)                        \
1759                                                                           \
1760   /***************************************/                               \
1761   /* PcDesc and other compiled code info */                               \
1762   /***************************************/                               \
1763                                                                           \
1764   declare_toplevel_type(PcDesc)                                           \
1765   declare_toplevel_type(ExceptionCache)                                   \
1766   declare_toplevel_type(PcDescCache)                                      \
1767   declare_toplevel_type(Dependencies)                                     \
1768   declare_toplevel_type(CompileTask)                                      \
1769   declare_toplevel_type(Deoptimization)                                   \
1770   declare_toplevel_type(Deoptimization::UnrollBlock)                      \
1771                                                                           \
1772   /************************/                                              \
1773   /* OopMap and OopMapSet */                                              \
1774   /************************/                                              \
1775                                                                           \
1776   declare_toplevel_type(OopMap)                                           \
1777   declare_toplevel_type(OopMapSet)                                        \
1778   declare_toplevel_type(ImmutableOopMapSet)                               \
1779   declare_toplevel_type(ImmutableOopMapPair)                              \
1780   declare_toplevel_type(ImmutableOopMap)                                  \
1781                                                                           \
1782   /********************/                                                  \
1783   /* CompressedStream */                                                  \
1784   /********************/                                                  \
1785                                                                           \
1786   declare_toplevel_type(CompressedStream)                                 \
1787                                                                           \
1788   /**************/                                                        \
1789   /* VMRegImpl  */                                                        \
1790   /**************/                                                        \
1791                                                                           \
1792   declare_toplevel_type(VMRegImpl)                                        \
1793                                                                           \
1794   /*********************************/                                     \
1795   /* JNIHandles and JNIHandleBlock */                                     \
1796   /*********************************/                                     \
1797                                                                           \
1798   declare_toplevel_type(JNIHandles)                                       \
1799   declare_toplevel_type(JNIHandleBlock)                                   \
1800   declare_toplevel_type(jobject)                                          \
1801                                                                           \
1802   /**********************/                                                \
1803   /* Runtime1 (C1 only) */                                                \
1804   /**********************/                                                \
1805                                                                           \
1806   declare_c1_toplevel_type(Runtime1)                                      \
1807                                                                           \
1808   /************/                                                          \
1809   /* Monitors */                                                          \
1810   /************/                                                          \
1811                                                                           \
1812   declare_toplevel_type(ObjectMonitor)                                    \
1813   declare_toplevel_type(ObjectSynchronizer)                               \
1814   declare_toplevel_type(BasicLock)                                        \
1815   declare_toplevel_type(BasicObjectLock)                                  \
1816                                                                           \
1817   /*********************/                                                 \
1818   /* Matcher (C2 only) */                                                 \
1819   /*********************/                                                 \
1820                                                                           \
1821   declare_c2_toplevel_type(Matcher)                                       \
1822   declare_c2_toplevel_type(Compile)                                       \
1823   declare_c2_toplevel_type(InlineTree)                                    \
1824   declare_c2_toplevel_type(OptoRegPair)                                   \
1825   declare_c2_toplevel_type(JVMState)                                      \
1826   declare_c2_toplevel_type(Phase)                                         \
1827     declare_c2_type(PhaseCFG, Phase)                                      \
1828     declare_c2_type(PhaseRegAlloc, Phase)                                 \
1829     declare_c2_type(PhaseChaitin, PhaseRegAlloc)                          \
1830   declare_c2_toplevel_type(CFGElement)                                    \
1831     declare_c2_type(Block, CFGElement)                                    \
1832   declare_c2_toplevel_type(Block_Array)                                   \
1833     declare_c2_type(Block_List, Block_Array)                              \
1834   declare_c2_toplevel_type(Node_Array)                                    \
1835   declare_c2_type(Node_List, Node_Array)                                  \
1836   declare_c2_type(Unique_Node_List, Node_List)                            \
1837   declare_c2_toplevel_type(Node)                                          \
1838   declare_c2_type(AddNode, Node)                                          \
1839   declare_c2_type(AddINode, AddNode)                                      \
1840   declare_c2_type(AddLNode, AddNode)                                      \
1841   declare_c2_type(AddFNode, AddNode)                                      \
1842   declare_c2_type(AddDNode, AddNode)                                      \
1843   declare_c2_type(AddPNode, Node)                                         \
1844   declare_c2_type(OrINode, AddNode)                                       \
1845   declare_c2_type(OrLNode, AddNode)                                       \
1846   declare_c2_type(XorINode, AddNode)                                      \
1847   declare_c2_type(XorLNode, AddNode)                                      \
1848   declare_c2_type(MaxNode, AddNode)                                       \
1849   declare_c2_type(MaxINode, MaxNode)                                      \
1850   declare_c2_type(MinINode, MaxNode)                                      \
1851   declare_c2_type(StartNode, MultiNode)                                   \
1852   declare_c2_type(StartOSRNode, StartNode)                                \
1853   declare_c2_type(ParmNode, ProjNode)                                     \
1854   declare_c2_type(ReturnNode, Node)                                       \
1855   declare_c2_type(RethrowNode, Node)                                      \
1856   declare_c2_type(TailCallNode, ReturnNode)                               \
1857   declare_c2_type(TailJumpNode, ReturnNode)                               \
1858   declare_c2_type(SafePointNode, MultiNode)                               \
1859   declare_c2_type(CallNode, SafePointNode)                                \
1860   declare_c2_type(CallJavaNode, CallNode)                                 \
1861   declare_c2_type(CallStaticJavaNode, CallJavaNode)                       \
1862   declare_c2_type(CallDynamicJavaNode, CallJavaNode)                      \
1863   declare_c2_type(CallRuntimeNode, CallNode)                              \
1864   declare_c2_type(CallLeafNode, CallRuntimeNode)                          \
1865   declare_c2_type(CallLeafNoFPNode, CallLeafNode)                         \
1866   declare_c2_type(AllocateNode, CallNode)                                 \
1867   declare_c2_type(AllocateArrayNode, AllocateNode)                        \
1868   declare_c2_type(LockNode, AbstractLockNode)                             \
1869   declare_c2_type(UnlockNode, AbstractLockNode)                           \
1870   declare_c2_type(FastLockNode, CmpNode)                                  \
1871   declare_c2_type(FastUnlockNode, CmpNode)                                \
1872   declare_c2_type(RegionNode, Node)                                       \
1873   declare_c2_type(JProjNode, ProjNode)                                    \
1874   declare_c2_type(PhiNode, TypeNode)                                      \
1875   declare_c2_type(GotoNode, Node)                                         \
1876   declare_c2_type(CProjNode, ProjNode)                                    \
1877   declare_c2_type(MultiBranchNode, MultiNode)                             \
1878   declare_c2_type(IfNode, MultiBranchNode)                                \
1879   declare_c2_type(IfTrueNode, CProjNode)                                  \
1880   declare_c2_type(IfFalseNode, CProjNode)                                 \
1881   declare_c2_type(PCTableNode, MultiBranchNode)                           \
1882   declare_c2_type(JumpNode, PCTableNode)                                  \
1883   declare_c2_type(JumpProjNode, JProjNode)                                \
1884   declare_c2_type(CatchNode, PCTableNode)                                 \
1885   declare_c2_type(CatchProjNode, CProjNode)                               \
1886   declare_c2_type(CreateExNode, TypeNode)                                 \
1887   declare_c2_type(ClearArrayNode, Node)                                   \
1888   declare_c2_type(NeverBranchNode, MultiBranchNode)                       \
1889   declare_c2_type(ConNode, TypeNode)                                      \
1890   declare_c2_type(ConINode, ConNode)                                      \
1891   declare_c2_type(ConPNode, ConNode)                                      \
1892   declare_c2_type(ConNNode, ConNode)                                      \
1893   declare_c2_type(ConLNode, ConNode)                                      \
1894   declare_c2_type(ConFNode, ConNode)                                      \
1895   declare_c2_type(ConDNode, ConNode)                                      \
1896   declare_c2_type(BinaryNode, Node)                                       \
1897   declare_c2_type(CMoveNode, TypeNode)                                    \
1898   declare_c2_type(CMoveDNode, CMoveNode)                                  \
1899   declare_c2_type(CMoveFNode, CMoveNode)                                  \
1900   declare_c2_type(CMoveINode, CMoveNode)                                  \
1901   declare_c2_type(CMoveLNode, CMoveNode)                                  \
1902   declare_c2_type(CMovePNode, CMoveNode)                                  \
1903   declare_c2_type(CMoveNNode, CMoveNode)                                  \
1904   declare_c2_type(EncodePNode, TypeNode)                                  \
1905   declare_c2_type(DecodeNNode, TypeNode)                                  \
1906   declare_c2_type(EncodePKlassNode, TypeNode)                             \
1907   declare_c2_type(DecodeNKlassNode, TypeNode)                             \
1908   declare_c2_type(ConstraintCastNode, TypeNode)                           \
1909   declare_c2_type(CastIINode, ConstraintCastNode)                         \
1910   declare_c2_type(CastPPNode, ConstraintCastNode)                         \
1911   declare_c2_type(CheckCastPPNode, TypeNode)                              \
1912   declare_c2_type(Conv2BNode, Node)                                       \
1913   declare_c2_type(ConvD2FNode, Node)                                      \
1914   declare_c2_type(ConvD2INode, Node)                                      \
1915   declare_c2_type(ConvD2LNode, Node)                                      \
1916   declare_c2_type(ConvF2DNode, Node)                                      \
1917   declare_c2_type(ConvF2INode, Node)                                      \
1918   declare_c2_type(ConvF2LNode, Node)                                      \
1919   declare_c2_type(ConvI2DNode, Node)                                      \
1920   declare_c2_type(ConvI2FNode, Node)                                      \
1921   declare_c2_type(ConvI2LNode, TypeNode)                                  \
1922   declare_c2_type(ConvL2DNode, Node)                                      \
1923   declare_c2_type(ConvL2FNode, Node)                                      \
1924   declare_c2_type(ConvL2INode, Node)                                      \
1925   declare_c2_type(CastX2PNode, Node)                                      \
1926   declare_c2_type(CastP2XNode, Node)                                      \
1927   declare_c2_type(MemBarNode, MultiNode)                                  \
1928   declare_c2_type(MemBarAcquireNode, MemBarNode)                          \
1929   declare_c2_type(MemBarReleaseNode, MemBarNode)                          \
1930   declare_c2_type(LoadFenceNode, MemBarNode)                              \
1931   declare_c2_type(StoreFenceNode, MemBarNode)                             \
1932   declare_c2_type(MemBarVolatileNode, MemBarNode)                         \
1933   declare_c2_type(MemBarCPUOrderNode, MemBarNode)                         \
1934   declare_c2_type(InitializeNode, MemBarNode)                             \
1935   declare_c2_type(ThreadLocalNode, Node)                                  \
1936   declare_c2_type(Opaque1Node, Node)                                      \
1937   declare_c2_type(Opaque2Node, Node)                                      \
1938   declare_c2_type(PartialSubtypeCheckNode, Node)                          \
1939   declare_c2_type(MoveI2FNode, Node)                                      \
1940   declare_c2_type(MoveL2DNode, Node)                                      \
1941   declare_c2_type(MoveF2INode, Node)                                      \
1942   declare_c2_type(MoveD2LNode, Node)                                      \
1943   declare_c2_type(DivINode, Node)                                         \
1944   declare_c2_type(DivLNode, Node)                                         \
1945   declare_c2_type(DivFNode, Node)                                         \
1946   declare_c2_type(DivDNode, Node)                                         \
1947   declare_c2_type(ModINode, Node)                                         \
1948   declare_c2_type(ModLNode, Node)                                         \
1949   declare_c2_type(ModFNode, Node)                                         \
1950   declare_c2_type(ModDNode, Node)                                         \
1951   declare_c2_type(DivModNode, MultiNode)                                  \
1952   declare_c2_type(DivModINode, DivModNode)                                \
1953   declare_c2_type(DivModLNode, DivModNode)                                \
1954   declare_c2_type(BoxLockNode, Node)                                      \
1955   declare_c2_type(LoopNode, RegionNode)                                   \
1956   declare_c2_type(CountedLoopNode, LoopNode)                              \
1957   declare_c2_type(CountedLoopEndNode, IfNode)                             \
1958   declare_c2_type(MachNode, Node)                                         \
1959   declare_c2_type(MachIdealNode, MachNode)                                \
1960   declare_c2_type(MachTypeNode, MachNode)                                 \
1961   declare_c2_type(MachBreakpointNode, MachIdealNode)                      \
1962   declare_c2_type(MachUEPNode, MachIdealNode)                             \
1963   declare_c2_type(MachPrologNode, MachIdealNode)                          \
1964   declare_c2_type(MachEpilogNode, MachIdealNode)                          \
1965   declare_c2_type(MachNopNode, MachIdealNode)                             \
1966   declare_c2_type(MachSpillCopyNode, MachIdealNode)                       \
1967   declare_c2_type(MachNullCheckNode, MachIdealNode)                       \
1968   declare_c2_type(MachProjNode, ProjNode)                                 \
1969   declare_c2_type(MachIfNode, MachNode)                                   \
1970   declare_c2_type(MachFastLockNode, MachNode)                             \
1971   declare_c2_type(MachReturnNode, MachNode)                               \
1972   declare_c2_type(MachSafePointNode, MachReturnNode)                      \
1973   declare_c2_type(MachCallNode, MachSafePointNode)                        \
1974   declare_c2_type(MachCallJavaNode, MachCallNode)                         \
1975   declare_c2_type(MachCallStaticJavaNode, MachCallJavaNode)               \
1976   declare_c2_type(MachCallDynamicJavaNode, MachCallJavaNode)              \
1977   declare_c2_type(MachCallRuntimeNode, MachCallNode)                      \
1978   declare_c2_type(MachHaltNode, MachReturnNode)                           \
1979   declare_c2_type(MachTempNode, MachNode)                                 \
1980   declare_c2_type(MemNode, Node)                                          \
1981   declare_c2_type(MergeMemNode, Node)                                     \
1982   declare_c2_type(LoadNode, MemNode)                                      \
1983   declare_c2_type(LoadBNode, LoadNode)                                    \
1984   declare_c2_type(LoadUSNode, LoadNode)                                   \
1985   declare_c2_type(LoadINode, LoadNode)                                    \
1986   declare_c2_type(LoadRangeNode, LoadINode)                               \
1987   declare_c2_type(LoadLNode, LoadNode)                                    \
1988   declare_c2_type(LoadL_unalignedNode, LoadLNode)                         \
1989   declare_c2_type(LoadFNode, LoadNode)                                    \
1990   declare_c2_type(LoadDNode, LoadNode)                                    \
1991   declare_c2_type(LoadD_unalignedNode, LoadDNode)                         \
1992   declare_c2_type(LoadPNode, LoadNode)                                    \
1993   declare_c2_type(LoadNNode, LoadNode)                                    \
1994   declare_c2_type(LoadKlassNode, LoadPNode)                               \
1995   declare_c2_type(LoadNKlassNode, LoadNNode)                              \
1996   declare_c2_type(LoadSNode, LoadNode)                                    \
1997   declare_c2_type(StoreNode, MemNode)                                     \
1998   declare_c2_type(StoreBNode, StoreNode)                                  \
1999   declare_c2_type(StoreCNode, StoreNode)                                  \
2000   declare_c2_type(StoreINode, StoreNode)                                  \
2001   declare_c2_type(StoreLNode, StoreNode)                                  \
2002   declare_c2_type(StoreFNode, StoreNode)                                  \
2003   declare_c2_type(StoreDNode, StoreNode)                                  \
2004   declare_c2_type(StorePNode, StoreNode)                                  \
2005   declare_c2_type(StoreNNode, StoreNode)                                  \
2006   declare_c2_type(StoreNKlassNode, StoreNode)                             \
2007   declare_c2_type(StoreCMNode, StoreNode)                                 \
2008   declare_c2_type(LoadPLockedNode, LoadPNode)                             \
2009   declare_c2_type(SCMemProjNode, ProjNode)                                \
2010   declare_c2_type(LoadStoreNode, Node)                                    \
2011   declare_c2_type(StorePConditionalNode, LoadStoreNode)                   \
2012   declare_c2_type(StoreLConditionalNode, LoadStoreNode)                   \
2013   declare_c2_type(CompareAndSwapLNode, LoadStoreNode)                     \
2014   declare_c2_type(CompareAndSwapINode, LoadStoreNode)                     \
2015   declare_c2_type(CompareAndSwapPNode, LoadStoreNode)                     \
2016   declare_c2_type(CompareAndSwapNNode, LoadStoreNode)                     \
2017   declare_c2_type(MulNode, Node)                                          \
2018   declare_c2_type(MulINode, MulNode)                                      \
2019   declare_c2_type(MulLNode, MulNode)                                      \
2020   declare_c2_type(MulFNode, MulNode)                                      \
2021   declare_c2_type(MulDNode, MulNode)                                      \
2022   declare_c2_type(MulHiLNode, Node)                                       \
2023   declare_c2_type(AndINode, MulINode)                                     \
2024   declare_c2_type(AndLNode, MulLNode)                                     \
2025   declare_c2_type(LShiftINode, Node)                                      \
2026   declare_c2_type(LShiftLNode, Node)                                      \
2027   declare_c2_type(RShiftINode, Node)                                      \
2028   declare_c2_type(RShiftLNode, Node)                                      \
2029   declare_c2_type(URShiftINode, Node)                                     \
2030   declare_c2_type(URShiftLNode, Node)                                     \
2031   declare_c2_type(MultiNode, Node)                                        \
2032   declare_c2_type(ProjNode, Node)                                         \
2033   declare_c2_type(TypeNode, Node)                                         \
2034   declare_c2_type(NodeHash, StackObj)                                     \
2035   declare_c2_type(RootNode, LoopNode)                                     \
2036   declare_c2_type(HaltNode, Node)                                         \
2037   declare_c2_type(SubNode, Node)                                          \
2038   declare_c2_type(SubINode, SubNode)                                      \
2039   declare_c2_type(SubLNode, SubNode)                                      \
2040   declare_c2_type(SubFPNode, SubNode)                                     \
2041   declare_c2_type(SubFNode, SubFPNode)                                    \
2042   declare_c2_type(SubDNode, SubFPNode)                                    \
2043   declare_c2_type(CmpNode, SubNode)                                       \
2044   declare_c2_type(CmpINode, CmpNode)                                      \
2045   declare_c2_type(CmpUNode, CmpNode)                                      \
2046   declare_c2_type(CmpPNode, CmpNode)                                      \
2047   declare_c2_type(CmpNNode, CmpNode)                                      \
2048   declare_c2_type(CmpLNode, CmpNode)                                      \
2049   declare_c2_type(CmpL3Node, CmpLNode)                                    \
2050   declare_c2_type(CmpFNode, CmpNode)                                      \
2051   declare_c2_type(CmpF3Node, CmpFNode)                                    \
2052   declare_c2_type(CmpDNode, CmpNode)                                      \
2053   declare_c2_type(CmpD3Node, CmpDNode)                                    \
2054   declare_c2_type(BoolNode, Node)                                         \
2055   declare_c2_type(AbsNode, Node)                                          \
2056   declare_c2_type(AbsINode, AbsNode)                                      \
2057   declare_c2_type(AbsFNode, AbsNode)                                      \
2058   declare_c2_type(AbsDNode, AbsNode)                                      \
2059   declare_c2_type(CmpLTMaskNode, Node)                                    \
2060   declare_c2_type(NegNode, Node)                                          \
2061   declare_c2_type(NegFNode, NegNode)                                      \
2062   declare_c2_type(NegDNode, NegNode)                                      \
2063   declare_c2_type(CosDNode, Node)                                         \
2064   declare_c2_type(SinDNode, Node)                                         \
2065   declare_c2_type(TanDNode, Node)                                         \
2066   declare_c2_type(AtanDNode, Node)                                        \
2067   declare_c2_type(SqrtDNode, Node)                                        \
2068   declare_c2_type(Log10DNode, Node)                                       \
2069   declare_c2_type(PowDNode, Node)                                         \
2070   declare_c2_type(ReverseBytesINode, Node)                                \
2071   declare_c2_type(ReverseBytesLNode, Node)                                \
2072   declare_c2_type(ReductionNode, Node)                                    \
2073   declare_c2_type(VectorNode, Node)                                       \
2074   declare_c2_type(AddVBNode, VectorNode)                                  \
2075   declare_c2_type(AddVSNode, VectorNode)                                  \
2076   declare_c2_type(AddVINode, VectorNode)                                  \
2077   declare_c2_type(AddReductionVINode, ReductionNode)                      \
2078   declare_c2_type(AddVLNode, VectorNode)                                  \
2079   declare_c2_type(AddReductionVLNode, ReductionNode)                      \
2080   declare_c2_type(AddVFNode, VectorNode)                                  \
2081   declare_c2_type(AddReductionVFNode, ReductionNode)                      \
2082   declare_c2_type(AddVDNode, VectorNode)                                  \
2083   declare_c2_type(AddReductionVDNode, ReductionNode)                      \
2084   declare_c2_type(SubVBNode, VectorNode)                                  \
2085   declare_c2_type(SubVSNode, VectorNode)                                  \
2086   declare_c2_type(SubVINode, VectorNode)                                  \
2087   declare_c2_type(SubVLNode, VectorNode)                                  \
2088   declare_c2_type(SubVFNode, VectorNode)                                  \
2089   declare_c2_type(SubVDNode, VectorNode)                                  \
2090   declare_c2_type(MulVSNode, VectorNode)                                  \
2091   declare_c2_type(MulVLNode, VectorNode)                                  \
2092   declare_c2_type(MulReductionVLNode, ReductionNode)                      \
2093   declare_c2_type(MulVINode, VectorNode)                                  \
2094   declare_c2_type(MulReductionVINode, ReductionNode)                      \
2095   declare_c2_type(MulVFNode, VectorNode)                                  \
2096   declare_c2_type(MulReductionVFNode, ReductionNode)                      \
2097   declare_c2_type(MulVDNode, VectorNode)                                  \
2098   declare_c2_type(CMoveVDNode, VectorNode)                                \
2099   declare_c2_type(MulReductionVDNode, ReductionNode)                      \
2100   declare_c2_type(DivVFNode, VectorNode)                                  \
2101   declare_c2_type(DivVDNode, VectorNode)                                  \
2102   declare_c2_type(LShiftVBNode, VectorNode)                               \
2103   declare_c2_type(LShiftVSNode, VectorNode)                               \
2104   declare_c2_type(LShiftVINode, VectorNode)                               \
2105   declare_c2_type(LShiftVLNode, VectorNode)                               \
2106   declare_c2_type(RShiftVBNode, VectorNode)                               \
2107   declare_c2_type(RShiftVSNode, VectorNode)                               \
2108   declare_c2_type(RShiftVINode, VectorNode)                               \
2109   declare_c2_type(RShiftVLNode, VectorNode)                               \
2110   declare_c2_type(URShiftVBNode, VectorNode)                              \
2111   declare_c2_type(URShiftVSNode, VectorNode)                              \
2112   declare_c2_type(URShiftVINode, VectorNode)                              \
2113   declare_c2_type(URShiftVLNode, VectorNode)                              \
2114   declare_c2_type(AndVNode, VectorNode)                                   \
2115   declare_c2_type(OrVNode, VectorNode)                                    \
2116   declare_c2_type(XorVNode, VectorNode)                                   \
2117   declare_c2_type(LoadVectorNode, LoadNode)                               \
2118   declare_c2_type(StoreVectorNode, StoreNode)                             \
2119   declare_c2_type(ReplicateBNode, VectorNode)                             \
2120   declare_c2_type(ReplicateSNode, VectorNode)                             \
2121   declare_c2_type(ReplicateINode, VectorNode)                             \
2122   declare_c2_type(ReplicateLNode, VectorNode)                             \
2123   declare_c2_type(ReplicateFNode, VectorNode)                             \
2124   declare_c2_type(ReplicateDNode, VectorNode)                             \
2125   declare_c2_type(PackNode, VectorNode)                                   \
2126   declare_c2_type(PackBNode, PackNode)                                    \
2127   declare_c2_type(PackSNode, PackNode)                                    \
2128   declare_c2_type(PackINode, PackNode)                                    \
2129   declare_c2_type(PackLNode, PackNode)                                    \
2130   declare_c2_type(PackFNode, PackNode)                                    \
2131   declare_c2_type(PackDNode, PackNode)                                    \
2132   declare_c2_type(Pack2LNode, PackNode)                                   \
2133   declare_c2_type(Pack2DNode, PackNode)                                   \
2134   declare_c2_type(ExtractNode, Node)                                      \
2135   declare_c2_type(ExtractBNode, ExtractNode)                              \
2136   declare_c2_type(ExtractUBNode, ExtractNode)                             \
2137   declare_c2_type(ExtractCNode, ExtractNode)                              \
2138   declare_c2_type(ExtractSNode, ExtractNode)                              \
2139   declare_c2_type(ExtractINode, ExtractNode)                              \
2140   declare_c2_type(ExtractLNode, ExtractNode)                              \
2141   declare_c2_type(ExtractFNode, ExtractNode)                              \
2142   declare_c2_type(ExtractDNode, ExtractNode)                              \
2143   declare_c2_type(OverflowNode, CmpNode)                                  \
2144   declare_c2_type(OverflowINode, OverflowNode)                            \
2145   declare_c2_type(OverflowAddINode, OverflowINode)                        \
2146   declare_c2_type(OverflowSubINode, OverflowINode)                        \
2147   declare_c2_type(OverflowMulINode, OverflowINode)                        \
2148   declare_c2_type(OverflowLNode, OverflowNode)                            \
2149   declare_c2_type(OverflowAddLNode, OverflowLNode)                        \
2150   declare_c2_type(OverflowSubLNode, OverflowLNode)                        \
2151   declare_c2_type(OverflowMulLNode, OverflowLNode)                        \
2152                                                                           \
2153   /*********************/                                                 \
2154   /* Adapter Blob Entries */                                              \
2155   /*********************/                                                 \
2156   declare_toplevel_type(AdapterHandlerEntry)                              \
2157   declare_toplevel_type(AdapterHandlerEntry*)                             \
2158                                                                           \
2159   /*********************/                                                 \
2160   /* CI */                                                                \
2161   /*********************/                                                 \
2162   declare_toplevel_type(ciEnv)                                            \
2163   declare_toplevel_type(ciObjectFactory)                                  \
2164   declare_toplevel_type(ciConstant)                                       \
2165   declare_toplevel_type(ciField)                                          \
2166   declare_toplevel_type(ciSymbol)                                         \
2167   declare_toplevel_type(ciBaseObject)                                     \
2168   declare_type(ciObject, ciBaseObject)                                    \
2169   declare_type(ciInstance, ciObject)                                      \
2170   declare_type(ciMetadata, ciBaseObject)                                  \
2171   declare_type(ciMethod, ciMetadata)                                      \
2172   declare_type(ciMethodData, ciMetadata)                                  \
2173   declare_type(ciType, ciMetadata)                                        \
2174   declare_type(ciKlass, ciType)                                           \
2175   declare_type(ciInstanceKlass, ciKlass)                                  \
2176   declare_type(ciArrayKlass, ciKlass)                                     \
2177   declare_type(ciTypeArrayKlass, ciArrayKlass)                            \
2178   declare_type(ciObjArrayKlass, ciArrayKlass)                             \
2179                                                                           \
2180   /********************/                                                  \
2181   /* -XX flags        */                                                  \
2182   /********************/                                                  \
2183                                                                           \
2184   declare_toplevel_type(Flag)                                             \
2185   declare_toplevel_type(Flag*)                                            \
2186                                                                           \
2187   /********************/                                                  \
2188   /* JVMTI            */                                                  \
2189   /********************/                                                  \
2190                                                                           \
2191   declare_toplevel_type(JvmtiExport)                                      \
2192                                                                           \
2193   /********************/                                                  \
2194   /* JDK/VM version   */                                                  \
2195   /********************/                                                  \
2196                                                                           \
2197   declare_toplevel_type(Abstract_VM_Version)                              \
2198   declare_toplevel_type(JDK_Version)                                      \
2199                                                                           \
2200   /*************/                                                         \
2201   /* Arguments */                                                         \
2202   /*************/                                                         \
2203                                                                           \
2204   declare_toplevel_type(Arguments)                                        \
2205                                                                           \
2206   /***************/                                                       \
2207   /* Other types */                                                       \
2208   /***************/                                                       \
2209                                                                           \
2210   /* all enum types */                                                    \
2211                                                                           \
2212    declare_integer_type(Bytecodes::Code)                                  \
2213    declare_integer_type(Generation::Name)                                 \
2214    declare_integer_type(InstanceKlass::ClassState)                        \
2215    declare_integer_type(JavaThreadState)                                  \
2216    declare_integer_type(Location::Type)                                   \
2217    declare_integer_type(Location::Where)                                  \
2218    declare_integer_type(Flag::Flags)                                      \
2219    COMPILER2_PRESENT(declare_integer_type(OptoReg::Name))                 \
2220                                                                           \
2221    declare_toplevel_type(CHeapObj&lt;mtInternal&gt;)                            \
2222             declare_type(Array&lt;int&gt;, MetaspaceObj)                        \
2223             declare_type(Array&lt;u1&gt;, MetaspaceObj)                         \
2224             declare_type(Array&lt;u2&gt;, MetaspaceObj)                         \
2225             declare_type(Array&lt;Klass*&gt;, MetaspaceObj)                     \
2226             declare_type(Array&lt;Method*&gt;, MetaspaceObj)                    \
2227                                                                           \
2228    declare_integer_type(AccessFlags)  /* FIXME: wrong type (not integer) */\
2229   declare_toplevel_type(address)      /* FIXME: should this be an integer type? */\
2230    declare_integer_type(BasicType)   /* FIXME: wrong type (not integer) */\
2231   declare_toplevel_type(BreakpointInfo)                                   \
2232   declare_toplevel_type(BreakpointInfo*)                                  \
2233   declare_toplevel_type(CodeBlob*)                                        \
2234   declare_toplevel_type(CompressedWriteStream*)                           \
2235   declare_toplevel_type(ConstantPoolCacheEntry)                           \
2236   declare_toplevel_type(elapsedTimer)                                     \
2237   declare_toplevel_type(frame)                                            \
2238   declare_toplevel_type(intptr_t*)                                        \
2239    declare_unsigned_integer_type(InvocationCounter) /* FIXME: wrong type (not integer) */ \
2240   declare_toplevel_type(JavaThread*)                                      \
2241   declare_toplevel_type(java_lang_Class)                                  \
2242   declare_integer_type(JavaThread::AsyncRequests)                         \
2243   declare_toplevel_type(jbyte*)                                           \
2244   declare_toplevel_type(jbyte**)                                          \
2245   declare_toplevel_type(jint*)                                            \
2246   declare_toplevel_type(jniIdMapBase*)                                    \
2247   declare_unsigned_integer_type(juint)                                    \
2248   declare_unsigned_integer_type(julong)                                   \
2249   declare_toplevel_type(JNIHandleBlock*)                                  \
2250   declare_toplevel_type(JNIid)                                            \
2251   declare_toplevel_type(JNIid*)                                           \
2252   declare_toplevel_type(jmethodID*)                                       \
2253   declare_toplevel_type(Mutex*)                                           \
2254   declare_toplevel_type(nmethod*)                                         \
2255   COMPILER2_PRESENT(declare_unsigned_integer_type(node_idx_t))            \
2256   declare_toplevel_type(ObjectMonitor*)                                   \
2257   declare_toplevel_type(oop*)                                             \
2258   declare_toplevel_type(OopMap**)                                         \
2259   declare_toplevel_type(OopMapCache*)                                     \
2260   declare_toplevel_type(OopMapSet*)                                       \
2261   declare_toplevel_type(VMReg)                                            \
2262   declare_toplevel_type(OSThread*)                                        \
2263    declare_integer_type(ReferenceType)                                    \
2264   declare_toplevel_type(StubQueue*)                                       \
2265   declare_toplevel_type(Thread*)                                          \
2266   declare_toplevel_type(Universe)                                         \
2267   declare_toplevel_type(os)                                               \
2268   declare_toplevel_type(vframeArray)                                      \
2269   declare_toplevel_type(vframeArrayElement)                               \
2270   declare_toplevel_type(Annotations*)                                     \
2271                                                                           \
2272   /***************/                                                       \
2273   /* Miscellaneous types */                                               \
2274   /***************/                                                       \
2275                                                                           \
2276   declare_toplevel_type(PtrQueue)                                         \
2277                                                                           \
2278   /* freelist */                                                          \
2279   declare_toplevel_type(FreeChunk*)                                       \
2280   declare_toplevel_type(AdaptiveFreeList&lt;FreeChunk&gt;*)                     \
2281   declare_toplevel_type(AdaptiveFreeList&lt;FreeChunk&gt;)
2282 
2283 
2284 //--------------------------------------------------------------------------------
2285 // VM_INT_CONSTANTS
2286 //
2287 // This table contains integer constants required over in the
2288 // serviceability agent. The "declare_constant" macro is used for all
2289 // enums, etc., while "declare_preprocessor_constant" must be used for
2290 // all #defined constants.
2291 
2292 #define VM_INT_CONSTANTS(declare_constant,                                \
2293                          declare_preprocessor_constant,                   \
2294                          declare_c1_constant,                             \
2295                          declare_c2_constant,                             \
2296                          declare_c2_preprocessor_constant)                \
2297                                                                           \
2298   /******************/                                                    \
2299   /* Useful globals */                                                    \
2300   /******************/                                                    \
2301                                                                           \
2302   declare_preprocessor_constant("ASSERT", DEBUG_ONLY(1) NOT_DEBUG(0))     \
2303                                                                           \
2304   /**************/                                                        \
2305   /* Stack bias */                                                        \
2306   /**************/                                                        \
2307                                                                           \
2308   declare_preprocessor_constant("STACK_BIAS", STACK_BIAS)                 \
2309                                                                           \
2310   /****************/                                                      \
2311   /* Object sizes */                                                      \
2312   /****************/                                                      \
2313                                                                           \
2314   declare_constant(oopSize)                                               \
2315   declare_constant(LogBytesPerWord)                                       \
2316   declare_constant(BytesPerWord)                                          \
2317   declare_constant(BytesPerLong)                                          \
2318                                                                           \
2319   declare_constant(LogKlassAlignmentInBytes)                              \
2320                                                                           \
2321   /********************************************/                          \
2322   /* Generation and Space Hierarchy Constants */                          \
2323   /********************************************/                          \
2324                                                                           \
2325   declare_constant(ageTable::table_size)                                  \
2326                                                                           \
2327   declare_constant(BarrierSet::ModRef)                                    \
2328   declare_constant(BarrierSet::CardTableModRef)                           \
2329   declare_constant(BarrierSet::CardTableForRS)                            \
2330   declare_constant(BarrierSet::CardTableExtension)                        \
2331   declare_constant(BarrierSet::G1SATBCT)                                  \
2332   declare_constant(BarrierSet::G1SATBCTLogging)                           \
2333                                                                           \
2334   declare_constant(BlockOffsetSharedArray::LogN)                          \
2335   declare_constant(BlockOffsetSharedArray::LogN_words)                    \
2336   declare_constant(BlockOffsetSharedArray::N_bytes)                       \
2337   declare_constant(BlockOffsetSharedArray::N_words)                       \
2338                                                                           \
2339   declare_constant(BlockOffsetArray::N_words)                             \
2340                                                                           \
2341   declare_constant(CardTableModRefBS::clean_card)                         \
2342   declare_constant(CardTableModRefBS::last_card)                          \
2343   declare_constant(CardTableModRefBS::dirty_card)                         \
2344   declare_constant(CardTableModRefBS::Precise)                            \
2345   declare_constant(CardTableModRefBS::ObjHeadPreciseArray)                \
2346   declare_constant(CardTableModRefBS::card_shift)                         \
2347   declare_constant(CardTableModRefBS::card_size)                          \
2348   declare_constant(CardTableModRefBS::card_size_in_words)                 \
2349                                                                           \
2350   declare_constant(CardTableRS::youngergen_card)                          \
2351                                                                           \
2352   declare_constant(G1SATBCardTableModRefBS::g1_young_gen)                 \
2353                                                                           \
2354   declare_constant(CollectedHeap::GenCollectedHeap)                       \
2355   declare_constant(CollectedHeap::ParallelScavengeHeap)                   \
2356   declare_constant(CollectedHeap::G1CollectedHeap)                        \
2357                                                                           \
2358   /* constants from Generation::Name enum */                              \
2359                                                                           \
2360   declare_constant(Generation::DefNew)                                    \
2361   declare_constant(Generation::MarkSweepCompact)                          \
2362   declare_constant(Generation::Other)                                     \
2363                                                                           \
2364   declare_constant(Generation::LogOfGenGrain)                             \
2365   declare_constant(Generation::GenGrain)                                  \
2366                                                                           \
2367   declare_constant(HeapWordSize)                                          \
2368   declare_constant(LogHeapWordSize)                                       \
2369                                                                           \
2370                                                                           \
2371   /************************/                                              \
2372   /* PerfMemory - jvmstat */                                              \
2373   /************************/                                              \
2374                                                                           \
2375   declare_preprocessor_constant("PERFDATA_MAJOR_VERSION", PERFDATA_MAJOR_VERSION) \
2376   declare_preprocessor_constant("PERFDATA_MINOR_VERSION", PERFDATA_MINOR_VERSION) \
2377   declare_preprocessor_constant("PERFDATA_BIG_ENDIAN", PERFDATA_BIG_ENDIAN)       \
2378   declare_preprocessor_constant("PERFDATA_LITTLE_ENDIAN", PERFDATA_LITTLE_ENDIAN) \
2379                                                                           \
2380   /***********************************/                                   \
2381   /* LoaderConstraintTable constants */                                   \
2382   /***********************************/                                   \
2383                                                                           \
2384   declare_constant(LoaderConstraintTable::_loader_constraint_size)        \
2385   declare_constant(LoaderConstraintTable::_nof_buckets)                   \
2386                                                                           \
2387   /************************************************************/          \
2388   /* HotSpot specific JVM_ACC constants from global anon enum */          \
2389   /************************************************************/          \
2390                                                                           \
2391   declare_constant(JVM_ACC_WRITTEN_FLAGS)                                 \
2392   declare_constant(JVM_ACC_MONITOR_MATCH)                                 \
2393   declare_constant(JVM_ACC_HAS_MONITOR_BYTECODES)                         \
2394   declare_constant(JVM_ACC_HAS_LOOPS)                                     \
2395   declare_constant(JVM_ACC_LOOPS_FLAG_INIT)                               \
2396   declare_constant(JVM_ACC_QUEUED)                                        \
2397   declare_constant(JVM_ACC_NOT_C2_OSR_COMPILABLE)                         \
2398   declare_constant(JVM_ACC_HAS_LINE_NUMBER_TABLE)                         \
2399   declare_constant(JVM_ACC_HAS_CHECKED_EXCEPTIONS)                        \
2400   declare_constant(JVM_ACC_HAS_JSRS)                                      \
2401   declare_constant(JVM_ACC_IS_OLD)                                        \
2402   declare_constant(JVM_ACC_IS_OBSOLETE)                                   \
2403   declare_constant(JVM_ACC_IS_PREFIXED_NATIVE)                            \
2404   declare_constant(JVM_ACC_HAS_MIRANDA_METHODS)                           \
2405   declare_constant(JVM_ACC_HAS_VANILLA_CONSTRUCTOR)                       \
2406   declare_constant(JVM_ACC_HAS_FINALIZER)                                 \
2407   declare_constant(JVM_ACC_IS_CLONEABLE)                                  \
2408   declare_constant(JVM_ACC_HAS_LOCAL_VARIABLE_TABLE)                      \
2409   declare_constant(JVM_ACC_PROMOTED_FLAGS)                                \
2410   declare_constant(JVM_ACC_FIELD_ACCESS_WATCHED)                          \
2411   declare_constant(JVM_ACC_FIELD_MODIFICATION_WATCHED)                    \
2412   declare_constant(JVM_ACC_FIELD_INTERNAL)                                \
2413   declare_constant(JVM_ACC_FIELD_STABLE)                                  \
2414   declare_constant(JVM_ACC_FIELD_HAS_GENERIC_SIGNATURE)                   \
2415                                                                           \
2416   declare_constant(JVM_CONSTANT_Utf8)                                     \
2417   declare_constant(JVM_CONSTANT_Unicode)                                  \
2418   declare_constant(JVM_CONSTANT_Integer)                                  \
2419   declare_constant(JVM_CONSTANT_Float)                                    \
2420   declare_constant(JVM_CONSTANT_Long)                                     \
2421   declare_constant(JVM_CONSTANT_Double)                                   \
2422   declare_constant(JVM_CONSTANT_Class)                                    \
2423   declare_constant(JVM_CONSTANT_String)                                   \
2424   declare_constant(JVM_CONSTANT_Fieldref)                                 \
2425   declare_constant(JVM_CONSTANT_Methodref)                                \
2426   declare_constant(JVM_CONSTANT_InterfaceMethodref)                       \
2427   declare_constant(JVM_CONSTANT_NameAndType)                              \
2428   declare_constant(JVM_CONSTANT_MethodHandle)                             \
2429   declare_constant(JVM_CONSTANT_MethodType)                               \
2430   declare_constant(JVM_CONSTANT_InvokeDynamic)                            \
2431   declare_constant(JVM_CONSTANT_ExternalMax)                              \
2432                                                                           \
2433   declare_constant(JVM_CONSTANT_Invalid)                                  \
2434   declare_constant(JVM_CONSTANT_InternalMin)                              \
2435   declare_constant(JVM_CONSTANT_UnresolvedClass)                          \
2436   declare_constant(JVM_CONSTANT_ClassIndex)                               \
2437   declare_constant(JVM_CONSTANT_StringIndex)                              \
2438   declare_constant(JVM_CONSTANT_UnresolvedClassInError)                   \
2439   declare_constant(JVM_CONSTANT_MethodHandleInError)                      \
2440   declare_constant(JVM_CONSTANT_MethodTypeInError)                        \
2441   declare_constant(JVM_CONSTANT_InternalMax)                              \
2442                                                                           \
2443   /*****************************/                                         \
2444   /* Thread::SuspendFlags enum */                                         \
2445   /*****************************/                                         \
2446                                                                           \
2447   declare_constant(Thread::_external_suspend)                             \
2448   declare_constant(Thread::_ext_suspended)                                \
2449   declare_constant(Thread::_has_async_exception)                          \
2450                                                                           \
2451   /*******************/                                                   \
2452   /* JavaThreadState */                                                   \
2453   /*******************/                                                   \
2454                                                                           \
2455   declare_constant(_thread_uninitialized)                                 \
2456   declare_constant(_thread_new)                                           \
2457   declare_constant(_thread_new_trans)                                     \
2458   declare_constant(_thread_in_native)                                     \
2459   declare_constant(_thread_in_native_trans)                               \
2460   declare_constant(_thread_in_vm)                                         \
2461   declare_constant(_thread_in_vm_trans)                                   \
2462   declare_constant(_thread_in_Java)                                       \
2463   declare_constant(_thread_in_Java_trans)                                 \
2464   declare_constant(_thread_blocked)                                       \
2465   declare_constant(_thread_blocked_trans)                                 \
2466                                                                           \
2467   /******************************/                                        \
2468   /* Klass misc. enum constants */                                        \
2469   /******************************/                                        \
2470                                                                           \
2471   declare_constant(Klass::_primary_super_limit)                           \
2472   declare_constant(Klass::_lh_neutral_value)                              \
2473   declare_constant(Klass::_lh_instance_slow_path_bit)                     \
2474   declare_constant(Klass::_lh_log2_element_size_shift)                    \
2475   declare_constant(Klass::_lh_log2_element_size_mask)                     \
2476   declare_constant(Klass::_lh_element_type_shift)                         \
2477   declare_constant(Klass::_lh_element_type_mask)                          \
2478   declare_constant(Klass::_lh_header_size_shift)                          \
2479   declare_constant(Klass::_lh_header_size_mask)                           \
2480   declare_constant(Klass::_lh_array_tag_shift)                            \
2481   declare_constant(Klass::_lh_array_tag_type_value)                       \
2482   declare_constant(Klass::_lh_array_tag_obj_value)                        \
2483                                                                           \
2484   /********************************/                                      \
2485   /* ConstMethod anon-enum */                                             \
2486   /********************************/                                      \
2487                                                                           \
2488   declare_constant(Method::_jfr_towrite)                                  \
2489   declare_constant(Method::_caller_sensitive)                             \
2490   declare_constant(Method::_force_inline)                                 \
2491   declare_constant(Method::_dont_inline)                                  \
2492   declare_constant(Method::_hidden)                                       \
2493                                                                           \
2494   declare_constant(Method::nonvirtual_vtable_index)                       \
2495                                                                           \
2496   declare_constant(Method::extra_stack_entries_for_jsr292)                \
2497                                                                           \
2498   declare_constant(ConstMethod::_has_linenumber_table)                    \
2499   declare_constant(ConstMethod::_has_checked_exceptions)                  \
2500   declare_constant(ConstMethod::_has_localvariable_table)                 \
2501   declare_constant(ConstMethod::_has_exception_table)                     \
2502   declare_constant(ConstMethod::_has_generic_signature)                   \
2503   declare_constant(ConstMethod::_has_method_parameters)                   \
2504   declare_constant(ConstMethod::_has_method_annotations)                  \
2505   declare_constant(ConstMethod::_has_parameter_annotations)               \
2506   declare_constant(ConstMethod::_has_default_annotations)                 \
2507   declare_constant(ConstMethod::_has_type_annotations)                    \
2508                                                                           \
2509   /**************/                                                        \
2510   /* DataLayout */                                                        \
2511   /**************/                                                        \
2512                                                                           \
2513   declare_constant(DataLayout::cell_size)                                 \
2514   declare_constant(DataLayout::no_tag)                                    \
2515   declare_constant(DataLayout::bit_data_tag)                              \
2516   declare_constant(DataLayout::counter_data_tag)                          \
2517   declare_constant(DataLayout::jump_data_tag)                             \
2518   declare_constant(DataLayout::receiver_type_data_tag)                    \
2519   declare_constant(DataLayout::virtual_call_data_tag)                     \
2520   declare_constant(DataLayout::ret_data_tag)                              \
2521   declare_constant(DataLayout::branch_data_tag)                           \
2522   declare_constant(DataLayout::multi_branch_data_tag)                     \
2523   declare_constant(DataLayout::arg_info_data_tag)                         \
2524   declare_constant(DataLayout::call_type_data_tag)                        \
2525   declare_constant(DataLayout::virtual_call_type_data_tag)                \
2526   declare_constant(DataLayout::parameters_type_data_tag)                  \
2527   declare_constant(DataLayout::speculative_trap_data_tag)                 \
2528                                                                           \
2529   /*************************************/                                 \
2530   /* InstanceKlass enum                */                                 \
2531   /*************************************/                                 \
2532                                                                           \
2533                                                                           \
2534   /*************************************/                                 \
2535   /* FieldInfo FieldOffset enum        */                                 \
2536   /*************************************/                                 \
2537                                                                           \
2538   declare_constant(FieldInfo::access_flags_offset)                        \
2539   declare_constant(FieldInfo::name_index_offset)                          \
2540   declare_constant(FieldInfo::signature_index_offset)                     \
2541   declare_constant(FieldInfo::initval_index_offset)                       \
2542   declare_constant(FieldInfo::low_packed_offset)                          \
2543   declare_constant(FieldInfo::high_packed_offset)                         \
2544   declare_constant(FieldInfo::field_slots)                                \
2545                                                                           \
2546   /*************************************/                                 \
2547   /* FieldInfo tag constants           */                                 \
2548   /*************************************/                                 \
2549                                                                           \
2550   declare_preprocessor_constant("FIELDINFO_TAG_SIZE", FIELDINFO_TAG_SIZE) \
2551   declare_preprocessor_constant("FIELDINFO_TAG_MASK", FIELDINFO_TAG_MASK) \
2552   declare_preprocessor_constant("FIELDINFO_TAG_OFFSET", FIELDINFO_TAG_OFFSET) \
2553                                                                           \
2554   /************************************************/                      \
2555   /* InstanceKlass InnerClassAttributeOffset enum */                      \
2556   /************************************************/                      \
2557                                                                           \
2558   declare_constant(InstanceKlass::inner_class_inner_class_info_offset)    \
2559   declare_constant(InstanceKlass::inner_class_outer_class_info_offset)    \
2560   declare_constant(InstanceKlass::inner_class_inner_name_offset)          \
2561   declare_constant(InstanceKlass::inner_class_access_flags_offset)        \
2562   declare_constant(InstanceKlass::inner_class_next_offset)                \
2563                                                                           \
2564   /*********************************/                                     \
2565   /* InstanceKlass ClassState enum */                                     \
2566   /*********************************/                                     \
2567                                                                           \
2568   declare_constant(InstanceKlass::allocated)                              \
2569   declare_constant(InstanceKlass::loaded)                                 \
2570   declare_constant(InstanceKlass::linked)                                 \
2571   declare_constant(InstanceKlass::being_initialized)                      \
2572   declare_constant(InstanceKlass::fully_initialized)                      \
2573   declare_constant(InstanceKlass::initialization_error)                   \
2574                                                                           \
2575   /*********************************/                                     \
2576   /* Symbol* - symbol max length */                                       \
2577   /*********************************/                                     \
2578                                                                           \
2579   declare_constant(Symbol::max_symbol_length)                             \
2580                                                                           \
2581   /***********************************************/                       \
2582   /* ConstantPool* layout enum for InvokeDynamic */                       \
2583   /***********************************************/                       \
2584                                                                           \
2585   declare_constant(ConstantPool::_indy_bsm_offset)                        \
2586   declare_constant(ConstantPool::_indy_argc_offset)                       \
2587   declare_constant(ConstantPool::_indy_argv_offset)                       \
2588   declare_constant(ConstantPool::CPCACHE_INDEX_TAG)                       \
2589                                                                           \
2590   /********************************/                                      \
2591   /* ConstantPoolCacheEntry enums */                                      \
2592   /********************************/                                      \
2593                                                                           \
2594   declare_constant(ConstantPoolCacheEntry::is_volatile_shift)             \
2595   declare_constant(ConstantPoolCacheEntry::is_final_shift)                \
2596   declare_constant(ConstantPoolCacheEntry::is_forced_virtual_shift)       \
2597   declare_constant(ConstantPoolCacheEntry::is_vfinal_shift)               \
2598   declare_constant(ConstantPoolCacheEntry::is_field_entry_shift)          \
2599   declare_constant(ConstantPoolCacheEntry::tos_state_shift)               \
2600                                                                           \
2601   /***************************************/                               \
2602   /* java_lang_Thread::ThreadStatus enum */                               \
2603   /***************************************/                               \
2604                                                                           \
2605   declare_constant(java_lang_Thread::NEW)                                 \
2606   declare_constant(java_lang_Thread::RUNNABLE)                            \
2607   declare_constant(java_lang_Thread::SLEEPING)                            \
2608   declare_constant(java_lang_Thread::IN_OBJECT_WAIT)                      \
2609   declare_constant(java_lang_Thread::IN_OBJECT_WAIT_TIMED)                \
2610   declare_constant(java_lang_Thread::PARKED)                              \
2611   declare_constant(java_lang_Thread::PARKED_TIMED)                        \
2612   declare_constant(java_lang_Thread::BLOCKED_ON_MONITOR_ENTER)            \
2613   declare_constant(java_lang_Thread::TERMINATED)                          \
2614                                                                           \
2615   /******************************/                                        \
2616   /* Debug info                 */                                        \
2617   /******************************/                                        \
2618                                                                           \
2619   declare_constant(Location::OFFSET_MASK)                                 \
2620   declare_constant(Location::OFFSET_SHIFT)                                \
2621   declare_constant(Location::TYPE_MASK)                                   \
2622   declare_constant(Location::TYPE_SHIFT)                                  \
2623   declare_constant(Location::WHERE_MASK)                                  \
2624   declare_constant(Location::WHERE_SHIFT)                                 \
2625                                                                           \
2626   /* constants from Location::Type enum  */                               \
2627                                                                           \
2628   declare_constant(Location::normal)                                      \
2629   declare_constant(Location::oop)                                         \
2630   declare_constant(Location::narrowoop)                                   \
2631   declare_constant(Location::int_in_long)                                 \
2632   declare_constant(Location::lng)                                         \
2633   declare_constant(Location::float_in_dbl)                                \
2634   declare_constant(Location::dbl)                                         \
2635   declare_constant(Location::addr)                                        \
2636   declare_constant(Location::invalid)                                     \
2637                                                                           \
2638   /* constants from Location::Where enum */                               \
2639                                                                           \
2640   declare_constant(Location::on_stack)                                    \
2641   declare_constant(Location::in_register)                                 \
2642                                                                           \
2643   declare_constant(Deoptimization::Reason_many)                           \
2644   declare_constant(Deoptimization::Reason_none)                           \
2645   declare_constant(Deoptimization::Reason_null_check)                     \
2646   declare_constant(Deoptimization::Reason_null_assert)                    \
2647   declare_constant(Deoptimization::Reason_range_check)                    \
2648   declare_constant(Deoptimization::Reason_class_check)                    \
2649   declare_constant(Deoptimization::Reason_array_check)                    \
2650   declare_constant(Deoptimization::Reason_intrinsic)                      \
2651   declare_constant(Deoptimization::Reason_bimorphic)                      \
2652   declare_constant(Deoptimization::Reason_unloaded)                       \
2653   declare_constant(Deoptimization::Reason_uninitialized)                  \
2654   declare_constant(Deoptimization::Reason_unreached)                      \
2655   declare_constant(Deoptimization::Reason_unhandled)                      \
2656   declare_constant(Deoptimization::Reason_constraint)                     \
2657   declare_constant(Deoptimization::Reason_div0_check)                     \
2658   declare_constant(Deoptimization::Reason_age)                            \
2659   declare_constant(Deoptimization::Reason_predicate)                      \
2660   declare_constant(Deoptimization::Reason_loop_limit_check)               \
2661   declare_constant(Deoptimization::Reason_speculate_class_check)          \
2662   declare_constant(Deoptimization::Reason_speculate_null_check)           \
2663   declare_constant(Deoptimization::Reason_rtm_state_change)               \
2664   declare_constant(Deoptimization::Reason_unstable_if)                    \
2665   declare_constant(Deoptimization::Reason_unstable_fused_if)              \
2666   declare_constant(Deoptimization::Reason_tenured)                        \
2667   declare_constant(Deoptimization::Reason_LIMIT)                          \
2668   declare_constant(Deoptimization::Reason_RECORDED_LIMIT)                 \
2669                                                                           \
2670   declare_constant(Deoptimization::Action_none)                           \
2671   declare_constant(Deoptimization::Action_maybe_recompile)                \
2672   declare_constant(Deoptimization::Action_reinterpret)                    \
2673   declare_constant(Deoptimization::Action_make_not_entrant)               \
2674   declare_constant(Deoptimization::Action_make_not_compilable)            \
2675   declare_constant(Deoptimization::Action_LIMIT)                          \
2676                                                                           \
2677   /***************************************************/                   \
2678   /* DEFAULT_CACHE_LINE_SIZE (globalDefinitions.hpp) */                   \
2679   /***************************************************/                   \
2680                                                                           \
2681   declare_constant(DEFAULT_CACHE_LINE_SIZE)                               \
2682                                                                           \
2683   declare_constant(Deoptimization::Unpack_deopt)                          \
2684   declare_constant(Deoptimization::Unpack_exception)                      \
2685   declare_constant(Deoptimization::Unpack_uncommon_trap)                  \
2686   declare_constant(Deoptimization::Unpack_reexecute)                      \
2687                                                                           \
2688   declare_constant(Deoptimization::_action_bits)                          \
2689   declare_constant(Deoptimization::_reason_bits)                          \
2690   declare_constant(Deoptimization::_debug_id_bits)                        \
2691   declare_constant(Deoptimization::_action_shift)                         \
2692   declare_constant(Deoptimization::_reason_shift)                         \
2693   declare_constant(Deoptimization::_debug_id_shift)                       \
2694                                                                           \
2695   /*********************/                                                 \
2696   /* Matcher (C2 only) */                                                 \
2697   /*********************/                                                 \
2698                                                                           \
2699   declare_c2_preprocessor_constant("Matcher::interpreter_frame_pointer_reg", Matcher::interpreter_frame_pointer_reg()) \
2700                                                                           \
2701   /*********************************************/                         \
2702   /* MethodCompilation (globalDefinitions.hpp) */                         \
2703   /*********************************************/                         \
2704                                                                           \
2705   declare_constant(InvocationEntryBci)                                    \
2706                                                                           \
2707   /*************/                                                         \
2708   /* CompLevel */                                                         \
2709   /*************/                                                         \
2710                                                                           \
2711   declare_constant(CompLevel_any)                                         \
2712   declare_constant(CompLevel_all)                                         \
2713   declare_constant(CompLevel_none)                                        \
2714   declare_constant(CompLevel_simple)                                      \
2715   declare_constant(CompLevel_limited_profile)                             \
2716   declare_constant(CompLevel_full_profile)                                \
2717   declare_constant(CompLevel_full_optimization)                           \
2718                                                                           \
2719   /***************/                                                       \
2720   /* OopMapValue */                                                       \
2721   /***************/                                                       \
2722                                                                           \
2723   declare_constant(OopMapValue::type_bits)                                \
2724   declare_constant(OopMapValue::register_bits)                            \
2725   declare_constant(OopMapValue::type_shift)                               \
2726   declare_constant(OopMapValue::register_shift)                           \
2727   declare_constant(OopMapValue::type_mask)                                \
2728   declare_constant(OopMapValue::type_mask_in_place)                       \
2729   declare_constant(OopMapValue::register_mask)                            \
2730   declare_constant(OopMapValue::register_mask_in_place)                   \
2731   declare_constant(OopMapValue::unused_value)                             \
2732   declare_constant(OopMapValue::oop_value)                                \
2733   declare_constant(OopMapValue::narrowoop_value)                          \
2734   declare_constant(OopMapValue::callee_saved_value)                       \
2735   declare_constant(OopMapValue::derived_oop_value)                        \
2736                                                                           \
2737   /******************/                                                    \
2738   /* JNIHandleBlock */                                                    \
2739   /******************/                                                    \
2740                                                                           \
2741   declare_constant(JNIHandleBlock::block_size_in_oops)                    \
2742                                                                           \
2743   /**********************/                                                \
2744   /* ObjectSynchronizer */                                                \
2745   /**********************/                                                \
2746                                                                           \
2747   declare_constant(ObjectSynchronizer::_BLOCKSIZE)                        \
2748                                                                           \
2749   /**********************/                                                \
2750   /* PcDesc             */                                                \
2751   /**********************/                                                \
2752                                                                           \
2753   declare_constant(PcDesc::PCDESC_reexecute)                              \
2754   declare_constant(PcDesc::PCDESC_is_method_handle_invoke)                \
2755   declare_constant(PcDesc::PCDESC_return_oop)                             \
2756                                                                           \
2757   /**********************/                                                \
2758   /* frame              */                                                \
2759   /**********************/                                                \
2760   NOT_ZERO(PPC64_ONLY(declare_constant(frame::entry_frame_locals_size)))  \
2761                                                                           \
2762   NOT_ZERO(X86_ONLY(declare_constant(frame::entry_frame_call_wrapper_offset)))      \
2763   declare_constant(frame::pc_return_offset)                               \
2764                                                                           \
2765   /*************/                                                         \
2766   /* vmSymbols */                                                         \
2767   /*************/                                                         \
2768                                                                           \
2769   declare_constant(vmSymbols::FIRST_SID)                                  \
2770   declare_constant(vmSymbols::SID_LIMIT)                                  \
2771                                                                           \
2772   /****************/                                                      \
2773   /* vmIntrinsics */                                                      \
2774   /****************/                                                      \
2775                                                                           \
2776   declare_constant(vmIntrinsics::_invokeBasic)                            \
2777   declare_constant(vmIntrinsics::_linkToVirtual)                          \
2778   declare_constant(vmIntrinsics::_linkToStatic)                           \
2779   declare_constant(vmIntrinsics::_linkToSpecial)                          \
2780   declare_constant(vmIntrinsics::_linkToInterface)                        \
2781                                                                           \
2782   /********************************/                                      \
2783   /* Calling convention constants */                                      \
2784   /********************************/                                      \
2785                                                                           \
2786   declare_constant(RegisterImpl::number_of_registers)                     \
2787   declare_constant(ConcreteRegisterImpl::number_of_registers)             \
2788   declare_preprocessor_constant("REG_COUNT", REG_COUNT)                \
2789   declare_c2_preprocessor_constant("SAVED_ON_ENTRY_REG_COUNT", SAVED_ON_ENTRY_REG_COUNT) \
2790   declare_c2_preprocessor_constant("C_SAVED_ON_ENTRY_REG_COUNT", C_SAVED_ON_ENTRY_REG_COUNT)
2791 
2792 
2793 //--------------------------------------------------------------------------------
2794 // VM_LONG_CONSTANTS
2795 //
2796 // This table contains long constants required over in the
2797 // serviceability agent. The "declare_constant" macro is used for all
2798 // enums, etc., while "declare_preprocessor_constant" must be used for
2799 // all #defined constants.
2800 
2801 #define VM_LONG_CONSTANTS(declare_constant, declare_preprocessor_constant, declare_c1_constant, declare_c2_constant, declare_c2_preprocessor_constant) \
2802                                                                           \
2803   /*********************/                                                 \
2804   /* MarkOop constants */                                                 \
2805   /*********************/                                                 \
2806                                                                           \
2807   /* Note: some of these are declared as long constants just for */       \
2808   /* consistency. The mask constants are the only ones requiring */       \
2809   /* 64 bits (on 64-bit platforms). */                                    \
2810                                                                           \
2811   declare_constant(markOopDesc::age_bits)                                 \
2812   declare_constant(markOopDesc::lock_bits)                                \
2813   declare_constant(markOopDesc::biased_lock_bits)                         \
2814   declare_constant(markOopDesc::max_hash_bits)                            \
2815   declare_constant(markOopDesc::hash_bits)                                \
2816                                                                           \
2817   declare_constant(markOopDesc::lock_shift)                               \
2818   declare_constant(markOopDesc::biased_lock_shift)                        \
2819   declare_constant(markOopDesc::age_shift)                                \
2820   declare_constant(markOopDesc::hash_shift)                               \
2821                                                                           \
2822   declare_constant(markOopDesc::lock_mask)                                \
2823   declare_constant(markOopDesc::lock_mask_in_place)                       \
2824   declare_constant(markOopDesc::biased_lock_mask)                         \
2825   declare_constant(markOopDesc::biased_lock_mask_in_place)                \
2826   declare_constant(markOopDesc::biased_lock_bit_in_place)                 \
2827   declare_constant(markOopDesc::age_mask)                                 \
2828   declare_constant(markOopDesc::age_mask_in_place)                        \
2829   declare_constant(markOopDesc::epoch_mask)                               \
2830   declare_constant(markOopDesc::epoch_mask_in_place)                      \
2831   declare_constant(markOopDesc::hash_mask)                                \
2832   declare_constant(markOopDesc::hash_mask_in_place)                       \
2833   declare_constant(markOopDesc::biased_lock_alignment)                    \
2834                                                                           \
2835   declare_constant(markOopDesc::locked_value)                             \
2836   declare_constant(markOopDesc::unlocked_value)                           \
2837   declare_constant(markOopDesc::monitor_value)                            \
2838   declare_constant(markOopDesc::marked_value)                             \
2839   declare_constant(markOopDesc::biased_lock_pattern)                      \
2840                                                                           \
2841   declare_constant(markOopDesc::no_hash)                                  \
2842   declare_constant(markOopDesc::no_hash_in_place)                         \
2843   declare_constant(markOopDesc::no_lock_in_place)                         \
2844   declare_constant(markOopDesc::max_age)                                  \
2845                                                                           \
2846   /* Constants in markOop used by CMS. */                                 \
2847   declare_constant(markOopDesc::cms_shift)                                \
2848   declare_constant(markOopDesc::cms_mask)                                 \
2849   declare_constant(markOopDesc::size_shift)                               \
2850                                                                           \
2851   /* InvocationCounter constants */                                       \
2852   declare_constant(InvocationCounter::count_increment)                    \
2853   declare_constant(InvocationCounter::count_shift)
2854 
2855 
2856 //--------------------------------------------------------------------------------
2857 // VM_ADDRESSES
2858 //
2859 
2860 #define VM_ADDRESSES(declare_address, declare_preprocessor_address, declare_function) \
2861                                                                           \
2862   declare_function(SharedRuntime::register_finalizer)                     \
2863   declare_function(SharedRuntime::exception_handler_for_return_address)   \
2864   declare_function(SharedRuntime::OSR_migration_end)                      \
2865   declare_function(SharedRuntime::dsin)                                   \
2866   declare_function(SharedRuntime::dcos)                                   \
2867   declare_function(SharedRuntime::dtan)                                   \
2868   declare_function(SharedRuntime::dexp)                                   \
2869   declare_function(SharedRuntime::dlog)                                   \
2870   declare_function(SharedRuntime::dlog10)                                 \
2871   declare_function(SharedRuntime::dpow)                                   \
2872                                                                           \
2873   declare_function(os::dll_load)                                          \
2874   declare_function(os::dll_lookup)                                        \
2875   declare_function(os::javaTimeMillis)                                    \
2876   declare_function(os::javaTimeNanos)                                     \
2877                                                                           \
2878   declare_function(Deoptimization::fetch_unroll_info)                     \
2879   COMPILER2_PRESENT(declare_function(Deoptimization::uncommon_trap))      \
2880   declare_function(Deoptimization::unpack_frames)
2881 
2882 //--------------------------------------------------------------------------------
2883 // Macros operating on the above lists
2884 //--------------------------------------------------------------------------------
2885 
2886 // This utility macro quotes the passed string
2887 #define QUOTE(x) #x
2888 
2889 //--------------------------------------------------------------------------------
2890 // VMStructEntry macros
2891 //
2892 
2893 // This macro generates a VMStructEntry line for a nonstatic field
2894 #define GENERATE_NONSTATIC_VM_STRUCT_ENTRY(typeName, fieldName, type)              \
2895  { QUOTE(typeName), QUOTE(fieldName), QUOTE(type), 0, offset_of(typeName, fieldName), NULL },
2896 
2897 // This macro generates a VMStructEntry line for a static field
2898 #define GENERATE_STATIC_VM_STRUCT_ENTRY(typeName, fieldName, type)                 \
2899  { QUOTE(typeName), QUOTE(fieldName), QUOTE(type), 1, 0, &amp;typeName::fieldName },
2900 
2901 // This macro generates a VMStructEntry line for a static pointer volatile field,
2902 // e.g.: "static ObjectMonitor * volatile gBlockList;"
2903 #define GENERATE_STATIC_PTR_VOLATILE_VM_STRUCT_ENTRY(typeName, fieldName, type)    \
2904  { QUOTE(typeName), QUOTE(fieldName), QUOTE(type), 1, 0, (void *)&amp;typeName::fieldName },
2905 
2906 // This macro generates a VMStructEntry line for an unchecked
2907 // nonstatic field, in which the size of the type is also specified.
2908 // The type string is given as NULL, indicating an "opaque" type.
2909 #define GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY(typeName, fieldName, size)    \
2910   { QUOTE(typeName), QUOTE(fieldName), NULL, 0, offset_of(typeName, fieldName), NULL },
2911 
2912 // This macro generates a VMStructEntry line for an unchecked
2913 // static field, in which the size of the type is also specified.
2914 // The type string is given as NULL, indicating an "opaque" type.
2915 #define GENERATE_UNCHECKED_STATIC_VM_STRUCT_ENTRY(typeName, fieldName, size)       \
2916  { QUOTE(typeName), QUOTE(fieldName), NULL, 1, 0, (void*) &amp;typeName::fieldName },
2917 
2918 // This macro generates the sentinel value indicating the end of the list
2919 #define GENERATE_VM_STRUCT_LAST_ENTRY() \
2920  { NULL, NULL, NULL, 0, 0, NULL }
2921 
2922 // This macro checks the type of a VMStructEntry by comparing pointer types
2923 #define CHECK_NONSTATIC_VM_STRUCT_ENTRY(typeName, fieldName, type)                 \
2924  {typeName *dummyObj = NULL; type* dummy = &amp;dummyObj-&gt;fieldName;                   \
2925   assert(offset_of(typeName, fieldName) &lt; sizeof(typeName), "Illegal nonstatic struct entry, field offset too large"); }
2926 
2927 // This macro checks the type of a volatile VMStructEntry by comparing pointer types
2928 #define CHECK_VOLATILE_NONSTATIC_VM_STRUCT_ENTRY(typeName, fieldName, type)        \
2929  {typedef type dummyvtype; typeName *dummyObj = NULL; volatile dummyvtype* dummy = &amp;dummyObj-&gt;fieldName; }
2930 
2931 // This macro checks the type of a static VMStructEntry by comparing pointer types
2932 #define CHECK_STATIC_VM_STRUCT_ENTRY(typeName, fieldName, type)                    \
2933  {type* dummy = &amp;typeName::fieldName; }
2934 
2935 // This macro checks the type of a static pointer volatile VMStructEntry by comparing pointer types,
2936 // e.g.: "static ObjectMonitor * volatile gBlockList;"
2937 #define CHECK_STATIC_PTR_VOLATILE_VM_STRUCT_ENTRY(typeName, fieldName, type)       \
2938  {type volatile * dummy = &amp;typeName::fieldName; }
2939 
2940 // This macro ensures the type of a field and its containing type are
2941 // present in the type table. The assertion string is shorter than
2942 // preferable because (incredibly) of a bug in Solstice NFS client
2943 // which seems to prevent very long lines from compiling. This assertion
2944 // means that an entry in VMStructs::localHotSpotVMStructs[] was not
2945 // found in VMStructs::localHotSpotVMTypes[].
2946 #define ENSURE_FIELD_TYPE_PRESENT(typeName, fieldName, type)                       \
2947  { assert(findType(QUOTE(typeName)) != 0, "type \"" QUOTE(typeName) "\" not found in type table"); \
2948    assert(findType(QUOTE(type)) != 0, "type \"" QUOTE(type) "\" not found in type table"); }
2949 
2950 // This is a no-op macro for unchecked fields
2951 #define CHECK_NO_OP(a, b, c)
2952 
2953 //
2954 // Build-specific macros:
2955 //
2956 
2957 // Generate and check a nonstatic field in non-product builds
2958 #ifndef PRODUCT
2959 # define GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2960 # define CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)    CHECK_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2961 # define ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT(a, b, c)          ENSURE_FIELD_TYPE_PRESENT(a, b, c)
2962 # define GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2963 # define CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)    CHECK_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2964 # define ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT(a, b, c)          ENSURE_FIELD_TYPE_PRESENT(a, b, c)
2965 #else
2966 # define GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2967 # define CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2968 # define ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT(a, b, c)
2969 # define GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2970 # define CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2971 # define ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT(a, b, c)
2972 #endif /* PRODUCT */
2973 
2974 // Generate and check a nonstatic field in C1 builds
2975 #ifdef COMPILER1
2976 # define GENERATE_C1_NONSTATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2977 # define CHECK_C1_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)    CHECK_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2978 # define ENSURE_C1_FIELD_TYPE_PRESENT(a, b, c)          ENSURE_FIELD_TYPE_PRESENT(a, b, c)
2979 #else
2980 # define GENERATE_C1_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2981 # define CHECK_C1_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2982 # define ENSURE_C1_FIELD_TYPE_PRESENT(a, b, c)
2983 #endif /* COMPILER1 */
2984 // Generate and check a nonstatic field in C2 builds
2985 #ifdef COMPILER2
2986 # define GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2987 # define CHECK_C2_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)    CHECK_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2988 # define ENSURE_C2_FIELD_TYPE_PRESENT(a, b, c)          ENSURE_FIELD_TYPE_PRESENT(a, b, c)
2989 #else
2990 # define GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2991 # define CHECK_C2_NONSTATIC_VM_STRUCT_ENTRY(a, b, c)
2992 # define ENSURE_C2_FIELD_TYPE_PRESENT(a, b, c)
2993 #endif /* COMPILER2 */
2994 
2995 // Generate but do not check a static field in C1 builds
2996 #ifdef COMPILER1
2997 # define GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c)
2998 #else
2999 # define GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c)
3000 #endif /* COMPILER1 */
3001 
3002 // Generate but do not check a static field in C2 builds
3003 #ifdef COMPILER2
3004 # define GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c) GENERATE_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c)
3005 #else
3006 # define GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY(a, b, c)
3007 #endif /* COMPILER2 */
3008 
3009 //--------------------------------------------------------------------------------
3010 // VMTypeEntry macros
3011 //
3012 
3013 #define GENERATE_VM_TYPE_ENTRY(type, superclass) \
3014  { QUOTE(type), QUOTE(superclass), 0, 0, 0, sizeof(type) },
3015 
3016 #define GENERATE_TOPLEVEL_VM_TYPE_ENTRY(type) \
3017  { QUOTE(type), NULL,              0, 0, 0, sizeof(type) },
3018 
3019 #define GENERATE_OOP_VM_TYPE_ENTRY(type) \
3020  { QUOTE(type), NULL,              1, 0, 0, sizeof(type) },
3021 
3022 #define GENERATE_INTEGER_VM_TYPE_ENTRY(type) \
3023  { QUOTE(type), NULL,              0, 1, 0, sizeof(type) },
3024 
3025 #define GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY(type) \
3026  { QUOTE(type), NULL,              0, 1, 1, sizeof(type) },
3027 
3028 #define GENERATE_VM_TYPE_LAST_ENTRY() \
3029  { NULL, NULL, 0, 0, 0, 0 }
3030 
3031 #define CHECK_VM_TYPE_ENTRY(type, superclass) \
3032  { type* dummyObj = NULL; superclass* dummySuperObj = dummyObj; }
3033 
3034 #define CHECK_VM_TYPE_NO_OP(a)
3035 #define CHECK_SINGLE_ARG_VM_TYPE_NO_OP(a)
3036 
3037 //
3038 // Build-specific macros:
3039 //
3040 
3041 #ifdef COMPILER1
3042 # define GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY(a)               GENERATE_TOPLEVEL_VM_TYPE_ENTRY(a)
3043 # define CHECK_C1_TOPLEVEL_VM_TYPE_ENTRY(a)
3044 #else
3045 # define GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY(a)
3046 # define CHECK_C1_TOPLEVEL_VM_TYPE_ENTRY(a)
3047 #endif /* COMPILER1 */
3048 
3049 #ifdef COMPILER2
3050 # define GENERATE_C2_VM_TYPE_ENTRY(a, b)                     GENERATE_VM_TYPE_ENTRY(a, b)
3051 # define CHECK_C2_VM_TYPE_ENTRY(a, b)                        CHECK_VM_TYPE_ENTRY(a, b)
3052 # define GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY(a)               GENERATE_TOPLEVEL_VM_TYPE_ENTRY(a)
3053 # define CHECK_C2_TOPLEVEL_VM_TYPE_ENTRY(a)
3054 #else
3055 # define GENERATE_C2_VM_TYPE_ENTRY(a, b)
3056 # define CHECK_C2_VM_TYPE_ENTRY(a, b)
3057 # define GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY(a)
3058 # define CHECK_C2_TOPLEVEL_VM_TYPE_ENTRY(a)
3059 #endif /* COMPILER2 */
3060 
3061 
3062 //--------------------------------------------------------------------------------
3063 // VMIntConstantEntry macros
3064 //
3065 
3066 #define GENERATE_VM_INT_CONSTANT_ENTRY(name) \
3067  { QUOTE(name), (int32_t) name },
3068 
3069 #define GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY(name, value) \
3070  { name, (int32_t) value },
3071 
3072 // This macro generates the sentinel value indicating the end of the list
3073 #define GENERATE_VM_INT_CONSTANT_LAST_ENTRY() \
3074  { NULL, 0 }
3075 
3076 
3077 // Generate an int constant for a C1 build
3078 #ifdef COMPILER1
3079 # define GENERATE_C1_VM_INT_CONSTANT_ENTRY(name)  GENERATE_VM_INT_CONSTANT_ENTRY(name)
3080 #else
3081 # define GENERATE_C1_VM_INT_CONSTANT_ENTRY(name)
3082 #endif /* COMPILER1 */
3083 
3084 // Generate an int constant for a C2 build
3085 #ifdef COMPILER2
3086 # define GENERATE_C2_VM_INT_CONSTANT_ENTRY(name)                      GENERATE_VM_INT_CONSTANT_ENTRY(name)
3087 # define GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY(name, value)  GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY(name, value)
3088 #else
3089 # define GENERATE_C2_VM_INT_CONSTANT_ENTRY(name)
3090 # define GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY(name, value)
3091 #endif /* COMPILER1 */
3092 
3093 //--------------------------------------------------------------------------------
3094 // VMLongConstantEntry macros
3095 //
3096 
3097 #define GENERATE_VM_LONG_CONSTANT_ENTRY(name) \
3098   { QUOTE(name), name },
3099 
3100 #define GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY(name, value) \
3101   { name, value },
3102 
3103 // This macro generates the sentinel value indicating the end of the list
3104 #define GENERATE_VM_LONG_CONSTANT_LAST_ENTRY() \
3105  { NULL, 0 }
3106 
3107 // Generate a long constant for a C1 build
3108 #ifdef COMPILER1
3109 # define GENERATE_C1_VM_LONG_CONSTANT_ENTRY(name)  GENERATE_VM_LONG_CONSTANT_ENTRY(name)
3110 #else
3111 # define GENERATE_C1_VM_LONG_CONSTANT_ENTRY(name)
3112 #endif /* COMPILER1 */
3113 
3114 // Generate a long constant for a C2 build
3115 #ifdef COMPILER2
3116 # define GENERATE_C2_VM_LONG_CONSTANT_ENTRY(name)                     GENERATE_VM_LONG_CONSTANT_ENTRY(name)
3117 # define GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY(name, value) GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY(name, value)
3118 #else
3119 # define GENERATE_C2_VM_LONG_CONSTANT_ENTRY(name)
3120 # define GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY(name, value)
3121 #endif /* COMPILER1 */
3122 
3123 //--------------------------------------------------------------------------------
3124 // VMAddressEntry macros
3125 //
3126 
3127 #define GENERATE_VM_ADDRESS_ENTRY(name) \
3128   { QUOTE(name), (void*) (name) },
3129 
3130 #define GENERATE_PREPROCESSOR_VM_ADDRESS_ENTRY(name, value) \
3131   { name, (void*) (value) },
3132 
3133 #define GENERATE_VM_FUNCTION_ENTRY(name) \
3134   { QUOTE(name), CAST_FROM_FN_PTR(void*, &amp;(name)) },
3135 
3136 // This macro generates the sentinel value indicating the end of the list
3137 #define GENERATE_VM_ADDRESS_LAST_ENTRY() \
3138  { NULL, NULL }
3139 
3140 //
3141 // Instantiation of VMStructEntries, VMTypeEntries and VMIntConstantEntries
3142 //
3143 
3144 // These initializers are allowed to access private fields in classes
3145 // as long as class VMStructs is a friend
3146 VMStructEntry VMStructs::localHotSpotVMStructs[] = {
3147 
3148   VM_STRUCTS(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3149              GENERATE_STATIC_VM_STRUCT_ENTRY,
3150              GENERATE_STATIC_PTR_VOLATILE_VM_STRUCT_ENTRY,
3151              GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY,
3152              GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3153              GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
3154              GENERATE_C1_NONSTATIC_VM_STRUCT_ENTRY,
3155              GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY,
3156              GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY,
3157              GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY)
3158 
3159 #if INCLUDE_JVMCI
3160   VM_STRUCTS_JVMCI(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3161                    GENERATE_STATIC_VM_STRUCT_ENTRY)
3162 #endif
3163 
3164 #if INCLUDE_ALL_GCS
3165   VM_STRUCTS_PARALLELGC(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3166                         GENERATE_STATIC_VM_STRUCT_ENTRY)
3167 
3168   VM_STRUCTS_CMS(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3169                  GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3170                  GENERATE_STATIC_VM_STRUCT_ENTRY)
3171 
3172   VM_STRUCTS_G1(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3173                 GENERATE_STATIC_VM_STRUCT_ENTRY)
3174 #endif // INCLUDE_ALL_GCS
3175 
3176 #if INCLUDE_TRACE
3177   VM_STRUCTS_TRACE(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3178                 GENERATE_STATIC_VM_STRUCT_ENTRY)
3179 #endif
3180 
3181   VM_STRUCTS_EXT(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3182                  GENERATE_STATIC_VM_STRUCT_ENTRY)
3183 
3184   VM_STRUCTS_OS(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3185                 GENERATE_STATIC_VM_STRUCT_ENTRY,
3186                 GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY,
3187                 GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3188                 GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
3189                 GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY,
3190                 GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY,
3191                 GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY)
3192 
3193   VM_STRUCTS_CPU(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3194                  GENERATE_STATIC_VM_STRUCT_ENTRY,
3195                  GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY,
3196                  GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3197                  GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
3198                  GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY,
3199                  GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY,
3200                  GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY)
3201 
3202   VM_STRUCTS_OS_CPU(GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3203                     GENERATE_STATIC_VM_STRUCT_ENTRY,
3204                     GENERATE_UNCHECKED_NONSTATIC_VM_STRUCT_ENTRY,
3205                     GENERATE_NONSTATIC_VM_STRUCT_ENTRY,
3206                     GENERATE_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
3207                     GENERATE_C2_NONSTATIC_VM_STRUCT_ENTRY,
3208                     GENERATE_C1_UNCHECKED_STATIC_VM_STRUCT_ENTRY,
3209                     GENERATE_C2_UNCHECKED_STATIC_VM_STRUCT_ENTRY)
3210 
3211   GENERATE_VM_STRUCT_LAST_ENTRY()
3212 };
3213 
3214 VMTypeEntry VMStructs::localHotSpotVMTypes[] = {
3215 
3216   VM_TYPES(GENERATE_VM_TYPE_ENTRY,
3217            GENERATE_TOPLEVEL_VM_TYPE_ENTRY,
3218            GENERATE_OOP_VM_TYPE_ENTRY,
3219            GENERATE_INTEGER_VM_TYPE_ENTRY,
3220            GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY,
3221            GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY,
3222            GENERATE_C2_VM_TYPE_ENTRY,
3223            GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY)
3224 
3225 #if INCLUDE_JVMCI
3226   VM_TYPES_JVMCI(GENERATE_VM_TYPE_ENTRY,
3227                  GENERATE_TOPLEVEL_VM_TYPE_ENTRY)
3228 #endif
3229 
3230 #if INCLUDE_ALL_GCS
3231   VM_TYPES_PARALLELGC(GENERATE_VM_TYPE_ENTRY,
3232                       GENERATE_TOPLEVEL_VM_TYPE_ENTRY)
3233 
3234   VM_TYPES_CMS(GENERATE_VM_TYPE_ENTRY,
3235                GENERATE_TOPLEVEL_VM_TYPE_ENTRY)
3236 
3237   VM_TYPES_PARNEW(GENERATE_VM_TYPE_ENTRY)
3238 
3239   VM_TYPES_G1(GENERATE_VM_TYPE_ENTRY,
3240               GENERATE_TOPLEVEL_VM_TYPE_ENTRY)
3241 #endif // INCLUDE_ALL_GCS
3242 
3243 #if INCLUDE_TRACE
3244   VM_TYPES_TRACE(GENERATE_VM_TYPE_ENTRY,
3245               GENERATE_TOPLEVEL_VM_TYPE_ENTRY)
3246 #endif
3247 
3248   VM_TYPES_EXT(GENERATE_VM_TYPE_ENTRY,
3249                GENERATE_TOPLEVEL_VM_TYPE_ENTRY)
3250 
3251   VM_TYPES_OS(GENERATE_VM_TYPE_ENTRY,
3252               GENERATE_TOPLEVEL_VM_TYPE_ENTRY,
3253               GENERATE_OOP_VM_TYPE_ENTRY,
3254               GENERATE_INTEGER_VM_TYPE_ENTRY,
3255               GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY,
3256               GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY,
3257               GENERATE_C2_VM_TYPE_ENTRY,
3258               GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY)
3259 
3260   VM_TYPES_CPU(GENERATE_VM_TYPE_ENTRY,
3261                GENERATE_TOPLEVEL_VM_TYPE_ENTRY,
3262                GENERATE_OOP_VM_TYPE_ENTRY,
3263                GENERATE_INTEGER_VM_TYPE_ENTRY,
3264                GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY,
3265                GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY,
3266                GENERATE_C2_VM_TYPE_ENTRY,
3267                GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY)
3268 
3269   VM_TYPES_OS_CPU(GENERATE_VM_TYPE_ENTRY,
3270                   GENERATE_TOPLEVEL_VM_TYPE_ENTRY,
3271                   GENERATE_OOP_VM_TYPE_ENTRY,
3272                   GENERATE_INTEGER_VM_TYPE_ENTRY,
3273                   GENERATE_UNSIGNED_INTEGER_VM_TYPE_ENTRY,
3274                   GENERATE_C1_TOPLEVEL_VM_TYPE_ENTRY,
3275                   GENERATE_C2_VM_TYPE_ENTRY,
3276                   GENERATE_C2_TOPLEVEL_VM_TYPE_ENTRY)
3277 
3278   GENERATE_VM_TYPE_LAST_ENTRY()
3279 };
3280 
3281 VMIntConstantEntry VMStructs::localHotSpotVMIntConstants[] = {
3282 
3283   VM_INT_CONSTANTS(GENERATE_VM_INT_CONSTANT_ENTRY,
3284                    GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY,
3285                    GENERATE_C1_VM_INT_CONSTANT_ENTRY,
3286                    GENERATE_C2_VM_INT_CONSTANT_ENTRY,
3287                    GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
3288 
3289 #if INCLUDE_JVMCI
3290   VM_INT_CONSTANTS_JVMCI(GENERATE_VM_INT_CONSTANT_ENTRY,
3291                          GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
3292 
3293 #endif
3294 
3295 #if INCLUDE_ALL_GCS
3296   VM_INT_CONSTANTS_CMS(GENERATE_VM_INT_CONSTANT_ENTRY)
3297 
3298   VM_INT_CONSTANTS_PARNEW(GENERATE_VM_INT_CONSTANT_ENTRY)
3299 #endif // INCLUDE_ALL_GCS
3300 
3301 #if INCLUDE_TRACE
3302   VM_INT_CONSTANTS_TRACE(GENERATE_VM_INT_CONSTANT_ENTRY)
3303 #endif
3304 
3305   VM_INT_CONSTANTS_OS(GENERATE_VM_INT_CONSTANT_ENTRY,
3306                       GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY,
3307                       GENERATE_C1_VM_INT_CONSTANT_ENTRY,
3308                       GENERATE_C2_VM_INT_CONSTANT_ENTRY,
3309                       GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
3310 
3311   VM_INT_CONSTANTS_CPU(GENERATE_VM_INT_CONSTANT_ENTRY,
3312                        GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY,
3313                        GENERATE_C1_VM_INT_CONSTANT_ENTRY,
3314                        GENERATE_C2_VM_INT_CONSTANT_ENTRY,
3315                        GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
3316 
3317   VM_INT_CONSTANTS_OS_CPU(GENERATE_VM_INT_CONSTANT_ENTRY,
3318                           GENERATE_PREPROCESSOR_VM_INT_CONSTANT_ENTRY,
3319                           GENERATE_C1_VM_INT_CONSTANT_ENTRY,
3320                           GENERATE_C2_VM_INT_CONSTANT_ENTRY,
3321                           GENERATE_C2_PREPROCESSOR_VM_INT_CONSTANT_ENTRY)
3322 
3323   GENERATE_VM_INT_CONSTANT_LAST_ENTRY()
3324 };
3325 
3326 VMLongConstantEntry VMStructs::localHotSpotVMLongConstants[] = {
3327 
3328   VM_LONG_CONSTANTS(GENERATE_VM_LONG_CONSTANT_ENTRY,
3329                     GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY,
3330                     GENERATE_C1_VM_LONG_CONSTANT_ENTRY,
3331                     GENERATE_C2_VM_LONG_CONSTANT_ENTRY,
3332                     GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY)
3333 
3334   VM_LONG_CONSTANTS_OS(GENERATE_VM_LONG_CONSTANT_ENTRY,
3335                        GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY,
3336                        GENERATE_C1_VM_LONG_CONSTANT_ENTRY,
3337                        GENERATE_C2_VM_LONG_CONSTANT_ENTRY,
3338                        GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY)
3339 
3340   VM_LONG_CONSTANTS_CPU(GENERATE_VM_LONG_CONSTANT_ENTRY,
3341                         GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY,
3342                         GENERATE_C1_VM_LONG_CONSTANT_ENTRY,
3343                         GENERATE_C2_VM_LONG_CONSTANT_ENTRY,
3344                         GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY)
3345 
3346   VM_LONG_CONSTANTS_OS_CPU(GENERATE_VM_LONG_CONSTANT_ENTRY,
3347                            GENERATE_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY,
3348                            GENERATE_C1_VM_LONG_CONSTANT_ENTRY,
3349                            GENERATE_C2_VM_LONG_CONSTANT_ENTRY,
3350                            GENERATE_C2_PREPROCESSOR_VM_LONG_CONSTANT_ENTRY)
3351 
3352   GENERATE_VM_LONG_CONSTANT_LAST_ENTRY()
3353 };
3354 
3355 VMAddressEntry VMStructs::localHotSpotVMAddresses[] = {
3356 
3357   VM_ADDRESSES(GENERATE_VM_ADDRESS_ENTRY,
3358                GENERATE_PREPROCESSOR_VM_ADDRESS_ENTRY,
3359                GENERATE_VM_FUNCTION_ENTRY)
3360 
3361   VM_ADDRESSES_OS(GENERATE_VM_ADDRESS_ENTRY,
3362                   GENERATE_PREPROCESSOR_VM_ADDRESS_ENTRY,
3363                   GENERATE_VM_FUNCTION_ENTRY)
3364 
3365 #if INCLUDE_JVMCI
3366   VM_ADDRESSES_JVMCI(GENERATE_VM_ADDRESS_ENTRY,
3367                      GENERATE_PREPROCESSOR_VM_ADDRESS_ENTRY,
3368                      GENERATE_VM_FUNCTION_ENTRY)
3369 #endif
3370 
3371   GENERATE_VM_ADDRESS_LAST_ENTRY()
3372 };
3373 
3374 // This is used both to check the types of referenced fields and, in
3375 // debug builds, to ensure that all of the field types are present.
3376 void
3377 VMStructs::init() {
3378   VM_STRUCTS(CHECK_NONSTATIC_VM_STRUCT_ENTRY,
3379              CHECK_STATIC_VM_STRUCT_ENTRY,
3380              CHECK_STATIC_PTR_VOLATILE_VM_STRUCT_ENTRY,
3381              CHECK_NO_OP,
3382              CHECK_VOLATILE_NONSTATIC_VM_STRUCT_ENTRY,
3383              CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
3384              CHECK_C1_NONSTATIC_VM_STRUCT_ENTRY,
3385              CHECK_C2_NONSTATIC_VM_STRUCT_ENTRY,
3386              CHECK_NO_OP,
3387              CHECK_NO_OP);
3388 
3389 #if INCLUDE_ALL_GCS
3390   VM_STRUCTS_PARALLELGC(CHECK_NONSTATIC_VM_STRUCT_ENTRY,
3391              CHECK_STATIC_VM_STRUCT_ENTRY);
3392 
3393   VM_STRUCTS_CMS(CHECK_NONSTATIC_VM_STRUCT_ENTRY,
3394              CHECK_VOLATILE_NONSTATIC_VM_STRUCT_ENTRY,
3395              CHECK_STATIC_VM_STRUCT_ENTRY);
3396 
3397   VM_STRUCTS_G1(CHECK_NONSTATIC_VM_STRUCT_ENTRY,
3398                 CHECK_STATIC_VM_STRUCT_ENTRY);
3399 
3400 #endif // INCLUDE_ALL_GCS
3401 
3402 #if INCLUDE_TRACE
3403   VM_STRUCTS_TRACE(CHECK_NONSTATIC_VM_STRUCT_ENTRY,
3404                 CHECK_STATIC_VM_STRUCT_ENTRY);
3405 #endif
3406 
3407   VM_STRUCTS_EXT(CHECK_NONSTATIC_VM_STRUCT_ENTRY,
3408                  CHECK_STATIC_VM_STRUCT_ENTRY);
3409 
3410   VM_STRUCTS_CPU(CHECK_NONSTATIC_VM_STRUCT_ENTRY,
3411                  CHECK_STATIC_VM_STRUCT_ENTRY,
3412                  CHECK_NO_OP,
3413                  CHECK_VOLATILE_NONSTATIC_VM_STRUCT_ENTRY,
3414                  CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
3415                  CHECK_C2_NONSTATIC_VM_STRUCT_ENTRY,
3416                  CHECK_NO_OP,
3417                  CHECK_NO_OP);
3418 
3419   VM_STRUCTS_OS_CPU(CHECK_NONSTATIC_VM_STRUCT_ENTRY,
3420                     CHECK_STATIC_VM_STRUCT_ENTRY,
3421                     CHECK_NO_OP,
3422                     CHECK_VOLATILE_NONSTATIC_VM_STRUCT_ENTRY,
3423                     CHECK_NONPRODUCT_NONSTATIC_VM_STRUCT_ENTRY,
3424                     CHECK_C2_NONSTATIC_VM_STRUCT_ENTRY,
3425                     CHECK_NO_OP,
3426                     CHECK_NO_OP);
3427 
3428   VM_TYPES(CHECK_VM_TYPE_ENTRY,
3429            CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3430            CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3431            CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3432            CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3433            CHECK_C1_TOPLEVEL_VM_TYPE_ENTRY,
3434            CHECK_C2_VM_TYPE_ENTRY,
3435            CHECK_C2_TOPLEVEL_VM_TYPE_ENTRY);
3436 
3437 #if INCLUDE_ALL_GCS
3438   VM_TYPES_PARALLELGC(CHECK_VM_TYPE_ENTRY,
3439                       CHECK_SINGLE_ARG_VM_TYPE_NO_OP);
3440 
3441   VM_TYPES_CMS(CHECK_VM_TYPE_ENTRY,
3442                CHECK_SINGLE_ARG_VM_TYPE_NO_OP);
3443 
3444   VM_TYPES_PARNEW(CHECK_VM_TYPE_ENTRY)
3445 
3446   VM_TYPES_G1(CHECK_VM_TYPE_ENTRY,
3447               CHECK_SINGLE_ARG_VM_TYPE_NO_OP);
3448 
3449 #endif // INCLUDE_ALL_GCS
3450 
3451 #if INCLUDE_TRACE
3452   VM_TYPES_TRACE(CHECK_VM_TYPE_ENTRY,
3453               CHECK_SINGLE_ARG_VM_TYPE_NO_OP);
3454 #endif
3455 
3456   VM_TYPES_EXT(CHECK_VM_TYPE_ENTRY,
3457                CHECK_SINGLE_ARG_VM_TYPE_NO_OP);
3458 
3459   VM_TYPES_CPU(CHECK_VM_TYPE_ENTRY,
3460                CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3461                CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3462                CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3463                CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3464                CHECK_C1_TOPLEVEL_VM_TYPE_ENTRY,
3465                CHECK_C2_VM_TYPE_ENTRY,
3466                CHECK_C2_TOPLEVEL_VM_TYPE_ENTRY);
3467 
3468   VM_TYPES_OS_CPU(CHECK_VM_TYPE_ENTRY,
3469                   CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3470                   CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3471                   CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3472                   CHECK_SINGLE_ARG_VM_TYPE_NO_OP,
3473                   CHECK_C1_TOPLEVEL_VM_TYPE_ENTRY,
3474                   CHECK_C2_VM_TYPE_ENTRY,
3475                   CHECK_C2_TOPLEVEL_VM_TYPE_ENTRY);
3476 
3477   //
3478   // Split VM_STRUCTS() invocation into two parts to allow MS VC++ 6.0
3479   // to build with the source mounted over SNC3.2. Symptom was that
3480   // debug build failed with an internal compiler error. Has been seen
3481   // mounting sources from Solaris 2.6 and 2.7 hosts, but so far not
3482   // 2.8 hosts. Appears to occur because line is too long.
3483   //
3484   // If an assertion failure is triggered here it means that an entry
3485   // in VMStructs::localHotSpotVMStructs[] was not found in
3486   // VMStructs::localHotSpotVMTypes[]. (The assertion itself had to be
3487   // made less descriptive because of this above bug -- see the
3488   // definition of ENSURE_FIELD_TYPE_PRESENT.)
3489   //
3490   // NOTE: taken out because this was just not working on everyone's
3491   // Solstice NFS setup. If everyone switches to local workspaces on
3492   // Win32, we can put this back in.
3493 #ifndef _WINDOWS
3494   debug_only(VM_STRUCTS(ENSURE_FIELD_TYPE_PRESENT,
3495                         CHECK_NO_OP,
3496                         CHECK_NO_OP,
3497                         CHECK_NO_OP,
3498                         CHECK_NO_OP,
3499                         CHECK_NO_OP,
3500                         CHECK_NO_OP,
3501                         CHECK_NO_OP,
3502                         CHECK_NO_OP,
3503                         CHECK_NO_OP));
3504   debug_only(VM_STRUCTS(CHECK_NO_OP,
3505                         ENSURE_FIELD_TYPE_PRESENT,
3506                         ENSURE_FIELD_TYPE_PRESENT,
3507                         CHECK_NO_OP,
3508                         ENSURE_FIELD_TYPE_PRESENT,
3509                         ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT,
3510                         ENSURE_C1_FIELD_TYPE_PRESENT,
3511                         ENSURE_C2_FIELD_TYPE_PRESENT,
3512                         CHECK_NO_OP,
3513                         CHECK_NO_OP));
3514 #if INCLUDE_ALL_GCS
3515   debug_only(VM_STRUCTS_PARALLELGC(ENSURE_FIELD_TYPE_PRESENT,
3516                                    ENSURE_FIELD_TYPE_PRESENT));
3517   debug_only(VM_STRUCTS_CMS(ENSURE_FIELD_TYPE_PRESENT,
3518                             ENSURE_FIELD_TYPE_PRESENT,
3519                             ENSURE_FIELD_TYPE_PRESENT));
3520   debug_only(VM_STRUCTS_G1(ENSURE_FIELD_TYPE_PRESENT,
3521                            ENSURE_FIELD_TYPE_PRESENT));
3522 #endif // INCLUDE_ALL_GCS
3523 
3524 #if INCLUDE_TRACE
3525   debug_only(VM_STRUCTS_TRACE(ENSURE_FIELD_TYPE_PRESENT,
3526                            ENSURE_FIELD_TYPE_PRESENT));
3527 #endif
3528 
3529   debug_only(VM_STRUCTS_EXT(ENSURE_FIELD_TYPE_PRESENT,
3530                             ENSURE_FIELD_TYPE_PRESENT));
3531 
3532   debug_only(VM_STRUCTS_CPU(ENSURE_FIELD_TYPE_PRESENT,
3533                             ENSURE_FIELD_TYPE_PRESENT,
3534                             CHECK_NO_OP,
3535                             ENSURE_FIELD_TYPE_PRESENT,
3536                             ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT,
3537                             ENSURE_C2_FIELD_TYPE_PRESENT,
3538                             CHECK_NO_OP,
3539                             CHECK_NO_OP));
3540   debug_only(VM_STRUCTS_OS_CPU(ENSURE_FIELD_TYPE_PRESENT,
3541                                ENSURE_FIELD_TYPE_PRESENT,
3542                                CHECK_NO_OP,
3543                                ENSURE_FIELD_TYPE_PRESENT,
3544                                ENSURE_NONPRODUCT_FIELD_TYPE_PRESENT,
3545                                ENSURE_C2_FIELD_TYPE_PRESENT,
3546                                CHECK_NO_OP,
3547                                CHECK_NO_OP));
3548 #endif
3549 }
3550 
3551 extern "C" {
3552 
3553 #define STRIDE(array) ((char*)&amp;array[1] - (char*)&amp;array[0])
3554 
3555 JNIEXPORT VMStructEntry* gHotSpotVMStructs = VMStructs::localHotSpotVMStructs;
3556 JNIEXPORT uint64_t gHotSpotVMStructEntryTypeNameOffset = offset_of(VMStructEntry, typeName);
3557 JNIEXPORT uint64_t gHotSpotVMStructEntryFieldNameOffset = offset_of(VMStructEntry, fieldName);
3558 JNIEXPORT uint64_t gHotSpotVMStructEntryTypeStringOffset = offset_of(VMStructEntry, typeString);
3559 JNIEXPORT uint64_t gHotSpotVMStructEntryIsStaticOffset = offset_of(VMStructEntry, isStatic);
3560 JNIEXPORT uint64_t gHotSpotVMStructEntryOffsetOffset = offset_of(VMStructEntry, offset);
3561 JNIEXPORT uint64_t gHotSpotVMStructEntryAddressOffset = offset_of(VMStructEntry, address);
3562 JNIEXPORT uint64_t gHotSpotVMStructEntryArrayStride = STRIDE(gHotSpotVMStructs);
3563 
3564 JNIEXPORT VMTypeEntry* gHotSpotVMTypes = VMStructs::localHotSpotVMTypes;
3565 JNIEXPORT uint64_t gHotSpotVMTypeEntryTypeNameOffset = offset_of(VMTypeEntry, typeName);
3566 JNIEXPORT uint64_t gHotSpotVMTypeEntrySuperclassNameOffset = offset_of(VMTypeEntry, superclassName);
3567 JNIEXPORT uint64_t gHotSpotVMTypeEntryIsOopTypeOffset = offset_of(VMTypeEntry, isOopType);
3568 JNIEXPORT uint64_t gHotSpotVMTypeEntryIsIntegerTypeOffset = offset_of(VMTypeEntry, isIntegerType);
3569 JNIEXPORT uint64_t gHotSpotVMTypeEntryIsUnsignedOffset = offset_of(VMTypeEntry, isUnsigned);
3570 JNIEXPORT uint64_t gHotSpotVMTypeEntrySizeOffset = offset_of(VMTypeEntry, size);
3571 JNIEXPORT uint64_t gHotSpotVMTypeEntryArrayStride = STRIDE(gHotSpotVMTypes);
3572 
3573 JNIEXPORT VMIntConstantEntry* gHotSpotVMIntConstants = VMStructs::localHotSpotVMIntConstants;
3574 JNIEXPORT uint64_t gHotSpotVMIntConstantEntryNameOffset = offset_of(VMIntConstantEntry, name);
3575 JNIEXPORT uint64_t gHotSpotVMIntConstantEntryValueOffset = offset_of(VMIntConstantEntry, value);
3576 JNIEXPORT uint64_t gHotSpotVMIntConstantEntryArrayStride = STRIDE(gHotSpotVMIntConstants);
3577 
3578 JNIEXPORT VMLongConstantEntry* gHotSpotVMLongConstants = VMStructs::localHotSpotVMLongConstants;
3579 JNIEXPORT uint64_t gHotSpotVMLongConstantEntryNameOffset = offset_of(VMLongConstantEntry, name);
3580 JNIEXPORT uint64_t gHotSpotVMLongConstantEntryValueOffset = offset_of(VMLongConstantEntry, value);
3581 JNIEXPORT uint64_t gHotSpotVMLongConstantEntryArrayStride = STRIDE(gHotSpotVMLongConstants);
3582 
3583 JNIEXPORT VMAddressEntry* gHotSpotVMAddresses = VMStructs::localHotSpotVMAddresses;
3584 JNIEXPORT uint64_t gHotSpotVMAddressEntryNameOffset = offset_of(VMAddressEntry, name);
3585 JNIEXPORT uint64_t gHotSpotVMAddressEntryValueOffset = offset_of(VMAddressEntry, value);
3586 JNIEXPORT uint64_t gHotSpotVMAddressEntryArrayStride = STRIDE(gHotSpotVMAddresses);
3587 }
3588 
3589 #ifdef ASSERT
3590 static int recursiveFindType(VMTypeEntry* origtypes, const char* typeName, bool isRecurse) {
3591   {
3592     VMTypeEntry* types = origtypes;
3593     while (types-&gt;typeName != NULL) {
3594       if (strcmp(typeName, types-&gt;typeName) == 0) {
3595         // Found it
3596         return 1;
3597       }
3598       ++types;
3599     }
3600   }
3601   // Search for the base type by peeling off const and *
3602   size_t len = strlen(typeName);
3603   if (typeName[len-1] == '*') {
3604     char * s = NEW_C_HEAP_ARRAY(char, len, mtInternal);
3605     strncpy(s, typeName, len - 1);
3606     s[len-1] = '\0';
3607     // tty-&gt;print_cr("checking \"%s\" for \"%s\"", s, typeName);
3608     if (recursiveFindType(origtypes, s, true) == 1) {
3609       FREE_C_HEAP_ARRAY(char, s);
3610       return 1;
3611     }
3612     FREE_C_HEAP_ARRAY(char, s);
3613   }
3614   const char* start = NULL;
3615   if (strstr(typeName, "GrowableArray&lt;") == typeName) {
3616     start = typeName + strlen("GrowableArray&lt;");
3617   } else if (strstr(typeName, "Array&lt;") == typeName) {
3618     start = typeName + strlen("Array&lt;");
3619   }
3620   if (start != NULL) {
3621     const char * end = strrchr(typeName, '&gt;');
3622     int len = end - start + 1;
3623     char * s = NEW_C_HEAP_ARRAY(char, len, mtInternal);
3624     strncpy(s, start, len - 1);
3625     s[len-1] = '\0';
3626     // tty-&gt;print_cr("checking \"%s\" for \"%s\"", s, typeName);
3627     if (recursiveFindType(origtypes, s, true) == 1) {
3628       FREE_C_HEAP_ARRAY(char, s);
3629       return 1;
3630     }
3631     FREE_C_HEAP_ARRAY(char, s);
3632   }
3633   if (strstr(typeName, "const ") == typeName) {
3634     const char * s = typeName + strlen("const ");
3635     // tty-&gt;print_cr("checking \"%s\" for \"%s\"", s, typeName);
3636     if (recursiveFindType(origtypes, s, true) == 1) {
3637       return 1;
3638     }
3639   }
3640   if (strstr(typeName, " const") == typeName + len - 6) {
3641     char * s = os::strdup_check_oom(typeName);
3642     s[len - 6] = '\0';
3643     // tty-&gt;print_cr("checking \"%s\" for \"%s\"", s, typeName);
3644     if (recursiveFindType(origtypes, s, true) == 1) {
3645       os::free(s);
3646       return 1;
3647     }
3648     os::free(s);
3649   }
3650   if (!isRecurse) {
3651     tty-&gt;print_cr("type \"%s\" not found", typeName);
3652   }
3653   return 0;
3654 }
3655 
3656 
3657 int
3658 VMStructs::findType(const char* typeName) {
3659   VMTypeEntry* types = gHotSpotVMTypes;
3660 
3661   return recursiveFindType(types, typeName, false);
3662 }
3663 #endif
3664 
3665 void vmStructs_init() {
3666   debug_only(VMStructs::init());
3667 }
3668 
3669 #ifndef PRODUCT
3670 void VMStructs::test() {
3671   // Make sure last entry in the each array is indeed the correct end marker.
3672   // The reason why these are static is to make sure they are zero initialized.
3673   // Putting them on the stack will leave some garbage in the padding of some fields.
3674   static VMStructEntry struct_last_entry = GENERATE_VM_STRUCT_LAST_ENTRY();
3675   assert(memcmp(&amp;localHotSpotVMStructs[(sizeof(localHotSpotVMStructs) / sizeof(VMStructEntry)) - 1],
3676                 &amp;struct_last_entry,
3677                 sizeof(VMStructEntry)) == 0, "Incorrect last entry in localHotSpotVMStructs");
3678 
3679   static VMTypeEntry type_last_entry = GENERATE_VM_TYPE_LAST_ENTRY();
3680   assert(memcmp(&amp;localHotSpotVMTypes[sizeof(localHotSpotVMTypes) / sizeof(VMTypeEntry) - 1],
3681                 &amp;type_last_entry,
3682                 sizeof(VMTypeEntry)) == 0, "Incorrect last entry in localHotSpotVMTypes");
3683 
3684   static VMIntConstantEntry int_last_entry = GENERATE_VM_INT_CONSTANT_LAST_ENTRY();
3685   assert(memcmp(&amp;localHotSpotVMIntConstants[sizeof(localHotSpotVMIntConstants) / sizeof(VMIntConstantEntry) - 1],
3686                 &amp;int_last_entry,
3687                 sizeof(VMIntConstantEntry)) == 0, "Incorrect last entry in localHotSpotVMIntConstants");
3688 
3689   static VMLongConstantEntry long_last_entry = GENERATE_VM_LONG_CONSTANT_LAST_ENTRY();
3690   assert(memcmp(&amp;localHotSpotVMLongConstants[sizeof(localHotSpotVMLongConstants) / sizeof(VMLongConstantEntry) - 1],
3691                 &amp;long_last_entry,
3692                 sizeof(VMLongConstantEntry)) == 0, "Incorrect last entry in localHotSpotVMLongConstants");
3693 
3694   static VMAddressEntry address_last_entry = GENERATE_VM_ADDRESS_LAST_ENTRY();
3695   assert(memcmp(&amp;localHotSpotVMAddresses[sizeof(localHotSpotVMAddresses) / sizeof(VMAddressEntry) - 1],
3696                 &amp;address_last_entry,
3697                 sizeof(VMAddressEntry)) == 0, "Incorrect last entry in localHotSpotVMAddresses");
3698 
3699 
3700   // Check for duplicate entries in type array
3701   for (int i = 0; localHotSpotVMTypes[i].typeName != NULL; i++) {
3702     for (int j = i + 1; localHotSpotVMTypes[j].typeName != NULL; j++) {
3703       if (strcmp(localHotSpotVMTypes[i].typeName, localHotSpotVMTypes[j].typeName) == 0) {
3704         tty-&gt;print_cr("Duplicate entries for '%s'", localHotSpotVMTypes[i].typeName);
3705         assert(false, "Duplicate types in localHotSpotVMTypes array");
3706       }
3707     }
3708   }
3709 }
3710 #endif
</pre></body></html>
