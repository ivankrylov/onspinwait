<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta charset="utf-8">
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="-1" />
<!--
   Note to customizers: the body of the webrev is IDed as SUNWwebrev
   to allow easy overriding by users of webrev via the userContent.css
   mechanism available in some browsers.

   For example, to have all "removed" information be red instead of
   brown, set a rule in your userContent.css file like:

       body#SUNWwebrev span.removed { color: red ! important; }
-->
<style type="text/css" media="screen">
body {
    background-color: #eeeeee;
}
hr {
    border: none 0;
    border-top: 1px solid #aaa;
    height: 1px;
}
div.summary {
    font-size: .8em;
    border-bottom: 1px solid #aaa;
    padding-left: 1em;
    padding-right: 1em;
}
div.summary h2 {
    margin-bottom: 0.3em;
}
div.summary table th {
    text-align: right;
    vertical-align: top;
    white-space: nowrap;
}
span.lineschanged {
    font-size: 0.7em;
}
span.oldmarker {
    color: red;
    font-size: large;
    font-weight: bold;
}
span.newmarker {
    color: green;
    font-size: large;
    font-weight: bold;
}
span.removed {
    color: brown;
}
span.changed {
    color: blue;
}
span.new {
    color: blue;
    font-weight: bold;
}
a.print { font-size: x-small; }

</style>

<style type="text/css" media="print">
pre { font-size: 0.8em; font-family: courier, monospace; }
span.removed { color: #444; font-style: italic }
span.changed { font-weight: bold; }
span.new { font-weight: bold; }
span.newmarker { font-size: 1.2em; font-weight: bold; }
span.oldmarker { font-size: 1.2em; font-weight: bold; }
a.print {display: none}
hr { border: none 0; border-top: 1px solid #aaa; height: 1px; }
</style>

<title>hotspot Sdiff src/cpu/x86/vm </title>
</head><body id="SUNWwebrev">
<h2>src/cpu/x86/vm/x86_64.ad</h2>
<a class="print" href="javascript:print()">Print this page</a>
<pre></pre>

<table><tr valign="top">
<td><pre>

</pre><hr></hr><pre>
6287   match(StoreFence);
6288   ins_cost(0);
6289 
6290   size(0);
6291   format %{ "MEMBAR-release ! (empty encoding)" %}
6292   ins_encode();
6293   ins_pipe(empty);
6294 %}
6295 
6296 instruct membar_release_lock()
6297 %{
6298   match(MemBarReleaseLock);
6299   ins_cost(0);
6300 
6301   size(0);
6302   format %{ "MEMBAR-release (a FastUnlock follows so empty encoding)" %}
6303   ins_encode();
6304   ins_pipe(empty);
6305 %}
6306 



















6307 instruct membar_volatile(rFlagsReg cr) %{
6308   match(MemBarVolatile);
6309   effect(KILL cr);
6310   ins_cost(400);
6311 
6312   format %{
6313     $$template
6314     if (os::is_MP()) {
6315       $$emit$$"lock addl [rsp + #0], 0\t! membar_volatile"
6316     } else {
6317       $$emit$$"MEMBAR-volatile ! (empty encoding)"
6318     }
6319   %}
6320   ins_encode %{
6321     __ membar(Assembler::StoreLoad);
6322   %}
6323   ins_pipe(pipe_slow);
6324 %}
6325 
6326 instruct unnecessary_membar_volatile()

</pre><hr></hr>
</pre></td><td><pre>

</pre><hr></hr><pre>
6287   match(StoreFence);
6288   ins_cost(0);
6289 
6290   size(0);
6291   format %{ "MEMBAR-release ! (empty encoding)" %}
6292   ins_encode();
6293   ins_pipe(empty);
6294 %}
6295 
6296 instruct membar_release_lock()
6297 %{
6298   match(MemBarReleaseLock);
6299   ins_cost(0);
6300 
6301   size(0);
6302   format %{ "MEMBAR-release (a FastUnlock follows so empty encoding)" %}
6303   ins_encode();
6304   ins_pipe(empty);
6305 %}
6306 
<span class="new">6307 instruct spinloophint()</span>
<span class="new">6308 %{</span>
<span class="new">6309   match(SpinLoopHint);</span>
<span class="new">6310   ins_cost(200);</span>
<span class="new">6311 </span>
<span class="new">6312   format %{</span>
<span class="new">6313     $$template</span>
<span class="new">6314     if (os::is_MP()) {</span>
<span class="new">6315       $$emit$$"pause\t! membar_spinloophint"</span>
<span class="new">6316     } else {</span>
<span class="new">6317       $$emit$$"MEMBAR-spinloophint ! (empty encoding)"</span>
<span class="new">6318     }</span>
<span class="new">6319   %}</span>
<span class="new">6320   ins_encode %{</span>
<span class="new">6321     __ pause();</span>
<span class="new">6322   %}</span>
<span class="new">6323   ins_pipe(pipe_slow);</span>
<span class="new">6324 %}</span>
<span class="new">6325 </span>
6326 instruct membar_volatile(rFlagsReg cr) %{
6327   match(MemBarVolatile);
6328   effect(KILL cr);
6329   ins_cost(400);
6330 
6331   format %{
6332     $$template
6333     if (os::is_MP()) {
6334       $$emit$$"lock addl [rsp + #0], 0\t! membar_volatile"
6335     } else {
6336       $$emit$$"MEMBAR-volatile ! (empty encoding)"
6337     }
6338   %}
6339   ins_encode %{
6340     __ membar(Assembler::StoreLoad);
6341   %}
6342   ins_pipe(pipe_slow);
6343 %}
6344 
6345 instruct unnecessary_membar_volatile()

</pre><hr></hr>
</pre></td>
</tr></table>
</body></html>
